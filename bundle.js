var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function i(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(t,e){t.appendChild(e)}function a(t,e,n){t.insertBefore(e,n||null)}function u(t){t.parentNode.removeChild(t)}function c(t){return document.createElement(t)}function h(t){return document.createTextNode(t)}function l(){return h(" ")}function f(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function p(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function d(t,e){t.value=null==e?"":e}function v(t,e,n,r){t.style.setProperty(e,n,r?"important":"")}function g(t,e){for(let n=0;n<t.options.length;n+=1){const r=t.options[n];if(r.__value===e)return void(r.selected=!0)}}let m;function y(t){m=t}function b(t){(function(){if(!m)throw new Error("Function called outside component initialization");return m})().$$.on_mount.push(t)}const w=[],I=[],T=[],E=[],S=Promise.resolve();let _=!1;function A(t){T.push(t)}let N=!1;const k=new Set;function D(){if(!N){N=!0;do{for(let t=0;t<w.length;t+=1){const e=w[t];y(e),C(e.$$)}for(y(null),w.length=0;I.length;)I.pop()();for(let t=0;t<T.length;t+=1){const e=T[t];k.has(e)||(k.add(e),e())}T.length=0}while(w.length);for(;E.length;)E.pop()();_=!1,N=!1,k.clear()}}function C(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(A)}}const O=new Set;function R(t,e){-1===t.$$.dirty[0]&&(w.push(t),_||(_=!0,S.then(D)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function P(o,s,a,c,h,l,f,p=[-1]){const d=m;y(o);const v=o.$$={fragment:null,ctx:null,props:l,update:t,not_equal:h,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:s.context||[]),callbacks:n(),dirty:p,skip_bound:!1,root:s.target||d.$$.root};f&&f(v.root);let g=!1;if(v.ctx=a?a(o,s.props||{},(t,e,...n)=>{const r=n.length?n[0]:e;return v.ctx&&h(v.ctx[t],v.ctx[t]=r)&&(!v.skip_bound&&v.bound[t]&&v.bound[t](r),g&&R(o,t)),e}):[],v.update(),g=!0,r(v.before_update),v.fragment=!!c&&c(v.ctx),s.target){if(s.hydrate){const t=(I=s.target,Array.from(I.childNodes));v.fragment&&v.fragment.l(t),t.forEach(u)}else v.fragment&&v.fragment.c();s.intro&&((b=o.$$.fragment)&&b.i&&(O.delete(b),b.i(w))),function(t,n,o,s){const{fragment:a,on_mount:u,on_destroy:c,after_update:h}=t.$$;a&&a.m(n,o),s||A(()=>{const n=u.map(e).filter(i);c?c.push(...n):r(n),t.$$.on_mount=[]}),h.forEach(A)}(o,s.target,s.anchor,s.customElement),D()}var b,w,I;y(d)}class x{$destroy(){!function(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}var L=function(t,e){return(L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function M(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}L(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var F=function(){return(F=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function V(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function U(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function j(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function q(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function B(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}var K={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,l=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,p=63&c;u||(p=64,s||(f=64)),r.push(n[h],n[l],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var c=o<<2|s>>4;if(r.push(c),64!==a){var h=s<<4&240|a>>2;if(r.push(h),64!==u){var l=a<<6&192|u;r.push(l)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function G(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=G(t[n],e[n]));return t}var H=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function z(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function W(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}var Q="FirebaseError",X=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name=Q,Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,$.prototype.create),o}return M(e,t),e}(Error),$=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?function(t,e){return t.replace(Y,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").";return new X(i,a,r)},t}();var Y=/\{\$([^}]+)}/g;function J(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Z(t,e){var n=new tt(t,e);return n.subscribe.bind(n)}var tt=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=et),void 0===r.error&&(r.error=et),void 0===r.complete&&(r.complete=et);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function et(){}function nt(t){return t&&t._delegate?t._delegate:t}var rt=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),it="[DEFAULT]",ot=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new H;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:it})}catch(t){}try{for(var r=j(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=q(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService({instanceIdentifier:u});a.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=it),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return V(this,void 0,void 0,function(){var t;return U(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(B(B([],q(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),q(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=it),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var r=t.options,i=void 0===r?{}:r,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var s=this.getOrInitializeService({instanceIdentifier:o,options:i});try{for(var a=j(this.instancesDeferred.entries()),u=a.next();!u.done;u=a.next()){var c=q(u.value,2),h=c[0],l=c[1];o===this.normalizeInstanceIdentifier(h)&&l.resolve(s)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return s},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,r,i=this.onInitCallbacks.get(e);if(i)try{for(var o=j(i),s=o.next();!s.done;s=o.next()){var a=s.value;try{a(t,e)}catch(t){}}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===it?void 0:e),options:i}),this.instances.set(n,o),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(t){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=it),this.component?this.component.multipleInstances?t:it:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}();var st,at=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new ot(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();function ut(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var ct,ht=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(ct||(ct={}));var lt,ft={debug:ct.DEBUG,verbose:ct.VERBOSE,info:ct.INFO,warn:ct.WARN,error:ct.ERROR,silent:ct.SILENT},pt=ct.INFO,dt=((st={})[ct.DEBUG]="log",st[ct.VERBOSE]="log",st[ct.INFO]="info",st[ct.WARN]="warn",st[ct.ERROR]="error",st),vt=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=dt[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,ut(["["+i+"]  "+t.name+":"],n))}},gt=function(){function t(t){this.name=t,this._logLevel=pt,this._logHandler=vt,this._userLogHandler=null,ht.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in ct))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?ft[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,ut([this,ct.DEBUG],t)),this._logHandler.apply(this,ut([this,ct.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,ut([this,ct.VERBOSE],t)),this._logHandler.apply(this,ut([this,ct.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,ut([this,ct.INFO],t)),this._logHandler.apply(this,ut([this,ct.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,ut([this,ct.WARN],t)),this._logHandler.apply(this,ut([this,ct.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,ut([this,ct.ERROR],t)),this._logHandler.apply(this,ut([this,ct.ERROR],t))},t}();function mt(t){ht.forEach(function(e){e.setLogLevel(t)})}var yt,bt=((lt={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",lt["bad-app-name"]="Illegal App name: '{$appName}",lt["duplicate-app"]="Firebase App named '{$appName}' already exists",lt["app-deleted"]="Firebase App named '{$appName}' already deleted",lt["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",lt["invalid-log-argument"]="First argument to `onLog` must be null or a function.",lt),wt=new $("app","Firebase",bt),It="@firebase/app",Tt="0.6.29",Et="[DEFAULT]",St=((yt={})[It]="fire-core",yt["@firebase/analytics"]="fire-analytics",yt["@firebase/app-check"]="fire-app-check",yt["@firebase/auth"]="fire-auth",yt["@firebase/database"]="fire-rtdb",yt["@firebase/functions"]="fire-fn",yt["@firebase/installations"]="fire-iid",yt["@firebase/messaging"]="fire-fcm",yt["@firebase/performance"]="fire-perf",yt["@firebase/remote-config"]="fire-rc",yt["@firebase/storage"]="fire-gcs",yt["@firebase/firestore"]="fire-fst",yt["fire-js"]="fire-js",yt["firebase-wrapper"]="fire-js-all",yt),_t=new gt("@firebase/app"),At=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=G(void 0,t),this.container=new at(e.name),this._addComponent(new rt("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){var n;void 0===e&&(e=Et),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=Et),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){_t.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw wt.create("app-deleted",{appName:this.name_})},t}();At.prototype.name&&At.prototype.options||At.prototype.delete||console.log("dc");var Nt="8.8.1";function kt(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){var o=i;i={name:o}}var s=i;void 0===s.name&&(s.name=Et);var a=s.name;if("string"!=typeof a||!a)throw wt.create("bad-app-name",{appName:String(a)});if(J(e,a))throw wt.create("duplicate-app",{appName:a});var u=new t(n,s,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=St[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&a&&u.push("and"),a&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void _t.warn(u.join(" "))}o(new rt(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:mt,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw wt.create("invalid-log-argument");!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=ft[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:ct[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=ht;r<i.length;r++)n(i[r])}(t,e)},apps:null,SDK_VERSION:Nt,INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(!J(e,t=t||Et))throw wt.create("no-app",{appName:t});return e[t]}function o(o){var s=o.name;if(n.has(s))return _t.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var a=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[s])throw wt.create("invalid-app-argument",{appName:s});return t[s]()};void 0!==o.serviceProps&&G(a,o.serviceProps),r[s]=a,t.prototype[s]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,s).apply(this,o.multipleInstances?t:[])}}for(var u=0,c=Object.keys(e);u<c.length;u++){var h=c[u];e[h]._addComponent(o)}return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}var Dt=function t(){var e=kt(At);return e.INTERNAL=F(F({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){G(e,t)},createSubscribe:Z,ErrorFactory:$,deepExtend:G}),e}(),Ct=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if("object"==typeof self&&self.self===self&&void 0!==self.firebase){_t.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Ot=self.firebase.SDK_VERSION;Ot&&Ot.indexOf("LITE")>=0&&_t.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Rt=Dt.initializeApp;Dt.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return W()&&_t.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),Rt.apply(void 0,t)};var Pt=Dt;!function(t,e){t.INTERNAL.registerComponent(new rt("platform-logger",function(t){return new Ct(t)},"PRIVATE")),t.registerVersion(It,Tt,e),t.registerVersion("fire-js","")}(Pt);Pt.registerVersion("firebase","8.9.0","app"),Pt.SDK_VERSION="8.9.0",function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var n=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function r(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function i(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:r(t)}}!function(t,r){if(r){var i=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in i||(i[s]={}),i=i[s]}(r=r(o=i[t=t[t.length-1]]))!=o&&null!=r&&e(i,t,{configurable:!0,writable:!0,value:r})}}("Promise",function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function r(){this.a=null}function o(t){return t instanceof e?t:new e(function(e){e(t)})}if(t)return t;r.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c(function(){e.g()})}this.a.push(t)};var s=n.setTimeout;r.prototype.c=function(t){s(t,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},r.prototype.f=function(t){this.c(function(){throw t})},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new r;return e.prototype.s=function(t){var e=this.f();t.Ra(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,s=new e(function(t,e){i=t,o=e});return this.Ra(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Ra=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=o,e.reject=function(t){return new e(function(e,n){n(t)})},e.race=function(t){return new e(function(e,n){for(var r=i(t),s=r.next();!s.done;s=r.next())o(s.value).Ra(e,n)})},e.all=function(t){var n=i(t),r=n.next();return r.done?o([]):new e(function(t,e){function i(e){return function(n){s[e]=n,0==--a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,o(r.value).Ra(i(s.length-1),e),r=n.next()}while(!r.done)})},e});var o=o||{},s=this||self,a=/^[\w+/_-]+[=]{0,2}$/,u=null;function c(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&a.test(t)?t:""}function h(){}function l(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function f(t){var e=l(t);return"array"==e||"object"==e&&"number"==typeof t.length}function p(t){return"function"==l(t)}function d(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var v="closure_uid_"+(1e9*Math.random()>>>0),g=0;function m(t,e,n){return t.call.apply(t.bind,arguments)}function y(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function b(t,e,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?m:y).apply(null,arguments)}function w(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function I(t,e){function n(){}n.prototype=e.prototype,t.bb=e.prototype,t.prototype=new n,t.prototype.constructor=t}function T(t){return t}function E(t,e,n){this.code=A+t,this.message=e||N[t]||"",this.a=n||null}function S(t){var e=t&&t.code;return e?new E(e.substring(A.length),t.message,t.serverResponse):null}I(E,Error),E.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},E.prototype.toJSON=function(){return this.w()};var _,A="auth/",N={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},k={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function D(t){for(var e in k)if(k[e].id===t)return{firebaseEndpoint:(t=k[e]).Ua,secureTokenEndpoint:t.$a,identityPlatformEndpoint:t.Xa};return null}function C(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function O(t){if(Error.captureStackTrace)Error.captureStackTrace(this,O);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function R(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");O.call(this,n+t[r])}function P(t,e){throw new R("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function x(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function L(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function M(){this.b=this.a=null}_=D("__EID__")?"__EID__":void 0,I(O,Error),O.prototype.name="CustomError",I(R,O),R.prototype.name="AssertionError",x.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var F=new x(function(){return new U},function(t){t.reset()});function V(){var t=ye,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function U(){this.next=this.b=this.a=null}M.prototype.add=function(t,e){var n=F.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},U.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},U.prototype.reset=function(){this.next=this.b=this.a=null};var j=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},q=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var B=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},K=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},G=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function H(t,e){return 0<=j(t,e)}function z(t,e){var n;return(n=0<=(e=j(t,e)))&&Array.prototype.splice.call(t,e,1),n}function W(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,function(n,r){e.call(void 0,n,r,t)&&1==Array.prototype.splice.call(t,r,1).length&&0})}function Q(t){return Array.prototype.concat.apply([],arguments)}function X(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var $,Y=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},J=/&/g,Z=/</g,tt=/>/g,et=/"/g,nt=/'/g,rt=/\x00/g,it=/[\x00&<>"']/;function ot(t,e){return-1!=t.indexOf(e)}function st(t,e){return t<e?-1:t>e?1:0}t:{var at=s.navigator;if(at){var ut=at.userAgent;if(ut){$=ut;break t}}$=""}function ct(t){return ot($,t)}function ht(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function lt(t){for(var e in t)return!1;return!0}function ft(t){var e,n={};for(e in t)n[e]=t[e];return n}var pt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function dt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<pt.length;o++)n=pt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function vt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||s).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(d(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;P("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function gt(t,e){this.a=t===wt&&e||"",this.b=bt}function mt(t){return t instanceof gt&&t.constructor===gt&&t.b===bt?t.a:(P("expected object of type Const, got '"+t+"'"),"type_error:Const")}gt.prototype.ta=!0,gt.prototype.sa=function(){return this.a},gt.prototype.toString=function(){return"Const{"+this.a+"}"};var yt,bt={},wt={};function It(){if(void 0===yt){var t=null,e=s.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:T,createScript:T,createScriptURL:T})}catch(t){s.console&&s.console.error(t.message)}yt=t}else yt=t}return yt}function Tt(t,e){this.a=e===Nt?t:""}function Et(t){return t instanceof Tt&&t.constructor===Tt?t.a:(P("expected object of type TrustedResourceUrl, got '"+t+"' of type "+l(t)),"type_error:TrustedResourceUrl")}function St(t,e){var n=mt(t);if(!At.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=It();return new Tt(t=e?e.createScriptURL(t):t,Nt)}(t=n.replace(_t,function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof gt?mt(t):encodeURIComponent(String(t))}))}Tt.prototype.ta=!0,Tt.prototype.sa=function(){return this.a.toString()},Tt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var _t=/%{(\w+)}/g,At=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Nt={};function kt(t,e){this.a=e===Mt?t:""}function Dt(t){return t instanceof kt&&t.constructor===kt?t.a:(P("expected object of type SafeUrl, got '"+t+"' of type "+l(t)),"type_error:SafeUrl")}kt.prototype.ta=!0,kt.prototype.sa=function(){return this.a.toString()},kt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Ct=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Ot=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Rt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function xt(t){if(t instanceof kt)return t;if(t="object"==typeof t&&t.ta?t.sa():String(t),Rt.test(t))t=new kt(t,Mt);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Ot);t=e&&Ct.test(e[1])?new kt(t,Mt):null}return t}function Lt(t){return t instanceof kt?t:(t="object"==typeof t&&t.ta?t.sa():String(t),Rt.test(t)||(t="about:invalid#zClosurez"),new kt(t,Mt))}var Mt={},Ft=new kt("about:invalid#zClosurez",Mt);function Vt(t,e,n){this.a=n===Ut?t:""}Vt.prototype.ta=!0,Vt.prototype.sa=function(){return this.a.toString()},Vt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Ut={};function jt(t,e,n,r){return t=t instanceof kt?t:Lt(t),e=e||s,n=n instanceof gt?mt(n):n||"",e.open(Dt(t),n,r,void 0)}function qt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Bt(t){return it.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(J,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(Z,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(tt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(et,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(nt,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(rt,"&#0;"))),t}function Kt(t){return Kt[" "](t),t}Kt[" "]=h;var Gt,Ht,zt=ct("Opera"),Wt=ct("Trident")||ct("MSIE"),Qt=ct("Edge"),Xt=Qt||Wt,$t=ct("Gecko")&&!(ot($.toLowerCase(),"webkit")&&!ct("Edge"))&&!(ct("Trident")||ct("MSIE"))&&!ct("Edge"),Yt=ot($.toLowerCase(),"webkit")&&!ct("Edge");function Jt(){var t=s.document;return t?t.documentMode:void 0}t:{var Zt="",te=(Ht=$,$t?/rv:([^\);]+)(\)|;)/.exec(Ht):Qt?/Edge\/([\d\.]+)/.exec(Ht):Wt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Ht):Yt?/WebKit\/(\S+)/.exec(Ht):zt?/(?:Version)[ \/]?(\S+)/.exec(Ht):void 0);if(te&&(Zt=te?te[1]:""),Wt){var ee=Jt();if(null!=ee&&ee>parseFloat(Zt)){Gt=String(ee);break t}}Gt=Zt}var ne,re={};function ie(t){return function(t,e){var n=re;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(){for(var e=0,n=Y(String(Gt)).split("."),r=Y(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=st(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||st(0==s[2].length,0==a[2].length)||st(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}if(s.document&&Wt){var oe=Jt();ne=oe||(parseInt(Gt,10)||void 0)}else ne=void 0;var se=ne;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Ht){}var ae=!Wt||9<=Number(se);function ue(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ce(t,e){ht(e,function(e,n){e&&"object"==typeof e&&e.ta&&(e=e.sa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:fe.hasOwnProperty(n)?t.setAttribute(fe[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e})}var he,le,fe={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function pe(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!ae&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',Bt(s.name),'"'),s.type){o.push(' type="',Bt(s.type),'"');var a={};dt(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=de(i,o),s&&("string"==typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):ce(o,s)),2<r.length&&function(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!f(o)||d(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(d(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(p(o)){s="function"==typeof o.item;break t}}s=!1}q(s?X(o):o,r)}}}(i,o,r),o}function de(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ve(t){s.setTimeout(function(){throw t},0)}function ge(t,e){le||function(){if(s.Promise&&s.Promise.resolve){var t=s.Promise.resolve(void 0);le=function(){t.then(be)}}else le=function(){var t=be;!p(s.setImmediate)||s.Window&&s.Window.prototype&&!ct("Edge")&&s.Window.prototype.setImmediate==s.setImmediate?(he||(he=function(){var t=s.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ct("Presto")&&(t=function(){var t=de(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=b(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!ct("Trident")&&!ct("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Hb;n.Hb=null,t()}},function(t){r.next={Hb:t},r=r.next,e.port2.postMessage(0)}}return function(t){s.setTimeout(t,0)}}()),he(t)):s.setImmediate(t)}}(),me||(le(),me=!0),ye.add(t,e)}var me=!1,ye=new M;function be(){for(var t;t=V();){try{t.a.call(t.b)}catch(t){ve(t)}L(F,t)}me=!1}function we(t,e){if(this.a=Ie,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=h)try{var n=this;t.call(e,function(t){Pe(n,Te,t)},function(t){if(!(t instanceof je))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Pe(n,Ee,t)})}catch(t){Pe(this,Ee,t)}}var Ie=0,Te=2,Ee=3;function Se(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Se.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var _e=new x(function(){return new Se},function(t){t.reset()});function Ae(t,e,n){var r=_e.get();return r.g=t,r.b=e,r.f=n,r}function Ne(t){if(t instanceof we)return t;var e=new we(h);return Pe(e,Te,t),e}function ke(t){return new we(function(e,n){n(t)})}function De(t,e,n){xe(t,e,n,null)||ge(w(e,t))}function Ce(t){return new we(function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Qb:!0,value:o}:{Qb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)De(t[o],w(i,o,!0),w(i,o,!1));else e(r)})}function Oe(t,e){t.b||t.a!=Te&&t.a!=Ee||Le(t),t.f?t.f.next=e:t.b=e,t.f=e}function Re(t,e,n,r){var i=Ae(null,null,null);return i.a=new we(function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof je?o(e):t(i)}catch(t){o(t)}}:o}),i.a.c=t,Oe(t,i),i.a}function Pe(t,e,n){t.a==Ie&&(t===n&&(e=Ee,n=new TypeError("Promise cannot resolve to itself")),t.a=1,xe(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Le(t),e!=Ee||n instanceof je||function(t,e){t.g=!0,ge(function(){t.g&&Ue.call(null,e)})}(t,n)))}function xe(t,e,n,r){if(t instanceof we)return Oe(t,Ae(e||h,n||null,r)),!0;if(C(t))return t.then(e,n,r),!0;if(d(t))try{var i=t.then;if(p(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,function(t){s||(s=!0,n.call(i,t))},o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function Le(t){t.h||(t.h=!0,ge(t.gc,t))}function Me(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Fe(t,e,n,r){if(n==Ee&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Ve(e,n,r);else try{e.c?e.g.call(e.f):Ve(e,n,r)}catch(t){Ue.call(null,t)}L(_e,e)}function Ve(t,e,n){e==Te?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}we.prototype.then=function(t,e,n){return Re(this,p(t)?t:null,p(e)?e:null,n)},we.prototype.$goog_Thenable=!0,(t=we.prototype).oa=function(t,e){return(t=Ae(t,t,e)).c=!0,Oe(this,t),this},t.o=function(t,e){return Re(this,null,t,e)},t.cancel=function(t){if(this.a==Ie){var e=new je(t);ge(function(){!function t(e,n){if(e.a==Ie)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,s=null,a=r.b;a&&(a.c||(i++,a.a==e&&(o=a),!(o&&1<i)));a=a.next)o||(s=a);o&&(r.a==Ie&&1==i?t(r,n):(s?((i=s).next==r.f&&(r.f=i),i.next=i.next.next):Me(r),Fe(r,o,Ee,n)))}e.c=null}else Pe(e,Ee,n)}(this,e)},this)}},t.$c=function(t){this.a=Ie,Pe(this,Te,t)},t.ad=function(t){this.a=Ie,Pe(this,Ee,t)},t.gc=function(){for(var t;t=Me(this);)Fe(this,t,this.a,this.i);this.h=!1};var Ue=ve;function je(t){O.call(this,t)}function qe(){this.ya=this.ya,this.pa=this.pa}I(je,O),je.prototype.name="cancel";var Be=0;function Ke(t){if(!t.ya&&(t.ya=!0,t.Da(),0!=Be))(function(t){Object.prototype.hasOwnProperty.call(t,v)&&t[v]||(t[v]=++g)})(t)}qe.prototype.ya=!1,qe.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Ge=Object.freeze||function(t){return t},He=!Wt||9<=Number(se),ze=Wt&&!ie("9"),We=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{s.addEventListener("test",h,e),s.removeEventListener("test",h,e)}catch(t){}return t}();function Qe(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Xe(t,e){if(Qe.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if($t){t:{try{Kt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:$e[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Qe.prototype.preventDefault=function(){this.defaultPrevented=!0},I(Xe,Qe);var $e=Ge({2:"touch",3:"pen",4:"mouse"});Xe.prototype.preventDefault=function(){Xe.bb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,ze)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},Xe.prototype.g=function(){return this.a};var Ye="closure_listenable_"+(1e6*Math.random()|0),Je=0;function Ze(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Wa=i,this.key=++Je,this.wa=this.Qa=!1}function tn(t){t.wa=!0,t.listener=null,t.proxy=null,t.src=null,t.Wa=null}function en(t){this.src=t,this.a={},this.b=0}function nn(t,e){var n=e.type;n in t.a&&z(t.a[n],e)&&(tn(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function rn(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.wa&&o.listener==e&&o.capture==!!n&&o.Wa==r)return i}return-1}en.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=rn(t,e,r,i);return-1<s?(e=t[s],n||(e.Qa=!1)):((e=new Ze(e,this.src,o,!!r,i)).Qa=n,t.push(e)),e};var on="closure_lm_"+(1e6*Math.random()|0),sn={};function an(t,e,n,r,i){if(r&&r.once)cn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)an(t,e[o],n,r,i);else n=yn(n),t&&t[Ye]?wn(t,e,n,d(r)?!!r.capture:!!r,i):un(t,e,n,!1,r,i)}function un(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=d(i)?!!i.capture:!!i,a=gn(t);if(a||(t[on]=a=new en(t)),!(n=a.add(e,n,r,s,o)).proxy)if(r=function(){var t=vn,e=He?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)We||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(fn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function cn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)cn(t,e[o],n,r,i);else n=yn(n),t&&t[Ye]?In(t,e,n,d(r)?!!r.capture:!!r,i):un(t,e,n,!0,r,i)}function hn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)hn(t,e[o],n,r,i);else r=d(r)?!!r.capture:!!r,n=yn(n),t&&t[Ye]?(t=t.v,(e=String(e).toString())in t.a&&(-1<(n=rn(o=t.a[e],n,r,i))&&(tn(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=gn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=rn(e,n,r,i)),(n=-1<t?e[t]:null)&&ln(n))}function ln(t){if("number"!=typeof t&&t&&!t.wa){var e=t.src;if(e&&e[Ye])nn(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(fn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=gn(e))?(nn(n,t),0==n.b&&(n.src=null,e[on]=null)):tn(t)}}}function fn(t){return t in sn?sn[t]:sn[t]="on"+t}function pn(t,e,n,r){var i=!0;if((t=gn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.wa&&(o=dn(o,r),i=i&&!1!==o)}return i}function dn(t,e){var n=t.listener,r=t.Wa||t.src;return t.Qa&&ln(t),n.call(r,e)}function vn(t,e){if(t.wa)return!0;if(!He){if(!e)t:{e=["window","event"];for(var n=s,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Xe(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=pn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=pn(r[i],t,!1,e),n=n&&o}return n}return dn(t,new Xe(e,this))}function gn(t){return(t=t[on])instanceof en?t:null}var mn="__closure_events_fn_"+(1e9*Math.random()>>>0);function yn(t){return p(t)?t:(t[mn]||(t[mn]=function(e){return t.handleEvent(e)}),t[mn])}function bn(){qe.call(this),this.v=new en(this),this.bc=this,this.hb=null}function wn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function In(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function Tn(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.wa&&s.capture==n){var a=s.listener,u=s.Wa||s.src;s.Qa&&nn(t.v,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function En(t,e,n){if(p(t))n&&(t=b(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=b(t.handleEvent,t)}return 2147483647<Number(e)?-1:s.setTimeout(t,e||0)}function Sn(t){var e=null;return new we(function(n,r){-1==(e=En(function(){n(void 0)},t))&&r(Error("Failed to schedule timer."))}).o(function(t){throw s.clearTimeout(e),t})}function _n(t){if(t.X&&"function"==typeof t.X)return t.X();if("string"==typeof t)return t.split("");if(f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function An(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.X||"function"!=typeof t.X){if(f(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function Nn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Nn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function kn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Dn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Dn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Dn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}I(bn,qe),bn.prototype[Ye]=!0,bn.prototype.addEventListener=function(t,e,n,r){an(this,t,e,n,r)},bn.prototype.removeEventListener=function(t,e,n,r){hn(this,t,e,n,r)},bn.prototype.dispatchEvent=function(t){var e,n=this.hb;if(n)for(e=[];n;n=n.hb)e.push(n);n=this.bc;var r=t.type||t;if("string"==typeof t)t=new Qe(t,n);else if(t instanceof Qe)t.target=t.target||n;else{var i=t;dt(t=new Qe(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=Tn(s,r,!0,t)&&i}if(i=Tn(s=t.b=n,r,!0,t)&&i,i=Tn(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Tn(s=t.b=e[o],r,!1,t)&&i;return i},bn.prototype.Da=function(){if(bn.bb.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)tn(n[r]);delete e.a[t],e.b--}}this.hb=null},(t=Nn.prototype).X=function(){kn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return kn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Dn(this.b,t)?this.b[t]:e},t.set=function(t,e){Dn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Cn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function On(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof On?(this.i=void 0!==e?e:t.i,Rn(this,t.c),this.l=t.l,this.a=t.a,Pn(this,t.g),this.f=t.f,xn(this,Zn(t.b)),this.h=t.h):t&&(n=String(t).match(Cn))?(this.i=!!e,Rn(this,n[1]||"",!0),this.l=Un(n[2]||""),this.a=Un(n[3]||"",!0),Pn(this,n[4]),this.f=Un(n[5]||"",!0),xn(this,n[6]||"",!0),this.h=Un(n[7]||"")):(this.i=!!e,this.b=new Wn(null,this.i))}function Rn(t,e,n){t.c=n?Un(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Pn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function xn(t,e,n){e instanceof Wn?(t.b=e,function(t,e){e&&!t.f&&(Qn(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&($n(this,e),Jn(this,n,t))},t)),t.f=e}(t.b,t.i)):(n||(e=jn(e,Hn)),t.b=new Wn(e,t.i))}function Ln(t,e,n){t.b.set(e,n)}function Mn(t,e){return t.b.get(e)}function Fn(t){return t instanceof On?new On(t):new On(t,void 0)}function Vn(t,e,n,r){var i=new On(null,void 0);return t&&Rn(i,t),e&&(i.a=e),n&&Pn(i,n),r&&(i.f=r),i}function Un(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function jn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,qn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function qn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}On.prototype.toString=function(){var t=[],e=this.c;e&&t.push(jn(e,Bn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(jn(e,Bn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(jn(n,"/"==n.charAt(0)?Gn:Kn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",jn(n,zn)),t.join("")},On.prototype.resolve=function(t){var e=new On(this),n=!!t.c;n?Rn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)Pn(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ot(i,"./")||ot(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?xn(e,Zn(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Bn=/[#\/\?@]/g,Kn=/[#\?:]/g,Gn=/[#\?]/g,Hn=/[#\?@]/g,zn=/#/g;function Wn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Qn(t){t.a||(t.a=new Nn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Xn(t){var e=An(t);if(void 0===e)throw Error("Keys are undefined");var n=new Wn(null,void 0);t=_n(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Jn(n,i,o):n.add(i,o)}return n}function $n(t,e){Qn(t),e=tr(t,e),Dn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Dn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&kn(t)))}function Yn(t,e){return Qn(t),e=tr(t,e),Dn(t.a.b,e)}function Jn(t,e,n){$n(t,e),0<n.length&&(t.c=null,t.a.set(tr(t,e),X(n)),t.b+=n.length)}function Zn(t){var e=new Wn;return e.c=t.c,t.a&&(e.a=new Nn(t.a),e.b=t.b),e}function tr(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function er(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var i=n;n=i.length,r.push("[");for(var o="",s=0;s<n;s++)r.push(o),t(e,i[s],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&("function"!=typeof(s=n[i])&&(r.push(o),or(i,r),r.push(":"),t(e,s,r),o=","));return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":or(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new nr,t,e),e.join("")}function nr(){}(t=Wn.prototype).add=function(t,e){Qn(this),this.c=null,t=tr(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Qn(this),this.a.forEach(function(n,r){q(n,function(n){t.call(e,n,r,this)},this)},this)},t.Y=function(){Qn(this);for(var t=this.a.X(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.X=function(t){Qn(this);var e=[];if("string"==typeof t)Yn(this,t)&&(e=Q(e,this.a.get(tr(this,t))));else{t=this.a.X();for(var n=0;n<t.length;n++)e=Q(e,t[n])}return e},t.set=function(t,e){return Qn(this),this.c=null,Yn(this,t=tr(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.X(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.X(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var rr={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},ir=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function or(t,e){e.push('"',t.replace(ir,function(t){var e=rr[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),rr[t]=e),e}),'"')}function sr(){var t=_r();return Wt&&!!se&&11==se||/Edge\/\d+/.test(t)}function ar(){return s.window&&s.window.location.href||self&&self.location&&self.location.href||""}function ur(t,e){e=e||s.window;var n="about:blank";t&&(n=Dt(xt(t)||Ft)),e.location.href=n}function cr(t){return!!((t=(t||_r()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function hr(t){t=t||s.window;try{t.close()}catch(t){}}function lr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=_r().toLowerCase(),r&&(e.target=r,ot(n,"crios/")&&(e.target="_blank")),Tr(_r())==wr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof kt?n:xt(void 0!==n.href?n.href:String(n))||Ft,n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((ct("iPhone")&&!ct("iPod")&&!ct("iPad")||ct("iPad")||ct("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(vt(s=de(document,"A"),"HTMLAnchorElement"),e=e instanceof kt?e:Lt(e),s.href=Dt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=jt("",r,n,s),t=Dt(e),s&&(Xt&&ot(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Bt(t)+'">',t=new Vt(t=(r=It())?r.createHTML(t):t,null,Ut),r=s.document)&&(r.write(function(t){return t instanceof Vt&&t.constructor===Vt?t.a:(P("expected object of type SafeHtml, got '"+t+"' of type "+l(t)),"type_error:SafeHtml")}(t)),r.close())):(s=jt(e,r,n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(t){}return s}var fr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pr=/^[^@]+@[^@]+$/;function dr(){var t=null;return new we(function(e){"complete"==s.document.readyState?e():(t=function(){e()},cn(window,"load",t))}).o(function(e){throw hn(window,"load",t),e})}function vr(t){return t=t||_r(),!("file:"!==Cr()&&"ionic:"!==Cr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function gr(){var t=s.window;try{return!(!t||t==t.top)}catch(t){return!1}}function mr(){return void 0!==s.WorkerGlobalScope&&"function"==typeof s.importScripts}function yr(){return Pt.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Pt.INTERNAL.hasOwnProperty("node")?"Node":mr()?"Worker":"Browser"}function br(){var t=yr();return"ReactNative"===t||"Node"===t}var wr="Firefox",Ir="Chrome";function Tr(t){var e=t.toLowerCase();return ot(e,"opera/")||ot(e,"opr/")||ot(e,"opios/")?"Opera":ot(e,"iemobile")?"IEMobile":ot(e,"msie")||ot(e,"trident/")?"IE":ot(e,"edge/")?"Edge":ot(e,"firefox/")?wr:ot(e,"silk/")?"Silk":ot(e,"blackberry")?"Blackberry":ot(e,"webos")?"Webos":!ot(e,"safari/")||ot(e,"chrome/")||ot(e,"crios/")||ot(e,"android")?!ot(e,"chrome/")&&!ot(e,"crios/")||ot(e,"edge/")?ot(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Ir:"Safari"}var Er={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Sr(t,e){e=e||[];var n,r=[],i={};for(n in Er)i[Er[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=yr())?r=Tr(i=_r()):"Worker"===r&&(r=Tr(i=_r())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function _r(){return s.navigator&&s.navigator.userAgent||""}function Ar(t,e){t=t.split("."),e=e||s;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Nr(){try{var t=s.localStorage,e=Lr();if(t)return t.setItem(e,"1"),t.removeItem(e),!sr()||!!s.indexedDB}catch(t){return mr()&&!!s.indexedDB}return!1}function kr(){return(Dr()||"chrome-extension:"===Cr()||vr())&&!br()&&Nr()&&!mr()}function Dr(){return"http:"===Cr()||"https:"===Cr()}function Cr(){return s.location&&s.location.protocol||null}function Or(t){return!cr(t=t||_r())&&Tr(t)!=wr}function Rr(t){return void 0===t?null:er(t)}function Pr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function xr(t){if(null!==t)return JSON.parse(t)}function Lr(t){return t||Math.floor(1e9*Math.random()).toString()}function Mr(t){return"Safari"!=Tr(t=t||_r())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Fr(){var t=s.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Vr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=_r(),e=yr(),this.b=cr(t)||"ReactNative"===e}function Ur(){var t=s.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function jr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function qr(){return!(!Ar("fireauth.oauthhelper",s)&&!Ar("fireauth.iframe",s))}Vr.prototype.get=function(){var t=s.navigator;return!t||"boolean"!=typeof t.onLine||!Dr()&&"chrome-extension:"!==Cr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Br,Kr={};function Gr(t){Kr[t]||(Kr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Hr={};Object.defineProperty(Hr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Hr,"abcd",{configurable:!0,enumerable:!0,value:2}),Br=2==Hr.abcd}catch(Ht){Br=!1}function zr(t,e,n){Br?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Wr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&zr(t,n,e[n])}function Qr(t){var e={};return Wr(e,t),e}function Xr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)zr(e,n,Xr(t[n]));return e}function $r(t){var e=t&&(t[ei]?"phone":null);if(!(e&&t&&t[ti]))throw new E("internal-error","Internal assert: invalid MultiFactorInfo object");zr(this,"uid",t[ti]),zr(this,"displayName",t[Jr]||null);var n=null;t[Zr]&&(n=new Date(t[Zr]).toUTCString()),zr(this,"enrollmentTime",n),zr(this,"factorId",e)}function Yr(t){try{var e=new ni(t)}catch(t){e=null}return e}$r.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var Jr="displayName",Zr="enrolledAt",ti="mfaEnrollmentId",ei="phoneInfo";function ni(t){$r.call(this,t),zr(this,"phoneNumber",t[ei])}function ri(t){var e={},n=t[ai],r=t[ci],i=t[hi];if(t=Yr(t[ui]),!i||i!=oi&&i!=si&&!n||i==si&&!r||i==ii&&!t)throw Error("Invalid checkActionCode response!");i==si?(e[fi]=n||null,e[di]=n||null,e[li]=r):(e[fi]=r||null,e[di]=r||null,e[li]=n||null),e[pi]=t||null,zr(this,gi,i),zr(this,vi,Xr(e))}I(ni,$r),ni.prototype.w=function(){var t=ni.bb.w.call(this);return t.phoneNumber=this.phoneNumber,t};var ii="REVERT_SECOND_FACTOR_ADDITION",oi="EMAIL_SIGNIN",si="VERIFY_AND_CHANGE_EMAIL",ai="email",ui="mfaInfo",ci="newEmail",hi="requestType",li="email",fi="fromEmail",pi="multiFactorInfo",di="previousEmail",vi="data",gi="operation";function mi(t){var e=Mn(t=Fn(t),yi)||null,n=Mn(t,bi)||null,r=Mn(t,Ti)||null;if(r=r&&Si[r]||null,!e||!n||!r)throw new E("argument-error",yi+", "+bi+"and "+Ti+" are required in a valid action code URL.");Wr(this,{apiKey:e,operation:r,code:n,continueUrl:Mn(t,wi)||null,languageCode:Mn(t,Ii)||null,tenantId:Mn(t,Ei)||null})}var yi="apiKey",bi="oobCode",wi="continueUrl",Ii="languageCode",Ti="mode",Ei="tenantId",Si={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:ii,signIn:oi,verifyAndChangeEmail:si,verifyEmail:"VERIFY_EMAIL"};function _i(t){try{return new mi(t)}catch(t){return null}}function Ai(t){var e=t[Oi];if(void 0===e)throw new E("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new E("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Ni];if(n&&"object"==typeof n){e=n[xi];var r=n[Ri];if(n=n[Pi],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new E("argument-error",Ri+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new E("argument-error",Pi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new E("argument-error",xi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new E("missing-android-pkg-name")}}else if(void 0!==n)throw new E("argument-error",Ni+" property must be a non null object when specified.");if(this.f=null,(e=t[Ci])&&"object"==typeof e){if("string"==typeof(e=e[Li])&&e.length)this.f=e;else if(void 0!==e)throw new E("argument-error",Li+" property must be a non empty string when specified.")}else if(void 0!==e)throw new E("argument-error",Ci+" property must be a non null object when specified.");if(void 0!==(e=t[Di])&&"boolean"!=typeof e)throw new E("argument-error",Di+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[ki])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new E("argument-error",ki+" property must be a non empty string when specified.");this.i=t||null}var Ni="android",ki="dynamicLinkDomain",Di="handleCodeInApp",Ci="iOS",Oi="url",Ri="installApp",Pi="minimumVersion",xi="packageName",Li="bundleId";function Mi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Fi=null;function Vi(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Fi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Fi){Fi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Fi[o]&&(Fi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,function(t){e.push(t)}),e}function Ui(t){var e=qi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function ji(t){try{return new Ui(t)}catch(t){return null}}function qi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=Vi(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var s=r[e++],a=((7&i)<<18|(63&o)<<12|(63&s)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(a>>10)),t[n++]=String.fromCharCode(56320+(1023&a))}else o=r[e++],s=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}return JSON.parse(t.join(""))}catch(t){}return null}Ui.prototype.T=function(){return this.f},Ui.prototype.l=function(){return this.c},Ui.prototype.toString=function(){return this.h};var Bi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Ki=["client_id","response_type","scope","redirect_uri","state"],Gi={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:Ki},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:Ki},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:Ki},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:Bi},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function Hi(t){for(var e in Gi)if(Gi[e].fa==t)return Gi[e];return null}function zi(t){var e={};e["facebook.com"]=Yi,e["google.com"]=Zi,e["github.com"]=Ji,e["twitter.com"]=to;var n=t&&t[Qi];try{if(n)return e[n]?new e[n](t):new $i(t);if(void 0!==t[Wi])return new Xi(t)}catch(t){}return null}var Wi="idToken",Qi="providerId";function Xi(t){var e=t[Qi];if(!e&&t[Wi]){var n=ji(t[Wi]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),zr(this,"providerId",e),zr(this,"isNewUser",n)}function $i(t){Xi.call(this,t),zr(this,"profile",Xr((t=xr(t.rawUserInfo||"{}"))||{}))}function Yi(t){if($i.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Ji(t){if($i.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");zr(this,"username",this.profile&&this.profile.login||null)}function Zi(t){if($i.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function to(t){if($i.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");zr(this,"username",t.screenName||null)}function eo(t){var e=Fn(t),n=Mn(e,"link"),r=Mn(Fn(n),"link");return e=Mn(e,"deep_link_id"),Mn(Fn(e),"link")||e||r||n||t}function no(t,e){if(!t&&!e)throw new E("internal-error","Internal assert: no raw session string available");if(t&&e)throw new E("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?ro:io}I($i,Xi),I(Yi,$i),I(Ji,$i),I(Zi,$i),I(to,$i);var ro="enroll",io="signin";function oo(){}function so(t,e){return t.then(function(t){if(t[Qs]){var n=ji(t[Qs]);if(!n||e!=n.i)throw new E("user-mismatch");return t}throw new E("user-mismatch")}).o(function(t){throw t&&t.code&&t.code==A+"user-not-found"?new E("user-mismatch"):t})}function ao(t,e){if(!e)throw new E("internal-error","failed to construct a credential");this.a=e,zr(this,"providerId",t),zr(this,"signInMethod",t)}function uo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function co(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new ao(t.providerId,t.pendingToken)}catch(t){}return null}function ho(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&zr(this,"idToken",e.idToken),e.accessToken&&zr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&zr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new E("internal-error","failed to construct a credential");zr(this,"accessToken",e.oauthToken),zr(this,"secret",e.oauthTokenSecret)}zr(this,"providerId",t),zr(this,"signInMethod",n)}function lo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Xn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function fo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new ho(t.providerId,e,t.signInMethod)}catch(t){}}return null}function po(t,e){this.Qc=e||[],Wr(this,{providerId:t,isOAuthProvider:!0}),this.Jb={},this.qb=(Hi(t)||{}).Ja||null,this.pb=null}function vo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new E("argument-error",'SAML provider IDs must be prefixed with "saml."');po.call(this,t,[])}function go(t){po.call(this,t,Ki),this.a=[]}function mo(){go.call(this,"facebook.com")}function yo(t){if(!t)throw new E("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return d(t)&&(e=t.accessToken),(new mo).credential({accessToken:e})}function bo(){go.call(this,"github.com")}function wo(t){if(!t)throw new E("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return d(t)&&(e=t.accessToken),(new bo).credential({accessToken:e})}function Io(){go.call(this,"google.com"),this.Ca("profile")}function To(t,e){var n=t;return d(t)&&(n=t.idToken,e=t.accessToken),(new Io).credential({idToken:n,accessToken:e})}function Eo(){po.call(this,"twitter.com",Bi)}function So(t,e){var n=t;if(d(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new E("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new ho("twitter.com",n,"twitter.com")}function _o(t,e,n){this.a=t,this.f=e,zr(this,"providerId","password"),zr(this,"signInMethod",n===No.EMAIL_LINK_SIGN_IN_METHOD?No.EMAIL_LINK_SIGN_IN_METHOD:No.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Ao(t){return t&&t.email&&t.password?new _o(t.email,t.password,t.signInMethod):null}function No(){Wr(this,{providerId:"password",isOAuthProvider:!1})}function ko(t,e){if(!(e=Do(e)))throw new E("argument-error","Invalid email link!");return new _o(t,e.code,No.EMAIL_LINK_SIGN_IN_METHOD)}function Do(t){return(t=_i(t=eo(t)))&&t.operation===oi?t:null}function Co(t){if(!(t.fb&&t.eb||t.La&&t.ea))throw new E("internal-error");this.a=t,zr(this,"providerId","phone"),this.fa="phone",zr(this,"signInMethod","phone")}function Oo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return q(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(n){t[n]&&(e[n]=t[n])}),new Co(e)}return null}function Ro(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.fb,code:t.a.eb}}function Po(t){try{this.a=t||Pt.auth()}catch(t){throw new E("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Wr(this,{providerId:"phone",isOAuthProvider:!1})}function xo(t,e){if(!t)throw new E("missing-verification-id");if(!e)throw new E("missing-verification-code");return new Co({fb:t,eb:e})}function Lo(t){if(t.temporaryProof&&t.phoneNumber)return new Co({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return To(o,n);case"facebook.com":return yo(n);case"github.com":return wo(n);case"twitter.com":return So(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new ao(e,s):new ho(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new go(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function Mo(t){if(!t.isOAuthProvider)throw new E("invalid-oauth-provider")}function Fo(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new E("invalid-auth-event");if(this.g&&this.a)throw new E("invalid-auth-event");if(this.g&&!this.f)throw new E("invalid-auth-event")}function Vo(t){return(t=t||{}).type?new Fo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&S(t.error),t.postBody,t.tenantId):null}function Uo(){this.b=null,this.a=[]}no.prototype.Ha=function(){return this.a?Ne(this.a):Ne(this.b)},no.prototype.w=function(){return this.type==ro?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},oo.prototype.ka=function(){},oo.prototype.b=function(){},oo.prototype.c=function(){},oo.prototype.w=function(){},ao.prototype.ka=function(t){return ga(t,uo(this))},ao.prototype.b=function(t,e){var n=uo(this);return n.idToken=e,ma(t,n)},ao.prototype.c=function(t,e){return so(ya(t,uo(this)),e)},ao.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},ho.prototype.ka=function(t){return ga(t,lo(this))},ho.prototype.b=function(t,e){var n=lo(this);return n.idToken=e,ma(t,n)},ho.prototype.c=function(t,e){return so(ya(t,lo(this)),e)},ho.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},po.prototype.Ka=function(t){return this.Jb=ft(t),this},I(vo,po),I(go,po),go.prototype.Ca=function(t){return H(this.a,t)||this.a.push(t),this},go.prototype.Rb=function(){return X(this.a)},go.prototype.credential=function(t,e){var n;if(!(n=d(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new E("argument-error","credential failed: must provide the ID token and/or the access token.");return new ho(this.providerId,n,this.providerId)},I(mo,go),zr(mo,"PROVIDER_ID","facebook.com"),zr(mo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),I(bo,go),zr(bo,"PROVIDER_ID","github.com"),zr(bo,"GITHUB_SIGN_IN_METHOD","github.com"),I(Io,go),zr(Io,"PROVIDER_ID","google.com"),zr(Io,"GOOGLE_SIGN_IN_METHOD","google.com"),I(Eo,po),zr(Eo,"PROVIDER_ID","twitter.com"),zr(Eo,"TWITTER_SIGN_IN_METHOD","twitter.com"),_o.prototype.ka=function(t){return this.signInMethod==No.EMAIL_LINK_SIGN_IN_METHOD?Za(t,Aa,{email:this.a,oobCode:this.f}):Za(t,Qa,{email:this.a,password:this.f})},_o.prototype.b=function(t,e){return this.signInMethod==No.EMAIL_LINK_SIGN_IN_METHOD?Za(t,Na,{idToken:e,email:this.a,oobCode:this.f}):Za(t,ja,{idToken:e,email:this.a,password:this.f})},_o.prototype.c=function(t,e){return so(this.ka(t),e)},_o.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Wr(No,{PROVIDER_ID:"password"}),Wr(No,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Wr(No,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Co.prototype.ka=function(t){return t.gb(Ro(this))},Co.prototype.b=function(t,e){var n=Ro(this);return n.idToken=e,Za(t,$a,n)},Co.prototype.c=function(t,e){var n=Ro(this);return n.operation="REAUTH",so(t=Za(t,Ya,n),e)},Co.prototype.w=function(){var t={providerId:"phone"};return this.a.fb&&(t.verificationId=this.a.fb),this.a.eb&&(t.verificationCode=this.a.eb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Po.prototype.gb=function(t,e){var n=this.a.a;return Ne(e.verify()).then(function(r){if("string"!=typeof r)throw new E("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=d(t)?t.session:null,o=d(t)?t.phoneNumber:t;return(i&&i.type==ro?i.Ha().then(function(t){return Za(n,Ba,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}}).then(function(t){return t.phoneSessionInfo.sessionInfo})}):i&&i.type==io?i.Ha().then(function(e){return function(t,e){return Za(t,Ka,e).then(function(t){return t.phoneResponseInfo.sessionInfo})}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})}):function(t,e){return Za(t,Va,e)}(n,{phoneNumber:o,recaptchaToken:r})).then(function(t){return"function"==typeof e.reset&&e.reset(),t},function(t){throw"function"==typeof e.reset&&e.reset(),t});default:throw new E("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},Wr(Po,{PROVIDER_ID:"phone"}),Wr(Po,{PHONE_SIGN_IN_METHOD:"phone"}),Fo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Fo.prototype.T=function(){return this.h},Fo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var jo,qo=null;function Bo(t){var e="unauthorized-domain",n=void 0,r=Fn(t);t=r.a,"chrome-extension"==(r=r.c)?n=qt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=qt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",E.call(this,e,n)}function Ko(t,e,n){E.call(this,t,n),(t=e||{}).Kb&&zr(this,"email",t.Kb),t.ea&&zr(this,"phoneNumber",t.ea),t.credential&&zr(this,"credential",t.credential),t.$b&&zr(this,"tenantId",t.$b)}function Go(t){if(t.code){var e=t.code||"";0==e.indexOf(A)&&(e=e.substring(A.length));var n={credential:Lo(t),$b:t.tenantId};if(t.email)n.Kb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new E(e,t.message||void 0);return new Ko(e,n,t.message)}return null}function Ho(){}function zo(t){return t.c||(t.c=t.b())}function Wo(){}function Qo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Xo(){}function $o(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=b(this.qc,this),this.a.onerror=b(this.Tb,this),this.a.onprogress=b(this.rc,this),this.a.ontimeout=b(this.vc,this)}function Yo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Jo(t,e,n){this.reset(t,e,n,void 0,void 0)}function Zo(t){this.f=t,this.b=this.c=this.a=null}function ts(t,e){this.name=t,this.value=e}I(Bo,E),I(Ko,E),Ko.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&dt(t,e),t},Ko.prototype.toJSON=function(){return this.w()},Ho.prototype.c=null,I(Wo,Ho),Wo.prototype.a=function(){var t=Qo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Wo.prototype.b=function(){var t={};return Qo(this)&&(t[0]=!0,t[1]=!0),t},jo=new Wo,I(Xo,Ho),Xo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new $o;throw Error("Unsupported browser")},Xo.prototype.b=function(){return{}},(t=$o.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Yo(this,4)},t.Tb=function(){this.status=500,this.response=this.responseText="",Yo(this,4)},t.vc=function(){this.Tb()},t.rc=function(){this.status=200,Yo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Jo.prototype.a=null,Jo.prototype.reset=function(t,e,n,r,i){delete this.a},ts.prototype.toString=function(){return this.name};var es=new ts("SEVERE",1e3),ns=new ts("WARNING",900),rs=new ts("CONFIG",700),is=new ts("FINE",500);Zo.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(P("Root logger has no level set."),null)}(this).value)for(p(e)&&(e=e()),t=new Jo(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var os={},ss=null;function as(t){var e;if(ss||(ss=new Zo(""),os[""]=ss,ss.c=rs),!(e=os[t])){e=new Zo(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=as(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,os[t]=e}return e}function us(t,e){t&&t.log(is,e,void 0)}function cs(t){this.f=t}function hs(t){bn.call(this),this.u=t,this.h=void 0,this.readyState=ls,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=as("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}I(cs,Ho),cs.prototype.a=function(){return new hs(this.f)},cs.prototype.b=function(t){return function(){return t}}({}),I(hs,bn);var ls=0;function fs(t){t.c.read().then(t.pc.bind(t)).catch(t.Va.bind(t))}function ps(t){t.readyState=4,t.g=null,t.c=null,t.m=null,ds(t)}function ds(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function vs(t){bn.call(this),this.headers=new Nn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=gs,this.u=this.S=!1}(t=hs.prototype).open=function(t,e){if(this.readyState!=ls)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,ds(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Va.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ps(this)),this.readyState=ls},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,ds(this)),this.a&&(this.readyState=3,ds(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):void 0!==s.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,fs(this)):t.text().then(this.tc.bind(this),this.Va.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?ps(this):ds(this),3==this.readyState&&fs(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,ps(this))},t.sc=function(t){this.a&&(this.response=t,ps(this))},t.Va=function(t){var e=this.i;e&&e.log(ns,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&ps(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(ns,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(ns,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(hs.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),I(vs,bn);var gs="";vs.prototype.b=as("goog.net.XhrIo");var ms=/^https?$/i,ys=["POST","PUT"];function bs(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():jo.a(),t.C=t.D?zo(t.D):zo(jo),t.a.onreadystatechange=b(t.Wb,t);try{us(t.b,ks(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(e){return us(t.b,ks(t,"Error opening Xhr: "+e.message)),void Is(t,e)}e=r||"";var o=new Nn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(f(t)||"string"==typeof t)q(t,e,void 0);else for(var n=An(t),r=_n(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,function(t,e){o.set(e,t)}),i=function(t){t:{for(var e=ws,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=s.FormData&&e instanceof s.FormData,!H(ys,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{_s(t),0<t.g&&(t.u=function(t){return Wt&&ie(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),us(t.b,ks(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=b(t.Ma,t)):t.s=En(t.Ma,t.g,t)),us(t.b,ks(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){us(t.b,ks(t,"Send error: "+e.message)),Is(t,e)}}function ws(t){return"content-type"==t.toLowerCase()}function Is(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Ts(t),Ss(t)}function Ts(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Es(t){if(t.c&&void 0!==o)if(t.C[1]&&4==As(t)&&2==Ns(t))us(t.b,ks(t,"Local request error detected and ignored"));else if(t.i&&4==As(t))En(t.Wb,0,t);else if(t.dispatchEvent("readystatechange"),4==As(t)){us(t.b,ks(t,"Request complete")),t.c=!1;try{var e,n=Ns(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var a=String(t.l).match(Cn)[1]||null;if(!a&&s.self&&s.self.location){var u=s.self.location.protocol;a=u.substr(0,u.length-1)}i=!ms.test(a?a.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<As(t)?t.a.statusText:""}catch(e){us(t.b,"Can not get status: "+e.message),c=""}t.h=c+" ["+Ns(t)+"]",Ts(t)}}finally{Ss(t)}}}function Ss(t,e){if(t.a){_s(t);var n=t.a,r=t.C[0]?h:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(es,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function _s(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(s.clearTimeout(t.s),t.s=null)}function As(t){return t.a?t.a.readyState:0}function Ns(t){try{return 2<As(t)?t.a.status:-1}catch(t){return-1}}function ks(t,e){return e+" ["+t.P+" "+t.l+" "+Ns(t)+"]"}function Ds(t){var e=js;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Cs(t,e,n){t.a=!0,t.c=n,t.f=!e,xs(t)}function Os(t){if(t.a){if(!t.v)throw new Ls(t);t.v=!1}}function Rs(t,e,n,r){t.g.push([e,n,r]),t.a&&xs(t)}function Ps(t){return G(t.g,function(t){return p(t[1])})}function xs(t){if(t.h&&t.a&&Ps(t)){var e=t.h,n=Vs[e];n&&(s.clearTimeout(n.a),delete Vs[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var u=o.call(i||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(C(e)||"function"==typeof s.Promise&&e instanceof s.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,Ps(t)||(n=!0)}}t.c=e,r&&(u=b(t.m,t,!0),r=b(t.m,t,!1),e instanceof Ds?(Rs(e,u,r),e.C=!0):e.then(u,r)),n&&(e=new Fs(e),Vs[e.a]=e,t.h=e.a)}function Ls(){O.call(this)}function Ms(){O.call(this)}function Fs(t){this.a=s.setTimeout(b(this.c,this),0),this.b=t}(t=vs.prototype).Ma=function(){void 0!==o&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",us(this.b,ks(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(us(this.b,ks(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ss(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Ss(this,!0)),vs.bb.Da.call(this)},t.Wb=function(){this.ya||(this.N||this.i||this.f?Es(this):this.Jc())},t.Jc=function(){Es(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case gs:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(es,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return us(this.b,"Can not get response: "+t.message),null}},Ds.prototype.cancel=function(t){if(this.a)this.c instanceof Ds&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new Ms(this),Os(this),Cs(this,!1,t))}},Ds.prototype.m=function(t,e){this.i=!1,Cs(this,t,e)},Ds.prototype.then=function(t,e,n){var r,i,o=new we(function(t,e){r=t,i=e});return Rs(this,r,function(t){t instanceof Ms?o.cancel():i(t)}),o.then(t,e,n)},Ds.prototype.$goog_Thenable=!0,I(Ls,O),Ls.prototype.message="Deferred has already fired",Ls.prototype.name="AlreadyCalledError",I(Ms,O),Ms.prototype.message="Deferred was canceled",Ms.prototype.name="CanceledError",Fs.prototype.c=function(){throw delete Vs[this.a],this.b};var Vs={};function Us(t){var e,n=document,r=Et(t).toString(),i=de(document,"SCRIPT"),o={Xb:i,Ma:void 0},a=new Ds(o);return e=window.setTimeout(function(){qs(i,!0);var t=new Gs(Ks,"Timeout reached for loading script "+r);Os(a),Cs(a,!1,t)},5e3),o.Ma=e,i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(qs(i,!1,e),Os(a),Cs(a,!0,null))},i.onerror=function(){qs(i,!0,e);var t=new Gs(Bs,"Error while loading script "+r);Os(a),Cs(a,!1,t)},dt(o={},{type:"text/javascript",charset:"UTF-8"}),ce(i,o),function(t,e){vt(t,"HTMLScriptElement"),t.src=Et(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=s?e=c(e.document):(null===u&&(u=c(s.document)),e=u),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function js(){if(this&&this.Xb){var t=this.Xb;t&&"SCRIPT"==t.tagName&&qs(t,!0,this.Ma)}}function qs(t,e,n){null!=n&&s.clearTimeout(n),t.onload=h,t.onerror=h,t.onreadystatechange=h,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var Bs=0,Ks=1;function Gs(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),O.call(this,n),this.code=t}function Hs(t){this.f=t}function zs(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Xs,this.g=ft(t.secureTokenHeaders||$s),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||Ys,this.a=ft(t.firebaseHeaders||Js),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==yr(),!(n=s.XMLHttpRequest||n&&Pt.INTERNAL.node&&Pt.INTERNAL.node.XMLHttpRequest)&&!mr())throw new E("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,mr()?this.f=new cs(self):br()?this.f=new Hs(n):this.f=new Xo,this.b=null}I(Gs,O),I(Hs,Ho),Hs.prototype.a=function(){return new this.f},Hs.prototype.b=function(){return{}};var Ws,Qs="idToken",Xs=new Vr(3e4,6e4),$s={"Content-Type":"application/x-www-form-urlencoded"},Ys=new Vr(3e4,6e4),Js={"Content-Type":"application/json"};function Zs(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function ta(t,e){e&&(t.l=ea("https://securetoken.googleapis.com/v1/token",e),t.h=ea("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=ea("https://identitytoolkit.googleapis.com/v2/",e))}function ea(t,e){return t=Fn(t),e=Fn(e.url),t.f=t.a+t.f,Rn(t,e.c),t.a=e.a,Pn(t,e.g),t.toString()}function na(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function ra(t,e,n,r,i,o,a){(function(){var t=_r();return!((t=Tr(t)!=Ir?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Wt&&se&&!(9<se))})()||mr()?t=b(t.u,t):(Ws||(Ws=new we(function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{s[oa]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))};var n=St(ia,{onload:oa});!function(t,e){Rs(t,null,e,void 0)}(Us(n),function(){e(Error("CORS_UNSUPPORTED"))})}}(t,e)})),t=b(t.s,t)),t(e,n,r,i,o,a)}zs.prototype.T=function(){return this.b},zs.prototype.u=function(t,e,n,r,i,o){if(mr()&&(void 0===s.fetch||void 0===s.Headers||void 0===s.Request))throw new E("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new vs(this.f);if(o){a.g=Math.max(0,o);var u=setTimeout(function(){a.dispatchEvent("timeout")},o)}wn(a,"complete",function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return us(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)}),In(a,"ready",function(){u&&clearTimeout(u),Ke(this)}),In(a,"timeout",function(){u&&clearTimeout(u),Ke(this),e&&e(null)}),bs(a,t,n,r,i)};var ia=new gt(wt,"https://apis.google.com/js/client.js?onload=%{onload}"),oa="__fcb"+Math.floor(1e6*Math.random()).toString();function sa(t,e,n,r,i,o,s){var a=Fn(e+n);Ln(a,"key",t.c),s&&Ln(a,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Ln(a,c,i[c]);return new we(function(e,n){ra(t,a.toString(),function(t){t?t.error?n(eu(t,o||{})):e(t):n(new E("network-request-failed"))},r,u?void 0:er(Pr(i)),t.a,t.v.get())})}function aa(t){if("string"!=typeof(t=t.email)||!pr.test(t))throw new E("invalid-email")}function ua(t){"email"in t&&aa(t)}function ca(t){if(!t[Qs]){if(t.mfaPendingCredential)throw new E("multi-factor-auth-required",null,ft(t));throw new E("internal-error")}}function ha(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new E("internal-error")}else{if(!t.sessionInfo)throw new E("missing-verification-id");if(!t.code)throw new E("missing-verification-code")}}zs.prototype.s=function(t,e,n,r,i){var o=this;Ws.then(function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})}).o(function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},zs.prototype.Ab=function(){return Za(this,qa,{})},zs.prototype.Cb=function(t,e){return Za(this,Ua,{idToken:t,email:e})},zs.prototype.Db=function(t,e){return Za(this,ja,{idToken:t,password:e})};var la={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function fa(t){if(!t.phoneVerificationInfo)throw new E("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new E("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new E("missing-verification-code")}function pa(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new E("internal-error")}function da(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(Yn(t=new Wn(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function va(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Go(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Go(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Go(t)):t.errorMessage&&(e=tu(t.errorMessage)),e)throw e;ca(t)}function ga(t,e){return e.returnIdpCredential=!0,Za(t,Ga,e)}function ma(t,e){return e.returnIdpCredential=!0,Za(t,za,e)}function ya(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Za(t,Ha,e)}function ba(t){if(!t.oobCode)throw new E("invalid-action-code")}(t=zs.prototype).Eb=function(t,e){var n={idToken:t},r=[];return ht(la,function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)}),r.length&&(n.deleteAttribute=r),Za(this,Ua,n)},t.wb=function(t,e){return dt(t={requestType:"PASSWORD_RESET",email:t},e),Za(this,xa,t)},t.xb=function(t,e){return dt(t={requestType:"EMAIL_SIGNIN",email:t},e),Za(this,Oa,t)},t.vb=function(t,e){return dt(t={requestType:"VERIFY_EMAIL",idToken:t},e),Za(this,Ra,t)},t.Fb=function(t,e,n){return dt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),Za(this,Pa,t)},t.gb=function(t){return Za(this,Xa,t)},t.ob=function(t,e){return Za(this,Fa,{oobCode:t,newPassword:e})},t.Sa=function(t){return Za(this,Ia,{oobCode:t})},t.kb=function(t){return Za(this,wa,{oobCode:t})};var wa={endpoint:"setAccountInfo",A:ba,Z:"email",B:!0},Ia={endpoint:"resetPassword",A:ba,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new E("internal-error")},B:!0},Ta={endpoint:"signupNewUser",A:function(t){if(aa(t),!t.password)throw new E("weak-password")},G:ca,V:!0,B:!0},Ea={endpoint:"createAuthUri",B:!0},Sa={endpoint:"deleteAccount",O:["idToken"]},_a={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new E("internal-error")}},Aa={endpoint:"emailLinkSignin",O:["email","oobCode"],A:aa,G:ca,V:!0,B:!0},Na={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:aa,G:ca,V:!0},ka={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:fa,G:ca,B:!0,Na:!0},Da={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:fa,G:ca,B:!0,Na:!0},Ca={endpoint:"getAccountInfo"},Oa={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new E("internal-error");aa(t)},Z:"email",B:!0},Ra={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new E("internal-error")},Z:"email",B:!0},Pa={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new E("internal-error")},Z:"email",B:!0},xa={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new E("internal-error");aa(t)},Z:"email",B:!0},La={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},Ma={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new E("internal-error")}},Fa={endpoint:"resetPassword",A:ba,Z:"email",B:!0},Va={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Ua={endpoint:"setAccountInfo",O:["idToken"],A:ua,V:!0},ja={endpoint:"setAccountInfo",O:["idToken"],A:function(t){if(ua(t),!t.password)throw new E("weak-password")},G:ca,V:!0},qa={endpoint:"signupNewUser",G:ca,V:!0,B:!0},Ba={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new E("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new E("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new E("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new E("internal-error")},B:!0,Na:!0},Ka={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new E("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new E("internal-error")},B:!0,Na:!0},Ga={endpoint:"verifyAssertion",A:pa,Za:da,G:va,V:!0,B:!0},Ha={endpoint:"verifyAssertion",A:pa,Za:da,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new E("user-not-found");if(t.errorMessage)throw tu(t.errorMessage);ca(t)},V:!0,B:!0},za={endpoint:"verifyAssertion",A:function(t){if(pa(t),!t.idToken)throw new E("internal-error")},Za:da,G:va,V:!0},Wa={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new E("invalid-custom-token")},G:ca,V:!0,B:!0},Qa={endpoint:"verifyPassword",A:function(t){if(aa(t),!t.password)throw new E("wrong-password")},G:ca,V:!0,B:!0},Xa={endpoint:"verifyPhoneNumber",A:ha,G:ca,B:!0},$a={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new E("internal-error");ha(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Go(t);ca(t)}},Ya={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ha,G:ca,B:!0},Ja={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Qs]^!!t.refreshToken)throw new E("internal-error")},B:!0,Na:!0};function Za(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.O))return ke(new E("internal-error"));var r,i=!!e.Na,o=e.Vb||"POST";return Ne(n).then(e.A).then(function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),sa(t,i?t.i:t.h,e.endpoint,o,n,e.Ib,e.mb||!1)}).then(function(t){return r=t,e.Za?e.Za(n,r):r}).then(e.G).then(function(){if(!e.Z)return r;if(!(e.Z in r))throw new E("internal-error");return r[e.Z]})}function tu(t){return eu({error:{errors:[{message:t}],code:400,message:t}})}function eu(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new E(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",dt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new E(r[i],e);return!e&&t&&(e=Rr(t)),new E("internal-error",e)}function nu(t){this.b=t,this.a=null,this.sb=function(t){return(su||(su=new we(function(t,e){function n(){Fr(),Ar("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Fr(),e(Error("Network Error"))},timeout:iu.get()})}if(Ar("gapi.iframes.Iframe"))t();else if(Ar("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();s[r]=function(){Ar("gapi.load")?n():e(Error("Network Error"))},Ne(Us(r=St(ru,{onload:r}))).o(function(){e(Error("Network Error"))})}}).o(function(t){throw su=null,t}))).then(function(){return new we(function(e,n){Ar("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Ar("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout(function(){n(Error("Network Error"))},ou.get());r.ping(i).then(i,function(){n(Error("Network Error"))})})})})}(this)}var ru=new gt(wt,"https://apis.google.com/js/api.js?onload=%{onload}"),iu=new Vr(3e4,6e4),ou=new Vr(5e3,15e3),su=null;function au(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,this.g?t=Vn((t=Fn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):t=Vn("https",this.l,null,"/__/auth/iframe"),this.a=t,Ln(this.a,"apiKey",this.h),Ln(this.a,"appName",this.i),this.b=null,this.c=[]}function uu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function cu(t){try{return Pt.app(t).auth().Ga()}catch(t){return[]}}function hu(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function lu(t){var e=ar();return function(t){return Za(t,La,{}).then(function(t){return t.authorizedDomains||[]})}(t).then(function(t){t:{var n=Fn(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=Fn(o).a==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:fr.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new Bo(ar())})}function fu(t){return t.m?t.m:(t.m=dr().then(function(){if(!t.u){var e=t.c,n=t.i,r=cu(t.b),i=new au(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=X(r||[]),t.u=i.toString()}t.v=new nu(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.sb.then(function(){t.a.register("authEvent",e,Ar("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(t.v,function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Vo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Ne(n)}return n.status="ERROR",Ne(n)})}(t)}),t.m)}function pu(t){return t.l||(t.C=t.c?Sr(t.c,cu(t.b)):null,t.l=new zs(t.g,D(t.i),t.C),t.f&&ta(t.l,t.f)),t.l}function du(t,e,n,r,i,o,s,a,u,c,h,l){return(t=new uu(t,e,n,r,i,l)).l=o,t.g=s,t.i=a,t.b=ft(u||null),t.f=c,t.zb(h).toString()}function vu(t){if(this.a=t||Pt.INTERNAL.reactNative&&Pt.INTERNAL.reactNative.AsyncStorage,!this.a)throw new E("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function gu(t){this.b=t,this.a={},this.f=b(this.c,this)}au.prototype.toString=function(){return this.f?Ln(this.a,"v",this.f):$n(this.a.b,"v"),this.b?Ln(this.a,"eid",this.b):$n(this.a.b,"eid"),this.c.length?Ln(this.a,"fw",this.c.join(",")):$n(this.a.b,"fw"),this.a.toString()},uu.prototype.zb=function(t){return this.h=t,this},uu.prototype.toString=function(){if(this.v){var t=Fn(this.v.url);t=Vn(t.c,t.a,t.g,"/emulator/auth/handler")}else t=Vn("https",this.u,null,"/__/auth/handler");if(Ln(t,"apiKey",this.s),Ln(t,"appName",this.c),Ln(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=Pt.app(this.c).auth().la()}catch(t){n=null}for(var r in e.pb=n,Ln(t,"providerId",this.a.providerId),e=Pr((n=this.a).Jb))e[r]=e[r].toString();r=n.Qc,e=ft(e);for(var i=0;i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.qb&&n.pb&&!e[n.qb]&&(e[n.qb]=n.pb),lt(e)||Ln(t,"customParameters",Rr(e))}if("function"==typeof this.a.Rb&&((n=this.a.Rb()).length&&Ln(t,"scopes",n.join(","))),this.l?Ln(t,"redirectUrl",this.l):$n(t.b,"redirectUrl"),this.g?Ln(t,"eventId",this.g):$n(t.b,"eventId"),this.i?Ln(t,"v",this.i):$n(t.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Mn(t,s)&&Ln(t,s,this.b[s]);return this.h?Ln(t,"tid",this.h):$n(t.b,"tid"),this.f?Ln(t,"eid",this.f):$n(t.b,"eid"),(s=cu(this.c)).length&&Ln(t,"fw",s.join(",")),t.toString()},(t=hu.prototype).Pb=function(t,e,n){var r=new E("popup-closed-by-user"),i=new E("web-storage-unsupported"),o=this,s=!1;return this.ma().then(function(){(function(t){var e={type:"webStorageSupport"};return fu(t).then(function(){return function(t,e){return t.sb.then(function(){return new we(function(n){t.a.send(e.type,e,n,Ar("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}(t.v,e)}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})})(o).then(function(n){n||(t&&hr(t),e(i),s=!0)})}).o(function(){}).then(function(){if(!s)return function(t){return new we(function(e){return function n(){Sn(2e3).then(function(){if(t&&!t.closed)return n();e()})}()})}(t)}).then(function(){if(!s)return Sn(n).then(function(){e(r)})})},t.Yb=function(){var t=_r();return!Or(t)&&!Mr(t)},t.Ub=function(){return!1},t.Nb=function(t,e,n,r,i,o,s,a){if(!t)return ke(new E("popup-blocked"));if(s&&!Or())return this.ma().o(function(e){hr(t),i(e)}),r(),Ne();this.a||(this.a=lu(pu(this)));var u=this;return this.a.then(function(){var e=u.ma().o(function(e){throw hr(t),i(e),e});return r(),e}).then(function(){(Mo(n),s)||ur(du(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,a,u.f),t)}).o(function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t})},t.Ob=function(t,e,n,r){this.a||(this.a=lu(pu(this)));var i=this;return this.a.then(function(){Mo(e),ur(du(i.s,i.g,i.b,t,e,ar(),n,i.c,void 0,i.i,r,i.f))}).o(function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t})},t.ma=function(){var t=this;return fu(this).then(function(){return t.v.sb}).o(function(){throw t.a=null,new E("network-request-failed")})},t.ac=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Ta=function(t){W(this.h,function(e){return e==t})},(t=vu.prototype).get=function(t){return Ne(this.a.getItem(t)).then(function(t){return t&&xr(t)})},t.set=function(t,e){return Ne(this.a.setItem(t,Rr(e)))},t.U=function(t){return Ne(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var mu,yu=[];function bu(t,e,n){lt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function wu(t){this.a=t}function Iu(t){this.c=t,this.b=!1,this.a=[]}function Tu(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return ke(Error("connection_unavailable"));var h=r?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new we(function(n,r){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),s=setTimeout(function(){r(Error("unsupported_event"))},h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout(function(){r(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}},t.a.push(c),l.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[l.port2])):r(Error("connection_unavailable"))}).then(function(e){return Eu(t,c),e}).o(function(e){throw Eu(t,c),e})}function Eu(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),W(t.a,function(t){return t==e})}}function Su(){if(!ku())throw new E("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=s.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;mr()&&self?(this.v=function(){var t=mr()?self:null;if(q(yu,function(n){n.b==t&&(e=n)}),!e){var e=new gu(t);yu.push(e)}return e}(),bu(this.v,"keyChanged",function(e,n){return Pu(t).then(function(e){return 0<e.length&&q(t.a,function(t){t(e)}),{keyProcessed:H(e,n.key)}})}),bu(this.v,"ping",function(){return Ne(["keyChanged"])})):function(){var t=s.navigator;return t&&t.serviceWorker?Ne().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).o(function(){return null}):Ne(null)}().then(function(e){(t.h=e)&&(t.g=new Iu(new wu(e)),Tu(t.g,"ping",null,!0).then(function(e){e[0].fulfilled&&H(e[0].value,"keyChanged")&&(t.s=!0)}).o(function(){}))})}function _u(t){return new we(function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new we(function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}})}(t).then(function(){return _u(t)}).then(function(t){e(t)}).o(function(t){n(t)})}})}function Au(t){return t.i||(t.i=_u(t)),t.i}function Nu(t,e){var n=0;return new we(function r(i,o){Au(t).then(e).then(i).o(function(e){if(!(3<++n))return Au(t).then(function(e){return e.close(),t.i=void 0,r(i,o)}).o(function(t){o(t)});o(e)})})}function ku(){try{return!!s.indexedDB}catch(t){return!1}}function Du(t){return t.objectStore("firebaseLocalStorage")}function Cu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Ou(t){return new we(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function Ru(t,e){return t.g&&t.h&&function(){var t=s.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Tu(t.g,"keyChanged",{key:e},t.s).then(function(){}).o(function(){}):Ne()}function Pu(t){return Au(t).then(function(t){var e=Du(Cu(t,!1));return e.getAll?Ou(e.getAll()):new we(function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}})}).then(function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=function t(e,n){var r,i=[];for(r in e)r in n?typeof e[r]!=typeof n[r]?i.push(r):"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(t.c,n),t.c=n}return r})}function xu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Lu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Ne().then(function(){if(ku()){var t=Lr(),r="__sak"+t;return mu||(mu=new Su),(n=mu).set(r,t).then(function(){return n.get(r)}).then(function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)}).then(function(){return n}).o(function(){return e.c})}return e.c}).then(function(t){return e.type=t.type,t.ca(function(t){q(e.a,function(e){e(t)})}),t})}function Mu(){this.a={},this.type="inMemory"}function Fu(){if(!function(){var t="Node"==yr();if(!(t=Vu()||t&&Pt.INTERNAL.node&&Pt.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==yr())throw new E("internal-error","The LocalStorage compatibility library was not found.");throw new E("web-storage-unsupported")}this.a=Vu()||Pt.INTERNAL.node.localStorage,this.type="localStorage"}function Vu(){try{var t=s.localStorage,e=Lr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Uu(){this.type="nullStorage"}function ju(){if(!function(){var t="Node"==yr();if(!(t=qu()||t&&Pt.INTERNAL.node&&Pt.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==yr())throw new E("internal-error","The SessionStorage compatibility library was not found.");throw new E("web-storage-unsupported")}this.a=qu()||Pt.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function qu(){try{var t=s.sessionStorage,e=Lr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Bu(){var t={};t.Browser=Hu,t.Node=zu,t.ReactNative=Wu,t.Worker=Qu,this.a=t[yr()]}gu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];q(r,function(e){i.push(Ne().then(function(){return e(t.origin,t.data.data)}))}),Ce(i).then(function(r){var i=[];q(r,function(t){i.push({fulfilled:t.Qb,value:t.value,reason:t.reason?t.reason.message:void 0})}),q(i,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})})}},wu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Iu.prototype.close=function(){for(;0<this.a.length;)Eu(this,this.a[0]);this.b=!0},(t=Su.prototype).set=function(t,e){var n=this,r=!1;return Nu(this,function(e){return Ou((e=Du(Cu(e,!0))).get(t))}).then(function(i){return Nu(n,function(o){if(o=Du(Cu(o,!0)),i)return i.value=e,Ou(o.put(i));n.b++,r=!0;var s={};return s.fbase_key=t,s.value=e,Ou(o.add(s))})}).then(function(){return n.c[t]=e,Ru(n,t)}).oa(function(){r&&n.b--})},t.get=function(t){return Nu(this,function(e){return Ou(Du(Cu(e,!1)).get(t))}).then(function(t){return t&&t.value})},t.U=function(t){var e=this,n=!1;return Nu(this,function(r){return n=!0,e.b++,Ou(Du(Cu(r,!0)).delete(t))}).then(function(){return delete e.c[t],Ru(e,t)}).oa(function(){n&&e.b--})},t.ca=function(t){0==this.a.length&&function(t){xu(t),function e(){t.f=setTimeout(function(){t.l=Pu(t).then(function(e){0<e.length&&q(t.a,function(t){t(e)})}).then(function(){e()}).o(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()}(this),this.a.push(t)},t.ia=function(t){W(this.a,function(e){return e==t}),0==this.a.length&&xu(this)},(t=Lu.prototype).get=function(t){return this.b.then(function(e){return e.get(t)})},t.set=function(t,e){return this.b.then(function(n){return n.set(t,e)})},t.U=function(t){return this.b.then(function(e){return e.U(t)})},t.ca=function(t){this.a.push(t)},t.ia=function(t){W(this.a,function(e){return e==t})},(t=Mu.prototype).get=function(t){return Ne(this.a[t])},t.set=function(t,e){return this.a[t]=e,Ne()},t.U=function(t){return delete this.a[t],Ne()},t.ca=function(){},t.ia=function(){},(t=Fu.prototype).get=function(t){var e=this;return Ne().then(function(){return xr(e.a.getItem(t))})},t.set=function(t,e){var n=this;return Ne().then(function(){var r=Rr(e);null===r?n.U(t):n.a.setItem(t,r)})},t.U=function(t){var e=this;return Ne().then(function(){e.a.removeItem(t)})},t.ca=function(t){s.window&&an(s.window,"storage",t)},t.ia=function(t){s.window&&hn(s.window,"storage",t)},(t=Uu.prototype).get=function(){return Ne(null)},t.set=function(){return Ne()},t.U=function(){return Ne()},t.ca=function(){},t.ia=function(){},(t=ju.prototype).get=function(t){var e=this;return Ne().then(function(){return xr(e.a.getItem(t))})},t.set=function(t,e){var n=this;return Ne().then(function(){var r=Rr(e);null===r?n.U(t):n.a.setItem(t,r)})},t.U=function(t){var e=this;return Ne().then(function(){e.a.removeItem(t)})},t.ca=function(){},t.ia=function(){};var Ku,Gu,Hu={F:Fu,cb:ju},zu={F:Fu,cb:ju},Wu={F:vu,cb:Uu},Qu={F:Fu,cb:Uu},Xu={rd:"local",NONE:"none",td:"session"};function $u(){var t=!(Mr(_r())||!gr()),e=Or(),n=Nr();this.m=t,this.h=e,this.l=n,this.a={},Ku||(Ku=new Bu),t=Ku;try{this.g=!sr()&&qr()||!s.indexedDB?new t.a.F:new Lu(mr()?new Mu:new t.a.F)}catch(t){this.g=new Mu,this.h=!0}try{this.i=new t.a.cb}catch(t){this.i=new Mu}this.v=new Mu,this.f=b(this.Zb,this),this.b={}}function Yu(){return Gu||(Gu=new $u),Gu}function Ju(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function Zu(t,e){return"firebase:"+t.name+(e?":"+e:"")}function tc(t,e,n){return n=Zu(e,n),"local"==e.F&&(t.b[n]=null),Ju(t,e.F).U(n)}function ec(t){t.c&&(clearInterval(t.c),t.c=null)}function nc(t){this.a=t,this.b=Yu()}(t=$u.prototype).get=function(t,e){return Ju(this,t.F).get(Zu(t,e))},t.set=function(t,e,n){var r=Zu(t,n),i=this,o=Ju(this,t.F);return o.set(r,e).then(function(){return o.get(r)}).then(function(e){"local"==t.F&&(i.b[r]=e)})},t.addListener=function(t,e,n){t=Zu(t,e),this.l&&(this.b[t]=s.localStorage.getItem(t)),lt(this.a)&&(Ju(this,"local").ca(this.f),this.h||(sr()||!qr())&&s.indexedDB||!this.l||function(t){ec(t),t.c=setInterval(function(){for(var e in t.a){var n=s.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Xe({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Zb(n))}},1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=Zu(t,e),this.a[t]&&(W(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),lt(this.a)&&(Ju(this,"local").ia(this.f),ec(this))},t.Zb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=s.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.nb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Ju(this,"local").ia(this.f):ec(this),this.m)if(n=s.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?s.localStorage.setItem(e,r):s.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===s.localStorage.getItem(e)||(o.b[e]=s.localStorage.getItem(e),o.nb(e))},Wt&&se&&10==se&&s.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else q(t,b(this.nb,this))},t.nb=function(t){this.a[t]&&q(this.a[t],function(t){t()})};var rc,ic={name:"authEvent",F:"local"};function oc(){this.a=Yu()}function sc(t,e){this.b=ac,this.f=s.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=s.Int32Array?new Int32Array(64):Array(64),void 0===rc&&(rc=s.Int32Array?new Int32Array(dc):dc),this.reset()}I(sc,function(){this.b=-1});for(var ac=64,uc=ac-1,cc=[],hc=0;hc<uc;hc++)cc[hc]=0;var lc=Q(128,cc);function fc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&h^~c&l)+(0|rc[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function pc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(fc(t),i=0);else{if(!f(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(fc(t),i=0)}}t.c=i,t.g+=n}sc.prototype.reset=function(){this.g=this.c=0,this.a=s.Int32Array?new Int32Array(this.h):X(this.h)};var dc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function vc(){sc.call(this,8,gc)}I(vc,sc);var gc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function mc(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new oc,this.g=new nc(this.h),this.f=null,this.b=[],this.a=this.c=null}function yc(t){return new E("invalid-cordova-configuration",t)}function bc(t){var e=new vc;pc(e,t),t=[];var n=8*e.g;56>e.c?pc(e,lc,56-e.c):pc(e,lc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(fc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return K(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}(t)}function wc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function Ic(t){return t.f||(t.f=t.ma().then(function(){return new we(function(e){t.Ea(function n(r){return e(r),t.Ta(n),!1}),function(t){function e(e){r=!0,i&&i.cancel(),Tc(t).then(function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=eo(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=xr(Mn(o=Fn(i),"firebaseError")||null))?S(o):null)?new Fo(r.c,r.b,null,null,o,null,r.T()):new Fo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}wc(t,i)})}var n=new Fo("unknown",null,null,null,new E("no-auth-event")),r=!1,i=Sn(500).then(function(){return Tc(t).then(function(){r||wc(t,n)})}),o=s.handleOpenURL;s.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Ar("BuildInfo.packageName",s).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(t){console.error(t)}},qo||(qo=new Uo),function(t){var e=qo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Ar("universalLinks.subscribe",s))&&t(null,e.b))}(e)}(t)})})),t.f}function Tc(t){var e=null;return function(t){return t.b.get(ic,t.a).then(function(t){return Vo(t)})}(t.g).then(function(n){return e=n,tc((n=t.g).b,ic,n.a)}).then(function(){return e})}function Ec(t){this.a=t,this.b=Yu()}(t=mc.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(vr(void 0)?dr().then(function(){return new we(function(t,e){var n=s.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):ke(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof Ar("universalLinks.subscribe",s))throw yc("cordova-universal-links-plugin-fix is not installed");if(void 0===Ar("BuildInfo.packageName",s))throw yc("cordova-plugin-buildinfo is not installed");if("function"!=typeof Ar("cordova.plugins.browsertab.openUrl",s))throw yc("cordova-plugin-browsertab is not installed");if("function"!=typeof Ar("cordova.InAppBrowser.open",s))throw yc("cordova-plugin-inappbrowser is not installed")},function(){throw new E("cordova-not-ready")})},t.Pb=function(t,e){return e(new E("operation-not-supported-in-this-environment")),Ne()},t.Nb=function(){return ke(new E("operation-not-supported-in-this-environment"))},t.ac=function(){return!1},t.Yb=function(){return!0},t.Ub=function(){return!0},t.Ob=function(t,e,n,r){if(this.c)return ke(new E("redirect-operation-pending"));var i=this,o=s.document,a=null,u=null,c=null,h=null;return this.c=Ne().then(function(){return Mo(e),Ic(i)}).then(function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new Fo(e,r,null,o,new E("no-auth-event"),null,i),u=Ar("BuildInfo.packageName",s);if("string"!=typeof u)throw new E("invalid-cordova-configuration");var c=Ar("BuildInfo.displayName",s),h={};if(_r().toLowerCase().match(/iphone|ipad|ipod/))h.ibi=u;else{if(!_r().toLowerCase().match(/android/))return ke(new E("operation-not-supported-in-this-environment"));h.apn=u}c&&(h.appDisplayName=c),o=bc(o),h.sessionId=o;var l=du(t.v,t.i,t.l,e,n,null,r,t.m,h,t.u,i,t.s);return t.ma().then(function(){var e=t.h;return t.C.a.set(ic,a.w(),e)}).then(function(){var e=Ar("cordova.plugins.browsertab.isAvailable",s);if("function"!=typeof e)throw new E("invalid-cordova-configuration");var n=null;e(function(e){if(e){if("function"!=typeof(n=Ar("cordova.plugins.browsertab.openUrl",s)))throw new E("invalid-cordova-configuration");n(l)}else{if("function"!=typeof(n=Ar("cordova.InAppBrowser.open",s)))throw new E("invalid-cordova-configuration");e=_r(),t.a=n(l,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,t,e,n,r)}).then(function(){return new we(function(t,e){u=function(){var e=Ar("cordova.plugins.browsertab.close",s);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),c=function(){a||(a=Sn(2e3).then(function(){e(new E("redirect-cancelled-by-user"))}))},h=function(){Ur()&&c()},o.addEventListener("resume",c,!1),_r().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",h,!1)}).o(function(t){return Tc(i).then(function(){throw t})})}).oa(function(){c&&o.removeEventListener("resume",c,!1),h&&o.removeEventListener("visibilitychange",h,!1),a&&a.cancel(),u&&i.Ta(u),i.c=null})},t.Ea=function(t){this.b.push(t),Ic(this).o(function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Fo("unknown",null,null,null,new E("no-auth-event")),t(e))})},t.Ta=function(t){W(this.b,function(e){return e==t})};var Sc={name:"pendingRedirect",F:"session"};function _c(t){return tc(t.b,Sc,t.a)}function Ac(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=b(this.s,this),this.b=new qc,this.C=new zc,this.g=new Ec(Uc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Nc(this.D,this.v,this.m,_,this.J)}function Nc(t,e,n,r,i){var o=Pt.SDK_VERSION||null;return vr()?new mc(t,e,n,o,r,i):new hu(t,e,n,o,r,i)}function kc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o(function(n){throw t.a==e&&t.reset(),n})}function Dc(t){t.a.Yb()&&kc(t).o(function(e){var n=new Fo("unknown",null,null,null,new E("operation-not-supported-in-this-environment"));Lc(e)&&t.s(n)}),t.a.Ub()||Bc(t.b)}function Cc(t,e){H(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Sc,t.a).then(function(t){return"pending"==t})}(t.g).then(function(e){e?_c(t.g).then(function(){kc(t).o(function(e){var n=new Fo("unknown",null,null,null,new E("operation-not-supported-in-this-environment"));Lc(e)&&t.s(n)})}):Dc(t)}).o(function(){Dc(t)})}function Oc(t,e){W(t.h,function(t){return t==e})}Ac.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=Nc(this.D,this.v,this.m,null,this.J),this.i={}},Ac.prototype.s=function(t){if(!t)throw new E("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Gb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return Bc(this.b),e};var Rc=new Vr(2e3,1e4),Pc=new Vr(3e4,6e4);function xc(t,e,n,r,i,o,s){return t.a.Nb(e,n,r,function(){t.f||(t.f=!0,t.a.Ea(t.l))},function(){t.reset()},i,o,s)}function Lc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Mc(t,e,n,r,i){var o;return function(t){return t.b.set(Sc,"pending",t.a)}(t.g).then(function(){return t.a.Ob(e,n,r,i).o(function(e){if(Lc(e))throw new E("operation-not-supported-in-this-environment");return o=e,_c(t.g).then(function(){throw o})}).then(function(){return t.a.ac()?new we(function(){}):_c(t.g).then(function(){return t.ra()}).then(function(){}).o(function(){})})})}function Fc(t,e,n,r,i){return t.a.Pb(r,function(t){e.na(n,null,t,i)},Rc.get())}Ac.prototype.ra=function(){return this.b.ra()};var Vc={};function Uc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function jc(t,e,n,r){var i=Uc(e,n,r);return Vc[i]||(Vc[i]=new Ac(t,e,n,r)),Vc[i]}function qc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Bc(t){t.g||(t.g=!0,Hc(t,!1,null,null))}function Kc(t){t.g&&!t.i&&Hc(t,!1,null,null)}function Gc(t,e){if(t.b=function(){return Ne(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Hc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return ke(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Gc(t,n):Gc(t,{user:null}),t.f=[],t.c=[]}function zc(){}function Wc(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(t){this.jb=t},enumerable:!1})}function Qc(t,e){this.a=e,zr(this,"verificationId",t)}function Xc(t,e,n,r){return new Po(t).gb(e,n).then(function(t){return new Qc(t,r)})}function $c(t){var e=qi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new E("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Wr(this,{token:t,expirationTime:jr(1e3*e.exp),authTime:jr(1e3*e.auth_time),issuedAtTime:jr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Yc(t,e,n){var r=e&&e[Zc];if(!r)throw new E("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=ft(e),this.g=n,this.c=new no(null,r),this.b=[];var i=this;q(e[Jc]||[],function(t){(t=Yr(t))&&i.b.push(t)}),zr(this,"auth",this.a),zr(this,"session",this.c),zr(this,"hints",this.b)}qc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},qc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Hc(this,!0,null,t.a),Ne()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,s=e.T(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then(function(e){Hc(t,a,e,null)}).o(function(e){Hc(t,a,null,e)})}(this,t,e):ke(new E("invalid-auth-event")):(Hc(this,!1,null,null),Ne())}else ke(new E("invalid-auth-event"))},qc.prototype.ra=function(){var t=this;return new we(function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new E("timeout");t.a&&t.a.cancel(),t.a=Sn(Pc.get()).then(function(){t.b||(t.g=!0,Hc(t,!0,null,e))})}(t))})},zc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),Ne()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then(function(t){e.na(r,t,null,n)}).o(function(t){e.na(r,null,t,n)})}(t,e):ke(new E("invalid-auth-event"))}else ke(new E("invalid-auth-event"))},Qc.prototype.confirm=function(t){return t=xo(this.verificationId,t),this.a(t)};var Jc="mfaInfo",Zc="mfaPendingCredential";function th(t,e,n,r){E.call(this,"multi-factor-auth-required",r,e),this.b=new Yc(t,e,n),zr(this,"resolver",this.b)}function eh(t,e,n){if(t&&d(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new th(e,t.serverResponse,n,t.message)}catch(t){}return null}function nh(){}function rh(t){zr(this,"factorId",t.fa),this.a=t}function ih(t){if(rh.call(this,t),this.a.fa!=Po.PROVIDER_ID)throw new E("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function oh(t,e){for(var n in Qe.call(this,t),e)this[n]=e[n]}function sh(t,e){this.a=t,this.b=[],this.c=b(this.yc,this),an(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&q(e.multiFactor.enrolledFactors,function(t){var e=null,r={};if(t){t.uid&&(r[ti]=t.uid),t.displayName&&(r[Jr]=t.displayName),t.enrollmentTime&&(r[Zr]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[ei]=t.phoneNumber);try{e=new ni(r)}catch(t){}t=e}else t=null;t&&n.push(t)}),ah(this,n)}function ah(t,e){t.b=e,zr(t,"enrolledFactors",e)}function uh(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function ch(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function hh(t,e){void 0===e&&(t.b?e=(e=t.b).a-e.g:e=0),t.c=Date.now()+1e3*e}function lh(t,e){t.b=ji(e[Qs]||""),t.a=e.refreshToken,hh(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function fh(t,e){return function(t,e){return new we(function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?ra(t,t.l+"?key="+encodeURIComponent(t.c),function(t){t?t.error?r(eu(t)):t.access_token&&t.refresh_token?n(t):r(new E("internal-error")):r(new E("network-request-failed"))},"POST",Xn(e).toString(),t.g,t.m.get()):r(new E("internal-error"))})}(t.f,e).then(function(e){return t.b=ji(e.access_token),t.a=e.refresh_token,hh(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}}).o(function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e})}function ph(t,e){this.a=t||null,this.b=e||null,Wr(this,{lastSignInTime:jr(e||null),creationTime:jr(t||null)})}function dh(t,e,n,r,i,o){Wr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function vh(t,e,n){this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r=Pt.SDK_VERSION?Sr(Pt.SDK_VERSION):null;this.a=new zs(this.l,D(_),r),(this.u=t.emulatorConfig||null)&&ta(this.a,this.u),this.h=new ch(this.a),Sh(this,e[Qs]),lh(this.h,e),zr(this,"refreshToken",this.h.a),Nh(this,n||{}),bn.call(this),this.P=!1,this.s&&kr()&&(this.b=jc(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=function(t){return new uh(function(){return t.I(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var e=t.h.c-Date.now()-3e5;return 0<e?e:0})}(this),this.ba=b(this.ib,this);var i=this;this.za=null,this.Pa=function(t){i.xa(t.h)},this.qa=null,this.Ba=function(t){gh(i,t.c)},this.$=null,this.aa=[],this.Oa=function(t){bh(i,t.f)},this.ja=null,this.S=new sh(this,n),zr(this,"multiFactor",this.S)}function gh(t,e){t.u=e,ta(t.a,e),t.b&&(e=t.b,t.b=jc(t.s,t.l,t.m,t.u),t.P&&(Oc(e,t),Cc(t.b,t)))}function mh(t,e){t.qa&&hn(t.qa,"languageCodeChanged",t.Pa),(t.qa=e)&&an(e,"languageCodeChanged",t.Pa)}function yh(t,e){t.$&&hn(t.$,"emulatorConfigChanged",t.Ba),(t.$=e)&&an(e,"emulatorConfigChanged",t.Ba)}function bh(t,e){t.aa=e,na(t.a,Pt.SDK_VERSION?Sr(Pt.SDK_VERSION,t.aa):null)}function wh(t,e){t.ja&&hn(t.ja,"frameworkChanged",t.Oa),(t.ja=e)&&an(e,"frameworkChanged",t.Oa)}function Ih(t){try{return Pt.app(t.m).auth()}catch(e){throw new E("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function Th(t){t.J||t.D.b||(t.D.start(),hn(t,"tokenChanged",t.ba),an(t,"tokenChanged",t.ba))}function Eh(t){hn(t,"tokenChanged",t.ba),t.D.stop()}function Sh(t,e){t.Aa=e,zr(t,"_lat",e)}function _h(t){for(var e=[],n=0;n<t.W.length;n++)e.push(t.W[n](t));return Ce(e).then(function(){return t})}function Ah(t){t.b&&!t.P&&(t.P=!0,Cc(t.b,t))}function Nh(t,e){Wr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new ph(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function kh(){}function Dh(t){return Ne().then(function(){if(t.J)throw new E("app-deleted")})}function Ch(t){return K(t.providerData,function(t){return t.providerId})}function Oh(t,e){e&&(Rh(t,e.providerId),t.providerData.push(e))}function Rh(t,e){W(t.providerData,function(t){return t.providerId==e})}function Ph(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&zr(t,e,n)}function xh(t,e){t!=e&&(Wr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?zr(t,"metadata",function(t){return new ph(t.a,t.b)}(e.metadata)):zr(t,"metadata",new ph),q(e.providerData,function(e){Oh(t,e)}),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.h,e.h),zr(t,"refreshToken",t.h.a),ah(t.S,e.S.b))}function Lh(t){return t.I().then(function(e){var n=t.isAnonymous;return function(t,e){return Za(t.a,Ca,{idToken:e}).then(b(t.Kc,t))}(t,e).then(function(){return n||Ph(t,"isAnonymous",!1),e})})}function Mh(t,e){e[Qs]&&t.Aa!=e[Qs]&&(lh(t.h,e),t.dispatchEvent(new oh("tokenChanged")),Sh(t,e[Qs]),Ph(t,"refreshToken",t.h.a))}function Fh(t,e){return Lh(t).then(function(){if(H(Ch(t),e))return _h(t).then(function(){throw new E("provider-already-linked")})})}function Vh(t,e,n){return Qr({user:t,credential:Lo(e),additionalUserInfo:e=zi(e),operationType:n})}function Uh(t,e){return Mh(t,e),t.reload().then(function(){return t})}function jh(t,e,n,r,i){if(!kr())return ke(new E("operation-not-supported-in-this-environment"));if(t.i&&!i)return ke(t.i);var o=Hi(n.providerId),s=Lr(t.uid+":::"),a=null;(!Or()||gr())&&t.s&&n.isOAuthProvider&&(a=du(t.s,t.l,t.m,e,n,null,s,Pt.SDK_VERSION||null,null,null,t.tenantId,t.u));var u=lr(a,o&&o.va,o&&o.ua);return r=r().then(function(){if(Bh(t),!i)return t.I().then(function(){})}).then(function(){return xc(t.b,u,e,n,s,!!a,t.tenantId)}).then(function(){return new we(function(n,r){t.na(e,null,new E("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=s,t.c=Fc(t.b,t,e,u,s)})}).then(function(t){return u&&hr(u),t?Qr(t):null}).o(function(t){throw u&&hr(u),t}),Kh(t,r,i)}function qh(t,e,n,r,i){if(!kr())return ke(new E("operation-not-supported-in-this-environment"));if(t.i&&!i)return ke(t.i);var o=null,s=Lr(t.uid+":::");return r=r().then(function(){if(Bh(t),!i)return t.I().then(function(){})}).then(function(){return t.ga=s,_h(t)}).then(function(e){return t.ha&&(e=(e=t.ha).b.set(zh,t.w(),e.a)),e}).then(function(){return Mc(t.b,e,n,s,t.tenantId)}).o(function(e){if(o=e,t.ha)return Wh(t.ha);throw o}).then(function(){if(o)throw o}),Kh(t,r,i)}function Bh(t){if(!t.b||!t.P){if(t.b&&!t.P)throw new E("internal-error");throw new E("auth-domain-config-required")}}function Kh(t,e,n){var r=function(t,e,n){return t.i&&!n?(e.cancel(),ke(t.i)):e.o(function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.i||t.dispatchEvent(new oh("userInvalidated")),t.i=e),e})}(t,e,n);return t.N.push(r),r.oa(function(){z(t.N,r)}),r.o(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=eh(e.w(),Ih(t),b(t.jc,t))),n||e})}function Gh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Qs]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new vh(e,n,t);return t.providerData&&q(t.providerData,function(t){t&&Oh(i,Qr(t))}),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Hh(t){this.a=t,this.b=Yu()}Yc.prototype.Rc=function(t){var e=this;return t.tb(this.a.a,this.c).then(function(t){var n=ft(e.f);return delete n[Jc],delete n[Zc],dt(n,t),e.g(n)})},I(th,E),nh.prototype.tb=function(t,e,n){return e.type==ro?function(t,e,n,r){return n.Ha().then(function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),dt(n,{phoneVerificationInfo:Ro(t.a)}),Za(e,ka,n)})}(this,t,e,n):function(t,e,n){return n.Ha().then(function(n){return dt(n={mfaPendingCredential:n},{phoneVerificationInfo:Ro(t.a)}),Za(e,Da,n)})}(this,t,e)},I(rh,nh),I(ih,rh),I(oh,Qe),(t=sh.prototype).yc=function(t){ah(this,function(t){var e=[];return q(t.mfaInfo||[],function(t){(t=Yr(t))&&e.push(t)}),e}(t.hd))},t.Sb=function(){return this.a.I().then(function(t){return new no(t,null)})},t.fc=function(t,e){var n=this,r=this.a.a;return this.Sb().then(function(n){return t.tb(r,n,e)}).then(function(t){return Mh(n.a,t),n.a.reload()})},t.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then(function(t){return Za(r,Ja,{idToken:t,mfaEnrollmentId:n})}).then(function(t){var r=B(e.b,function(t){return t.uid!=n});return ah(e,r),Mh(e.a,t),e.a.reload().o(function(t){if("auth/user-token-expired"!=t.code)throw t})})},t.w=function(){return{multiFactor:{enrolledFactors:K(this.b,function(t){return t.w()})}}},uh.prototype.start=function(){this.a=this.c,function t(e,n){e.stop();e.b=Sn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(e,n)).then(function(){return t=s.document,e=null,Ur()||!t?Ne():new we(function(n){e=function(){Ur()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)}).o(function(n){throw t.removeEventListener("visibilitychange",e,!1),n});var t,e}).then(function(){return e.h()}).then(function(){t(e,!0)}).o(function(n){e.i(n)&&t(e,!1)})}(this,!0)},uh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},ch.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},ch.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?ke(new E("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?fh(this,{grant_type:"refresh_token",refresh_token:this.a}):Ne(null):Ne({accessToken:this.b.toString(),refreshToken:this.a})},ph.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},I(vh,bn),vh.prototype.xa=function(t){this.za=t,Zs(this.a,t)},vh.prototype.la=function(){return this.za},vh.prototype.Ga=function(){return X(this.aa)},vh.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},zr(vh.prototype,"providerId","firebase"),(t=vh.prototype).reload=function(){var t=this;return Kh(this,Dh(this).then(function(){return Lh(t).then(function(){return _h(t)}).then(kh)}))},t.oc=function(t){return this.I(t).then(function(t){return new $c(t)})},t.I=function(t){var e=this;return Kh(this,Dh(this).then(function(){return e.h.getToken(t)}).then(function(t){if(!t)throw new E("internal-error");return t.accessToken!=e.Aa&&(Sh(e,t.accessToken),e.dispatchEvent(new oh("tokenChanged"))),Ph(e,"refreshToken",t.refreshToken),t.accessToken}))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new E("internal-error");Nh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?K(t,function(t){return new dh(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[]}(t),n=0;n<e.length;n++)Oh(this,e[n]);Ph(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new oh("userReloaded",{hd:t}))},t.Lc=function(t){return Gr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(t)},t.ub=function(t){var e=this,n=null;return Kh(this,t.c(this.a,this.uid).then(function(t){return Mh(e,t),n=Vh(e,t,"reauthenticate"),e.i=null,e.reload()}).then(function(){return n}),!0)},t.Cc=function(t){return Gr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(t)},t.rb=function(t){var e=this,n=null;return Kh(this,Fh(this,t.providerId).then(function(){return e.I()}).then(function(n){return t.b(e.a,n)}).then(function(t){return n=Vh(e,t,"link"),Uh(e,t)}).then(function(){return n}))},t.Dc=function(t,e){var n=this;return Kh(this,Fh(this,"phone").then(function(){return Xc(Ih(n),t,e,b(n.rb,n))}))},t.Mc=function(t,e){var n=this;return Kh(this,Ne().then(function(){return Xc(Ih(n),t,e,b(n.ub,n))}),!0)},t.Cb=function(t){var e=this;return Kh(this,this.I().then(function(n){return e.a.Cb(n,t)}).then(function(t){return Mh(e,t),e.reload()}))},t.ed=function(t){var e=this;return Kh(this,this.I().then(function(n){return t.b(e.a,n)}).then(function(t){return Mh(e,t),e.reload()}))},t.Db=function(t){var e=this;return Kh(this,this.I().then(function(n){return e.a.Db(n,t)}).then(function(t){return Mh(e,t),e.reload()}))},t.Eb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Dh(this);var e=this;return Kh(this,this.I().then(function(n){return e.a.Eb(n,{displayName:t.displayName,photoUrl:t.photoURL})}).then(function(t){return Mh(e,t),Ph(e,"displayName",t.displayName||null),Ph(e,"photoURL",t.photoUrl||null),q(e.providerData,function(t){"password"===t.providerId&&(zr(t,"displayName",e.displayName),zr(t,"photoURL",e.photoURL))}),_h(e)}).then(kh))},t.cd=function(t){var e=this;return Kh(this,Lh(this).then(function(n){return H(Ch(e),t)?function(t,e,n){return Za(t,_a,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then(function(t){var n={};return q(t.providerUserInfo||[],function(t){n[t.providerId]=!0}),q(Ch(e),function(t){n[t]||Rh(e,t)}),n[Po.PROVIDER_ID]||zr(e,"phoneNumber",null),_h(e)}):_h(e).then(function(){throw new E("no-such-provider")})}))},t.delete=function(){var t=this;return Kh(this,this.I().then(function(e){return Za(t.a,Sa,{idToken:e})}).then(function(){t.dispatchEvent(new oh("userDeleted"))})).then(function(){for(var e=0;e<t.N.length;e++)t.N[e].cancel("app-deleted");mh(t,null),yh(t,null),wh(t,null),t.N=[],t.J=!0,Eh(t),zr(t,"refreshToken",null),t.b&&Oc(t.b,t)})},t.Gb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?b(this.Lb,this):"reauthViaPopup"==t&&e==(this.g||null)?b(this.Mb,this):"linkViaRedirect"==t&&(this.ga||null)==e?b(this.Lb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?b(this.Mb,this):null},t.Ec=function(t){var e=this;return jh(this,"linkViaPopup",t,function(){return Fh(e,t.providerId).then(function(){return _h(e)})},!1)},t.Nc=function(t){return jh(this,"reauthViaPopup",t,function(){return Ne()},!0)},t.Fc=function(t){var e=this;return qh(this,"linkViaRedirect",t,function(){return Fh(e,t.providerId)},!1)},t.Oc=function(t){return qh(this,"reauthViaRedirect",t,function(){return Ne()},!0)},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Kh(this,this.I().then(function(n){return ma(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})}).then(function(t){return o=Vh(i,t,"link"),Uh(i,t)}).then(function(){return o}))},t.Mb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Kh(this,Ne().then(function(){return so(ya(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)}).then(function(t){return o=Vh(i,t,"reauthenticate"),Mh(i,t),i.i=null,i.reload()}).then(function(){return o}),!0)},t.vb=function(t){var e=this,n=null;return Kh(this,this.I().then(function(e){return n=e,void 0===t||lt(t)?{}:Mi(new Ai(t))}).then(function(t){return e.a.vb(n,t)}).then(function(t){if(e.email!=t)return e.reload()}).then(function(){}))},t.Fb=function(t,e){var n=this,r=null;return Kh(this,this.I().then(function(t){return r=t,void 0===e||lt(e)?{}:Mi(new Ai(e))}).then(function(e){return n.a.Fb(r,t,e)}).then(function(t){if(n.email!=t)return n.reload()}).then(function(){}))},t.jc=function(t){var e=null,n=this;return Kh(this,t=so(Ne(t),n.uid).then(function(t){return e=Vh(n,t,"reauthenticate"),Mh(n,t),n.i=null,n.reload()}).then(function(){return e}),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&dt(t,this.metadata.w()),q(this.providerData,function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))}),dt(t,this.S.w()),t};var zh={name:"redirectUser",F:"session"};function Wh(t){return tc(t.b,zh,t.a)}function Qh(t){this.a=t,this.b=Yu(),this.c=null,this.f=function(t){var e=Yh("local"),n=Yh("session"),r=Yh("none");return function(t,e,n){var r=Zu(e,n),i=Ju(t,e.F);return t.get(e,n).then(function(o){var a=null;try{a=xr(s.localStorage.getItem(r))}catch(t){}if(a&&!o)return s.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&s.localStorage.removeItem(r)})}(t.b,e,t.a).then(function(){return t.b.get(n,t.a)}).then(function(i){return i?n:t.b.get(r,t.a).then(function(n){return n?r:t.b.get(e,t.a).then(function(n){return n?e:t.b.get($h,t.a).then(function(t){return t?Yh(t):e})})})}).then(function(e){return t.c=e,Xh(t,e.F)}).o(function(){t.c||(t.c=e)})}(this),this.b.addListener(Yh("local"),this.a,b(this.g,this))}function Xh(t,e){var n,r=[];for(n in Xu)Xu[n]!==e&&r.push(tc(t.b,Yh(Xu[n]),t.a));return r.push(tc(t.b,$h,t.a)),function(t){return new we(function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},a=0;a<t.length;a++)De(t[a],w(o,a),s);else e(i)})}(r)}Qh.prototype.g=function(){var t=this,e=Yh("local");el(this,function(){return Ne().then(function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null}).then(function(n){if(n)return Xh(t,"local").then(function(){t.c=e})})})};var $h={name:"persistence",F:"session"};function Yh(t){return{name:"authUser",F:t}}function Jh(t,e){return el(t,function(){return t.b.set(t.c,e.w(),t.a)})}function Zh(t){return el(t,function(){return tc(t.b,t.c,t.a)})}function tl(t,e,n){return el(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Gh(t||{})})})}function el(t,e){return t.f=t.f.then(e,e),t.f}function nl(t){if(this.l=!1,zr(this,"settings",new Wc),zr(this,"app",t),!ll(this).options||!ll(this).options.apiKey)throw new E("invalid-api-key");t=Pt.SDK_VERSION?Sr(Pt.SDK_VERSION):null,this.a=new zs(ll(this).options&&ll(this).options.apiKey,D(_),t),this.P=[],this.s=[],this.N=[],this.Pa=Pt.INTERNAL.createSubscribe(b(this.zc,this)),this.W=void 0,this.ib=Pt.INTERNAL.createSubscribe(b(this.Ac,this)),cl(this,null),this.i=new Qh(ll(this).options.apiKey+":"+ll(this).name),this.D=new Hh(ll(this).options.apiKey+":"+ll(this).name),this.$=vl(this,function(t){var e=ll(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(zh,t.a).then(function(t){return t&&e&&(t.authDomain=e),Gh(t||{})})}(t.D,ll(t).options.authDomain).then(function(e){return(t.m=e)&&(e.ha=t.D),Wh(t.D)});return vl(t,e)}(t).then(function(){return tl(t.i,e,t.R)}).then(function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then(function(){return Jh(t.i,e).then(function(){return e})}).o(function(n){return"auth/network-request-failed"==n.code?e:Zh(t.i)})):null}).then(function(e){cl(t,e||null)});return vl(t,n)}(this)),this.h=vl(this,function(t){return t.$.then(function(){return al(t)}).o(function(){}).then(function(){if(!t.l)return t.ja()}).o(function(){}).then(function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(Yh("local"),e.a,t.ja)}})}(this)),this.ba=!1,this.ja=b(this.Zc,this),this.Ba=b(this.da,this),this.qa=b(this.mc,this),this.za=b(this.wc,this),this.Aa=b(this.xc,this),this.b=null,function(t){var e=ll(t).options.authDomain,n=ll(t).options.apiKey;e&&kr()&&(t.Oa=t.$.then(function(){if(!t.l){if(t.b=jc(e,n,ll(t).name,t.R),Cc(t.b,t),fl(t)&&Ah(fl(t)),t.m){Ah(t.m);var r=t.m;r.xa(t.la()),mh(r,t),bh(r=t.m,t.J),wh(r,t),gh(r=t.m,t.R),yh(r,t),t.m=null}return t.b}}))}(this),this.INTERNAL={},this.INTERNAL.delete=b(this.delete,this),this.INTERNAL.logFramework=b(this.Gc,this),this.u=0,bn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.xa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.zb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.R){var t=Fn(this.R.url);t=Qr({protocol:t.c,host:t.a,port:t.g,options:Qr({disableWarnings:this.R.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.R=null}function rl(t){Qe.call(this,"languageCodeChanged"),this.h=t}function il(t){Qe.call(this,"emulatorConfigChanged"),this.c=t}function ol(t){Qe.call(this,"frameworkChanged"),this.f=t}function sl(t){return t.Oa||ke(new E("auth-domain-config-required"))}function al(t){if(!kr())return ke(new E("operation-not-supported-in-this-environment"));var e=sl(t).then(function(){return t.b.ra()}).then(function(t){return t?Qr(t):null});return vl(t,e)}function ul(t,e){var n={};return n.apiKey=ll(t).options.apiKey,n.authDomain=ll(t).options.authDomain,n.appName=ll(t).name,t.R&&(n.emulatorConfig=t.R),t.$.then(function(){return function(t,e,n,r){var i=new vh(t,e);return n&&(i.ha=n),r&&bh(i,r),i.reload().then(function(){return i})}(n,e,t.D,t.Ga())}).then(function(e){return fl(t)&&e.uid==fl(t).uid?(xh(fl(t),e),t.da(e)):(cl(t,e),Ah(e),t.da(e))}).then(function(){dl(t)})}function cl(t,e){fl(t)&&(function(t,e){W(t.W,function(t){return t==e})}(fl(t),t.Ba),hn(fl(t),"tokenChanged",t.qa),hn(fl(t),"userDeleted",t.za),hn(fl(t),"userInvalidated",t.Aa),Eh(fl(t))),e&&(e.W.push(t.Ba),an(e,"tokenChanged",t.qa),an(e,"userDeleted",t.za),an(e,"userInvalidated",t.Aa),0<t.u&&Th(e)),zr(t,"currentUser",e),e&&(e.xa(t.la()),mh(e,t),bh(e,t.J),wh(e,t),gh(e,t.R),yh(e,t))}function hl(t,e){var n=null,r=null;return vl(t,e.then(function(e){return n=Lo(e),r=zi(e),ul(t,e)},function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=eh(e.w(),t,b(t.kc,t))),n||e}).then(function(){return Qr({user:fl(t),credential:n,additionalUserInfo:r,operationType:"signIn"})}))}function ll(t){return t.app}function fl(t){return t.currentUser}function pl(t){return fl(t)&&fl(t)._lat||null}function dl(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](pl(t));if(t.W!==t.getUid()&&t.N.length)for(t.W=t.getUid(),e=0;e<t.N.length;e++)t.N[e]&&t.N[e](pl(t))}}function vl(t,e){return t.P.push(e),e.oa(function(){z(t.P,e)}),e}function gl(){}function ml(){this.a={},this.b=1e12}Qh.prototype.yb=function(t){var e=null,n=this;return function(t){var e=new E("invalid-persistence-type"),n=new E("unsupported-persistence-type");t:{for(r in Xu)if(Xu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(yr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!ku()&&"none"!==t)throw n;break;default:if(!Nr()&&"none"!==t)throw n}}(t),el(this,function(){return t!=n.c.F?n.b.get(n.c,n.a).then(function(r){return e=r,Xh(n,t)}).then(function(){if(n.c=Yh(t),e)return n.b.set(n.c,e,n.a)}):Ne()})},I(nl,bn),I(rl,Qe),I(il,Qe),I(ol,Qe),(t=nl.prototype).yb=function(t){return vl(this,t=this.i.yb(t))},t.xa=function(t){this.aa===t||this.l||(this.aa=t,Zs(this.a,this.aa),this.dispatchEvent(new rl(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=s.navigator;this.xa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.R){if(!/^https?:\/\//.test(t))throw new E("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),s.document&&!t&&dr().then(function(){var t=s.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#b50000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),s.document.body.appendChild(t)})})(e=!!e&&!!e.disableWarnings),this.R={url:t,ec:e},this.settings.jb=!0,ta(this.a,this.R),this.dispatchEvent(new il(this.R))}},t.Gc=function(t){this.J.push(t),na(this.a,Pt.SDK_VERSION?Sr(Pt.SDK_VERSION,this.J):null),this.dispatchEvent(new ol(this.J))},t.Ga=function(){return X(this.J)},t.zb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:ll(this).options.apiKey,authDomain:ll(this).options.authDomain,appName:ll(this).name,currentUser:fl(this)&&fl(this).w()}},t.Gb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?b(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then(function(){return hl(i,ga(i.a,o))})},t.Xc=function(t){if(!kr())return ke(new E("operation-not-supported-in-this-environment"));var e=this,n=Hi(t.providerId),r=Lr(),i=null;(!Or()||gr())&&ll(this).options.authDomain&&t.isOAuthProvider&&(i=du(ll(this).options.authDomain,ll(this).options.apiKey,ll(this).name,"signInViaPopup",t,null,r,Pt.SDK_VERSION||null,null,null,this.T(),this.R));var o=lr(i,n&&n.va,n&&n.ua);return vl(this,n=sl(this).then(function(n){return xc(n,o,"signInViaPopup",t,r,!!i,e.T())}).then(function(){return new we(function(t,n){e.na("signInViaPopup",null,new E("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=r,e.c=Fc(e.b,e,"signInViaPopup",o,r)})}).then(function(t){return o&&hr(o),t?Qr(t):null}).o(function(t){throw o&&hr(o),t}))},t.Yc=function(t){if(!kr())return ke(new E("operation-not-supported-in-this-environment"));var e=this;return vl(this,sl(this).then(function(){return el(t=e.i,function(){return t.b.set($h,t.c.F,t.a)});var t}).then(function(){return Mc(e.b,"signInViaRedirect",t,void 0,e.T())}))},t.ra=function(){var t=this;return al(this).then(function(e){return t.b&&Kc(t.b.b),e}).o(function(e){throw t.b&&Kc(t.b.b),e})},t.dd=function(t){if(!t)return ke(new E("null-user"));if(this.S!=t.tenantId)return ke(new E("tenant-id-mismatch"));var e=this,n={};n.apiKey=ll(this).options.apiKey,n.authDomain=ll(this).options.authDomain,n.appName=ll(this).name;var r=function(t,e,n,r){var i=t.h,o={};return o[Qs]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new vh(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&bh(e,r),xh(e,t),e}(t,n,e.D,e.Ga());return vl(this,this.h.then(function(){if(ll(e).options.apiKey!=t.l)return r.reload()}).then(function(){return fl(e)&&t.uid==fl(e).uid?(xh(fl(e),t),e.da(t)):(cl(e,r),Ah(r),e.da(r))}).then(function(){dl(e)}))},t.Bb=function(){var t=this;return vl(this,this.h.then(function(){return t.b&&Kc(t.b.b),fl(t)?(cl(t,null),Zh(t.i).then(function(){dl(t)})):Ne()}))},t.Zc=function(){var t=this;return tl(this.i,ll(this).options.authDomain).then(function(e){if(!t.l){var n;if(n=fl(t)&&e){n=fl(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return xh(fl(t),e),fl(t).I();(fl(t)||e)&&(cl(t,e),e&&(Ah(e),e.ha=t.D),t.b&&Cc(t.b,t),dl(t))}})},t.da=function(t){return Jh(this.i,t)},t.mc=function(){dl(this),this.da(fl(this))},t.wc=function(){this.Bb()},t.xc=function(){this.Bb()},t.kc=function(t){var e=this;return this.h.then(function(){return hl(e,Ne(t))})},t.zc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(fl(e))})},t.Ac=function(t){var e=this;!function(t,e){t.N.push(e),vl(t,t.h.then(function(){!t.l&&H(t.N,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(pl(t)))}))}(this,function(){t.next(fl(e))})},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){"function"==typeof t?t(fl(r)):"function"==typeof t.next&&t.next(fl(r))}),this.Pa(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){r.W=r.getUid(),"function"==typeof t?t(fl(r)):"function"==typeof t.next&&t.next(fl(r))}),this.ib(t,e,n)},t.nc=function(t){var e=this;return vl(this,this.h.then(function(){return fl(e)?fl(e).I(t).then(function(t){return{accessToken:t}}):null}))},t.Tc=function(t){var e=this;return this.h.then(function(){return hl(e,Za(e.a,Wa,{token:t}))}).then(function(t){var n=t.user;return Ph(n,"isAnonymous",!1),e.da(n),t})},t.Uc=function(t,e){var n=this;return this.h.then(function(){return hl(n,Za(n.a,Qa,{email:t,password:e}))})},t.dc=function(t,e){var n=this;return this.h.then(function(){return hl(n,Za(n.a,Ta,{email:t,password:e}))})},t.ab=function(t){var e=this;return this.h.then(function(){return hl(e,t.ka(e.a))})},t.Sc=function(t){return Gr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(t)},t.Ab=function(){var t=this;return this.h.then(function(){var e=fl(t);if(e&&e.isAnonymous){var n=Qr({providerId:null,isNewUser:!1});return Qr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return hl(t,t.a.Ab()).then(function(e){var n=e.user;return Ph(n,"isAnonymous",!0),t.da(n),e})})},t.getUid=function(){return fl(this)&&fl(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&fl(this)&&Th(fl(this))},t.Pc=function(t){var e=this;q(this.s,function(n){n==t&&e.u--}),0>this.u&&(this.u=0),0==this.u&&fl(this)&&Eh(fl(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),vl(this,this.h.then(function(){e.l||H(e.s,t)&&t(pl(e))}))},t.removeAuthTokenListener=function(t){W(this.s,function(e){return e==t})},t.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener(Yh("local"),t.a,this.ja),this.b&&(Oc(this.b,this),Kc(this.b.b)),Promise.resolve()},t.hc=function(t){return vl(this,function(t,e){return Za(t,Ea,{identifier:e,continueUri:Dr()?ar():"http://localhost"}).then(function(t){return t.signinMethods||[]})}(this.a,t))},t.Bc=function(t){return!!Do(t)},t.xb=function(t,e){var n=this;return vl(this,Ne().then(function(){var t=new Ai(e);if(!t.c)throw new E("argument-error",Di+" must be true when sending sign in link to email");return Mi(t)}).then(function(e){return n.a.xb(t,e)}).then(function(){}))},t.jd=function(t){return this.Sa(t).then(function(t){return t.data.email})},t.ob=function(t,e){return vl(this,this.a.ob(t,e).then(function(){}))},t.Sa=function(t){return vl(this,this.a.Sa(t).then(function(t){return new ri(t)}))},t.kb=function(t){return vl(this,this.a.kb(t).then(function(){}))},t.wb=function(t,e){var n=this;return vl(this,Ne().then(function(){return void 0===e||lt(e)?{}:Mi(new Ai(e))}).then(function(e){return n.a.wb(t,e)}).then(function(){}))},t.Wc=function(t,e){return vl(this,Xc(this,t,e,b(this.ab,this)))},t.Vc=function(t,e){var n=this;return vl(this,Ne().then(function(){var r=e||ar(),i=ko(t,r);if(!(r=Do(r)))throw new E("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new E("tenant-id-mismatch");return n.ab(i)}))},gl.prototype.render=function(){},gl.prototype.reset=function(){},gl.prototype.getResponse=function(){},gl.prototype.execute=function(){};var yl=null;function bl(t,e){return(e=wl(e))&&t.a[e]||null}function wl(t){return(t=void 0===t?1e12:t)?t.toString():null}function Il(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ue(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():an(this.f,"click",this.i)}function Tl(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function El(){}function Sl(){}ml.prototype.render=function(t,e){return this.a[this.b.toString()]=new Il(t,e),this.b++},ml.prototype.reset=function(t){var e=bl(this,t);t=wl(t),e&&t&&(e.delete(),delete this.a[t])},ml.prototype.getResponse=function(t){return(t=bl(this,t))?t.getResponse():null},ml.prototype.execute=function(t){(t=bl(this,t))&&t.execute()},Il.prototype.getResponse=function(){return Tl(this),this.b},Il.prototype.execute=function(){Tl(this);var t=this;this.a||(this.a=setTimeout(function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(t){}t.a=setTimeout(function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.h&&t.execute()},6e4)},500))},Il.prototype.delete=function(){Tl(this),this.g=!0,clearTimeout(this.a),this.a=null,hn(this.f,"click",this.i)},zr(El,"FACTOR_ID","phone"),Sl.prototype.g=function(){return yl||(yl=new ml),Ne(yl)},Sl.prototype.c=function(){};var _l=null;function Al(){this.b=s.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Nl=new gt(wt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),kl=new Vr(3e4,6e4);Al.prototype.g=function(t){var e=this;return new we(function(n,r){var i=setTimeout(function(){r(new E("network-request-failed"))},kl.get());!s.grecaptcha||t!==e.f&&!e.b?(s[e.a]=function(){if(s.grecaptcha){e.f=t;var o=s.grecaptcha.render;s.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(s.grecaptcha)}else clearTimeout(i),r(new E("internal-error"));delete s[e.a]},Ne(Us(St(Nl,{onload:e.a,hl:t||""}))).o(function(){clearTimeout(i),r(new E("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(i),n(s.grecaptcha))})},Al.prototype.c=function(){this.b--};var Dl=null;function Cl(t,e,n,r,i,o,a){if(zr(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=e,this.g=null,a?(_l||(_l=new Sl),a=_l):(Dl||(Dl=new Al),a=Dl),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Pl])throw new E("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[xl],!s.document)throw new E("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ue(e)||!this.i&&ue(e).hasChildNodes())throw new E("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new zs(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[Ol];this.a[Ol]=function(t){if(Ll(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=Ar(c,s);"function"==typeof e&&e(t)}};var h=this.a[Rl];this.a[Rl]=function(){if(Ll(u,null),"function"==typeof h)h();else if("string"==typeof h){var t=Ar(h,s);"function"==typeof t&&t()}}}var Ol="callback",Rl="expired-callback",Pl="sitekey",xl="size";function Ll(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function Ml(t,e){return t.h.push(e),e.oa(function(){z(t.h,e)}),e}function Fl(t){if(t.J)throw new E("internal-error","RecaptchaVerifier instance has been destroyed.")}function Vl(t,e,n){var r=!1;try{this.b=n||Pt.app()}catch(t){throw new E("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new E("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=Pt.SDK_VERSION?Sr(Pt.SDK_VERSION,o):null,Cl.call(this,n,t,e,function(){try{var t=i.b.auth().la()}catch(e){t=null}return t},o,D(_),r)}function Ul(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new E("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=jl.length)throw new E("internal-error","Argument validator received an unsupported number of arguments.");n=jl[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new E("argument-error",t+" failed: "+r)}(t=Cl.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Ml(this,Ne().then(function(){if(Dr()&&!mr())return dr();throw new E("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return t.m.g(t.u())}).then(function(e){return t.g=e,Za(t.s,Ma,{})}).then(function(e){t.a[Pl]=e.recaptchaSiteKey}).o(function(e){throw t.f=null,e}))},t.render=function(){Fl(this);var t=this;return Ml(this,this.Ia().then(function(){if(null===t.c){var e=t.v;if(!t.i){var n=ue(e);e=pe("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c}))},t.verify=function(){Fl(this);var t=this;return Ml(this,this.render().then(function(e){return new we(function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){W(t.l,function(t){return t==e})}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}})}))},t.reset=function(){Fl(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Fl(this),this.J=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=ue(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},I(Vl,Cl);var jl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function ql(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function Bl(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function Kl(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:d}}function Gl(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function Hl(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function zl(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function Wl(t,e){return d(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Ql(t){return d(t)&&"string"==typeof t.uid}function Xl(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function $l(t,e){for(var n in e){var r=e[n].name;t[r]=Zl(r,t[n],e[n].j)}}function Yl(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:w(function(t){return this[t]},n),set:w(function(t,e,n,r){Ul(t,[n],[r],!0),this[e]=r},r,n,e[n].lb),enumerable:!0})}}function Jl(t,e,n,r){t[e]=Zl(e,n,r)}function Zl(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Ul(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}$l(nl.prototype,{kb:{name:"applyActionCode",j:[ql("code")]},Sa:{name:"checkActionCode",j:[ql("code")]},ob:{name:"confirmPasswordReset",j:[ql("code"),ql("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[ql("email"),ql("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[ql("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[ql("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Xl(Kl(),Gl(),"nextOrObserver"),Gl("opt_error",!0),Gl("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Xl(Kl(),Gl(),"nextOrObserver"),Gl("opt_error",!0),Gl("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[ql("email"),Xl(Kl("opt_actionCodeSettings",!0),Hl(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[ql("email"),Kl("actionCodeSettings")]},yb:{name:"setPersistence",j:[ql("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[zl()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[zl()]},Tc:{name:"signInWithCustomToken",j:[ql("token")]},Uc:{name:"signInWithEmailAndPassword",j:[ql("email"),ql("password")]},Vc:{name:"signInWithEmailLink",j:[ql("email"),ql("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[ql("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[Xl({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof vh)}},Hl(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[ql(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[ql("url"),Kl("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[ql("code")]}}),Yl(nl.prototype,{lc:{name:"languageCode",lb:Xl(ql(),Hl(),"languageCode")},ti:{name:"tenantId",lb:Xl(ql(),Hl(),"tenantId")}}),nl.Persistence=Xu,nl.Persistence.LOCAL="local",nl.Persistence.SESSION="session",nl.Persistence.NONE="none",$l(vh.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Bl("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Bl("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[zl()]},rb:{name:"linkWithCredential",j:[zl()]},Dc:{name:"linkWithPhoneNumber",j:[ql("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[zl()]},ub:{name:"reauthenticateWithCredential",j:[zl()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[ql("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[Xl(Kl("opt_actionCodeSettings",!0),Hl(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[ql(null,!0)]},cd:{name:"unlink",j:[ql("provider")]},Cb:{name:"updateEmail",j:[ql("email")]},Db:{name:"updatePassword",j:[ql("password")]},ed:{name:"updatePhoneNumber",j:[zl("phone")]},Eb:{name:"updateProfile",j:[Kl("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[ql("email"),Xl(Kl("opt_actionCodeSettings",!0),Hl(null,!0),"opt_actionCodeSettings",!0)]}}),$l(ml.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),$l(gl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),$l(we.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Yl(Wc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:Bl("appVerificationDisabledForTesting")}}),$l(Qc.prototype,{confirm:{name:"confirm",j:[ql("verificationCode")]}}),Jl(oo,"fromJSON",function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[fo,Ao,Oo,co],r=0;r<n.length;r++)if(e=n[r](t))return e;return null},[Xl(ql(),Kl(),"json")]),Jl(No,"credential",function(t,e){return new _o(t,e)},[ql("email"),ql("password")]),$l(_o.prototype,{w:{name:"toJSON",j:[ql(null,!0)]}}),$l(mo.prototype,{Ca:{name:"addScope",j:[ql("scope")]},Ka:{name:"setCustomParameters",j:[Kl("customOAuthParameters")]}}),Jl(mo,"credential",yo,[Xl(ql(),Kl(),"token")]),Jl(No,"credentialWithLink",ko,[ql("email"),ql("emailLink")]),$l(bo.prototype,{Ca:{name:"addScope",j:[ql("scope")]},Ka:{name:"setCustomParameters",j:[Kl("customOAuthParameters")]}}),Jl(bo,"credential",wo,[Xl(ql(),Kl(),"token")]),$l(Io.prototype,{Ca:{name:"addScope",j:[ql("scope")]},Ka:{name:"setCustomParameters",j:[Kl("customOAuthParameters")]}}),Jl(Io,"credential",To,[Xl(ql(),Xl(Kl(),Hl()),"idToken"),Xl(ql(),Hl(),"accessToken",!0)]),$l(Eo.prototype,{Ka:{name:"setCustomParameters",j:[Kl("customOAuthParameters")]}}),Jl(Eo,"credential",So,[Xl(ql(),Kl(),"token"),ql("secret",!0)]),$l(go.prototype,{Ca:{name:"addScope",j:[ql("scope")]},credential:{name:"credential",j:[Xl(ql(),Xl(Kl(),Hl()),"optionsOrIdToken"),Xl(ql(),Hl(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Kl("customOAuthParameters")]}}),$l(ho.prototype,{w:{name:"toJSON",j:[ql(null,!0)]}}),$l(ao.prototype,{w:{name:"toJSON",j:[ql(null,!0)]}}),Jl(Po,"credential",xo,[ql("verificationId"),ql("verificationCode")]),$l(Po.prototype,{gb:{name:"verifyPhoneNumber",j:[Xl(ql(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?Wl(t.session,ro)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Wl(t.session,io)&&Ql(t.multiFactorHint):t.session&&t.multiFactorUid?Wl(t.session,io)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),$l(Co.prototype,{w:{name:"toJSON",j:[ql(null,!0)]}}),$l(E.prototype,{toJSON:{name:"toJSON",j:[ql(null,!0)]}}),$l(Ko.prototype,{toJSON:{name:"toJSON",j:[ql(null,!0)]}}),$l(Bo.prototype,{toJSON:{name:"toJSON",j:[ql(null,!0)]}}),$l(th.prototype,{toJSON:{name:"toJSON",j:[ql(null,!0)]}}),$l(Yc.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}}]}}),$l(sh.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}},ql("displayName",!0)]},bd:{name:"unenroll",j:[Xl({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Ql},ql(),"multiFactorInfoIdentifier")]}}),$l(Vl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Jl(mi,"parseLink",_i,[ql("link")]),Jl(El,"assertion",function(t){return new ih(t)},[zl("phone")]),function(){if(void 0===Pt||!Pt.INTERNAL||!Pt.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:oi,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:ii,VERIFY_AND_CHANGE_EMAIL:si,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:nl,AuthCredential:oo,Error:E};Jl(t,"EmailAuthProvider",No,[]),Jl(t,"FacebookAuthProvider",mo,[]),Jl(t,"GithubAuthProvider",bo,[]),Jl(t,"GoogleAuthProvider",Io,[]),Jl(t,"TwitterAuthProvider",Eo,[]),Jl(t,"OAuthProvider",go,[ql("providerId")]),Jl(t,"SAMLAuthProvider",vo,[ql("providerId")]),Jl(t,"PhoneAuthProvider",Po,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof nl)}}]),Jl(t,"RecaptchaVerifier",Vl,[Xl(ql(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Kl("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof Pt.app.App)}}]),Jl(t,"ActionCodeURL",mi,[]),Jl(t,"PhoneMultiFactorGenerator",El,[]),Pt.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new nl(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(t){t.getProvider("auth-internal").initialize()}}),Pt.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:b((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:b(t.nc,t),addAuthTokenListener:b(t.cc,t),removeAuthTokenListener:b(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Pt.registerVersion("@firebase/auth","0.16.8"),Pt.INTERNAL.extendNamespace({User:vh})}()}.apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var xt=function(t,e){return(xt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Lt(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Mt,Ft="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Vt=Vt||{},Ut=Ft||self;function jt(){}function qt(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Bt(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Kt="closure_uid_"+(1e9*Math.random()>>>0),Gt=0;function Ht(t,e,n){return t.call.apply(t.bind,arguments)}function zt(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Wt(t,e,n){return(Wt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ht:zt).apply(null,arguments)}function Qt(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Xt(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function $t(){this.s=this.s,this.o=this.o}$t.prototype.s=!1,$t.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0))(function(t){Object.prototype.hasOwnProperty.call(t,Kt)&&t[Kt]||(t[Kt]=++Gt)})(this)},$t.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Yt=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Jt=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Zt(t){return Array.prototype.concat.apply([],arguments)}function te(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function ee(t){return/^[\s\xa0]*$/.test(t)}var ne,re=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function ie(t,e){return-1!=t.indexOf(e)}function oe(t,e){return t<e?-1:t>e?1:0}t:{var se=Ut.navigator;if(se){var ae=se.userAgent;if(ae){ne=ae;break t}}ne=""}function ue(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function ce(t){var e={};for(var n in t)e[n]=t[n];return e}var he="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function le(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<he.length;o++)n=he[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function fe(t){return fe[" "](t),t}fe[" "]=jt;var pe,de,ve=ie(ne,"Opera"),ge=ie(ne,"Trident")||ie(ne,"MSIE"),me=ie(ne,"Edge"),ye=me||ge,be=ie(ne,"Gecko")&&!(ie(ne.toLowerCase(),"webkit")&&!ie(ne,"Edge"))&&!(ie(ne,"Trident")||ie(ne,"MSIE"))&&!ie(ne,"Edge"),we=ie(ne.toLowerCase(),"webkit")&&!ie(ne,"Edge");function Ie(){var t=Ut.document;return t?t.documentMode:void 0}t:{var Te="",Ee=(de=ne,be?/rv:([^\);]+)(\)|;)/.exec(de):me?/Edge\/([\d\.]+)/.exec(de):ge?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(de):we?/WebKit\/(\S+)/.exec(de):ve?/(?:Version)[ \/]?(\S+)/.exec(de):void 0);if(Ee&&(Te=Ee?Ee[1]:""),ge){var Se=Ie();if(null!=Se&&Se>parseFloat(Te)){pe=String(Se);break t}}pe=Te}var _e,Ae={};function Ne(){return t=function(){for(var t=0,e=re(String(pe)).split("."),n=re("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=oe(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||oe(0==o[2].length,0==s[2].length)||oe(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t},e=Ae,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9);var t,e}if(Ut.document&&ge){var ke=Ie();_e=ke||(parseInt(pe,10)||void 0)}else _e=void 0;var De=_e,Ce=function(){if(!Ut.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Ut.addEventListener("test",jt,e),Ut.removeEventListener("test",jt,e)}catch(t){}return t}();function Oe(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function Re(t,e){if(Oe.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(be){t:{try{fe(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Pe[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Re.Z.h.call(this)}}Oe.prototype.h=function(){this.defaultPrevented=!0},Xt(Re,Oe);var Pe={2:"touch",3:"pen",4:"mouse"};Re.prototype.h=function(){Re.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var xe="closure_listenable_"+(1e6*Math.random()|0),Le=0;function Me(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++Le,this.ca=this.fa=!1}function Fe(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Ve(t){this.src=t,this.g={},this.h=0}function Ue(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=Yt(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Fe(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function je(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}Ve.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var s=je(t,e,r,i);return-1<s?(e=t[s],n||(e.fa=!1)):((e=new Me(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var qe="closure_lm_"+(1e6*Math.random()|0),Be={};function Ke(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}r=$e(r);return e&&e[xe]?e.O(n,r,Bt(i)?!!i.capture:!!i,o):Ge(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Ke(t,e[o],n,r,i);return null}return n=$e(n),t&&t[xe]?t.N(e,n,Bt(r)?!!r.capture:!!r,i):Ge(t,e,n,!1,r,i)}function Ge(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Bt(i)?!!i.capture:!!i,a=Qe(t);if(a||(t[qe]=a=new Ve(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=We;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Ce||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(ze(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function He(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[xe])Ue(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(ze(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Qe(e))?(Ue(n,t),0==n.h&&(n.src=null,e[qe]=null)):Fe(t)}}}function ze(t){return t in Be?Be[t]:Be[t]="on"+t}function We(t,e){if(t.ca)t=!0;else{e=new Re(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&He(t),t=n.call(r,e)}return t}function Qe(t){return(t=t[qe])instanceof Ve?t:null}var Xe="__closure_events_fn_"+(1e9*Math.random()>>>0);function $e(t){return"function"==typeof t?t:(t[Xe]||(t[Xe]=function(e){return t.handleEvent(e)}),t[Xe])}function Ye(){$t.call(this),this.i=new Ve(this),this.P=this,this.I=null}function Je(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new Oe(e,t);else if(e instanceof Oe)e.target=e.target||t;else{var i=e;le(e=new Oe(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=Ze(s,r,!0,e)&&i}if(i=Ze(s=e.g=t,r,!0,e)&&i,i=Ze(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Ze(s=e.g=n[o],r,!1,e)&&i}function Ze(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ca&&s.capture==n){var a=s.listener,u=s.ia||s.src;s.fa&&Ue(t.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Xt(Ye,$t),Ye.prototype[xe]=!0,Ye.prototype.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=Bt(i)?!!i.capture:!!i,r=$e(r),e&&e[xe]?(e=e.i,(n=String(n).toString())in e.g&&-1<(r=je(s=e.g[n],r,i,o))&&(Fe(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.g[n],e.h--))):e&&(e=Qe(e))&&(n=e.g[n.toString()],e=-1,n&&(e=je(n,r,i,o)),(r=-1<e?n[e]:null)&&He(r))}(this,t,e,n,r)},Ye.prototype.M=function(){if(Ye.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)Fe(n[r]);delete e.g[t],e.h--}}this.I=null},Ye.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},Ye.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var tn=Ut.JSON.stringify;function en(){var t=hn,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var nn,rn=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=on.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),on=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},t}())(function(){return new sn},function(t){return t.reset()}),sn=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function an(t){Ut.setTimeout(function(){throw t},0)}function un(t,e){nn||function(){var t=Ut.Promise.resolve(void 0);nn=function(){t.then(ln)}}(),cn||(nn(),cn=!0),hn.add(t,e)}var cn=!1,hn=new rn;function ln(){for(var t;t=en();){try{t.h.call(t.g)}catch(t){an(t)}var e=on;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}cn=!1}function fn(t,e){Ye.call(this),this.h=t||1,this.g=e||Ut,this.j=Wt(this.kb,this),this.l=Date.now()}function pn(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function dn(t,e,n){if("function"==typeof t)n&&(t=Wt(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Wt(t.handleEvent,t)}return 2147483647<Number(e)?-1:Ut.setTimeout(t,e||0)}Xt(fn,Ye),(Mt=fn.prototype).da=!1,Mt.S=null,Mt.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Je(this,"tick"),this.da&&(pn(this),this.start()))}},Mt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Mt.M=function(){fn.Z.M.call(this),pn(this),delete this.g};var vn=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}xt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:function t(e){e.g=dn(function(){e.g=null,e.i&&(e.i=!1,t(e))},e.j);var n=e.h;e.h=null,e.m.apply(null,n)}(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(Ut.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}($t);function gn(t){$t.call(this),this.h=t,this.g={}}Xt(gn,$t);var mn=[];function yn(t,e,n,r){Array.isArray(n)||(n&&(mn[0]=n.toString()),n=mn);for(var i=0;i<n.length;i++){var o=Ke(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function bn(t){ue(t.g,function(t,e){this.g.hasOwnProperty(e)&&He(t)},t),t.g={}}function wn(){this.g=!0}function In(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return tn(n)}catch(t){return e}}(t,n)+(r?" "+r:"")})}gn.prototype.M=function(){gn.Z.M.call(this),bn(this)},gn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},wn.prototype.Aa=function(){this.g=!1},wn.prototype.info=function(){};var Tn={},En=null;function Sn(){return En=En||new Ye}function _n(t){Oe.call(this,Tn.Ma,t)}function An(t){var e=Sn();Je(e,new _n(e,t))}function Nn(t,e){Oe.call(this,Tn.STAT_EVENT,t),this.stat=e}function kn(t){var e=Sn();Je(e,new Nn(e,t))}function Dn(t,e){Oe.call(this,Tn.Na,t),this.size=e}function Cn(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Ut.setTimeout(function(){t()},e)}Tn.Ma="serverreachability",Xt(_n,Oe),Tn.STAT_EVENT="statevent",Xt(Nn,Oe),Tn.Na="timingevent",Xt(Dn,Oe);var On={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Rn={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Pn(){}function xn(t){return t.h||(t.h=t.i())}function Ln(){}Pn.prototype.h=null;var Mn,Fn={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Vn(){Oe.call(this,"d")}function Un(){Oe.call(this,"c")}function jn(){}function qn(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new gn(this),this.P=Kn,t=ye?125:void 0,this.W=new fn(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Bn}function Bn(){this.i=null,this.g="",this.h=!1}Xt(Vn,Oe),Xt(Un,Oe),Xt(jn,Pn),jn.prototype.g=function(){return new XMLHttpRequest},jn.prototype.i=function(){return{}},Mn=new jn;var Kn=45e3,Gn={},Hn={};function zn(t,e,n){t.K=1,t.v=vr(cr(e)),t.s=n,t.U=!0,Wn(t,null)}function Wn(t,e){t.F=Date.now(),Yn(t),t.A=cr(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),kr(n.h,"t",r),t.C=0,n=t.l.H,t.h=new Bn,t.g=Di(t.l,n?e:null,!t.s),0<t.O&&(t.L=new vn(Wt(t.Ia,t,t.g),t.O)),yn(t.V,t.g,"readystatechange",t.gb),e=t.H?ce(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),An(1),function(t,e,n,r,i,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var h=c[0];c=c[1];var l=h.split("_");s=2<=l.length&&"type"==l[1]?s+(h+"=")+c+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.j,t.u,t.A,t.m,t.X,t.s)}function Qn(t){return!!t.g&&("GET"==t.u&&2!=t.K&&t.l.Ba)}function Xn(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=$n(t,n))==Hn){4==e&&(t.o=4,kn(14),i=!1),In(t.j,t.m,null,"[Incomplete Response]");break}if(r==Gn){t.o=4,kn(15),In(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}In(t.j,t.m,r,null),nr(t,r)}Qn(t)&&r!=Hn&&r!=Gn&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,kn(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ii(e),e.L=!0,kn(11))):(In(t.j,t.m,n,"[Invalid Chunked Response]"),er(t),tr(t))}function $n(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?Hn:(n=Number(e.substring(n,r)),isNaN(n)?Gn:(r+=1)+n>e.length?Hn:(e=e.substr(r,n),t.C=r+n,e))}function Yn(t){t.Y=Date.now()+t.P,Jn(t,t.P)}function Jn(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Cn(Wt(t.eb,t),e)}function Zn(t){t.B&&(Ut.clearTimeout(t.B),t.B=null)}function tr(t){0==t.l.G||t.I||Si(t.l,t)}function er(t){Zn(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,pn(t.W),bn(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function nr(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||Lr(n.i,t)))if(n.I=t.N,!t.J&&Lr(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;Ei(n),fi(n)}wi(n),kn(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Cn(Wt(n.ab,n),6e3));if(1>=xr(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else Ai(n,11)}else if((t.J||n.g==t)&&Ei(n),!ee(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var s=o[3];null!=s&&(n.ma=s,n.h.info("VER="+n.ma));var a=o[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var h=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var l=r.i;!l.g&&(ie(h,"spdy")||ie(h,"quic")||ie(h,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(Mr(l,l.h),l.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,dr(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var p=t;if((r=n).oa=ki(r,r.H?r.la:null,r.W),p.J){Fr(r.i,p);var d=p,v=r.K;v&&d.setTimeout(v),d.B&&(Zn(d),Yn(d)),r.g=p}else bi(r);0<n.l.length&&vi(n)}else"stop"!=o[0]&&"close"!=o[0]||Ai(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?Ai(n,7):li(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}An(4)}catch(o){}}function rr(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(qt(t)||"string"==typeof t)Jt(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(qt(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(qt(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function ir(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof ir)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function or(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];sr(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)sr(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function sr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Mt=qn.prototype).setTimeout=function(t){this.P=t},Mt.gb=function(t){t=t.target;var e=this.L;e&&3==si(t)?e.l():this.Ia(t)},Mt.Ia=function(t){try{if(t==this.g)t:{var e=si(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||ye||this.g&&(this.h.h||this.g.ga()||ai(this.g)))){this.I||4!=e||7==n||An(8==n||0>=r?3:2),Zn(this);var i=this.g.ba();this.N=i;e:if(Qn(this)){var o=ai(this.g);t="";var s=o.length,a=4==si(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){er(this),tr(this);var u="";break e}this.h.i=new Ut.TextDecoder}for(n=0;n<s;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:a&&n==s-1});o.splice(0,s),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,h=this.g;if((c=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ee(c)){var l=c;break e}}l=null}if(!(i=l)){this.i=!1,this.o=3,kn(12),er(this),tr(this);break t}In(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,nr(this,i)}this.U?(Xn(this,e,u),ye&&this.i&&3==e&&(yn(this.V,this.W,"tick",this.fb),this.W.start())):(In(this.j,this.m,u,null),nr(this,u)),4==e&&er(this),this.i&&!this.I&&(4==e?Si(this.l,this):(this.i=!1,Yn(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,kn(12)):(this.o=0,kn(13)),er(this),tr(this)}}}catch(e){}},Mt.fb=function(){if(this.g){var t=si(this.g),e=this.g.ga();this.C<e.length&&(Zn(this),Xn(this,t,e),this.i&&4!=t&&Yn(this))}},Mt.cancel=function(){this.I=!0,er(this)},Mt.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(An(3),kn(17)),er(this),this.o=2,tr(this)):Jn(this,this.Y-t)},(Mt=ir.prototype).R=function(){or(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},Mt.T=function(){return or(this),this.g.concat()},Mt.get=function(t,e){return sr(this.h,t)?this.h[t]:e},Mt.set=function(t,e){sr(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},Mt.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var ar=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ur(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof ur){this.g=void 0!==e?e:t.g,hr(this,t.j),this.s=t.s,lr(this,t.i),fr(this,t.m),this.l=t.l,e=t.h;var n=new Sr;n.i=e.i,e.g&&(n.g=new ir(e.g),n.h=e.h),pr(this,n),this.o=t.o}else t&&(n=String(t).match(ar))?(this.g=!!e,hr(this,n[1]||"",!0),this.s=gr(n[2]||""),lr(this,n[3]||"",!0),fr(this,n[4]),this.l=gr(n[5]||"",!0),pr(this,n[6]||"",!0),this.o=gr(n[7]||"")):(this.g=!!e,this.h=new Sr(null,this.g))}function cr(t){return new ur(t)}function hr(t,e,n){t.j=n?gr(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function lr(t,e,n){t.i=n?gr(e,!0):e}function fr(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function pr(t,e,n){e instanceof Sr?(t.h=e,function(t,e){e&&!t.j&&(_r(t),t.i=null,t.g.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Ar(this,e),kr(this,n,t))},t)),t.j=e}(t.h,t.g)):(n||(e=mr(e,Tr)),t.h=new Sr(e,t.g))}function dr(t,e,n){t.h.set(e,n)}function vr(t){return dr(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function gr(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function mr(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,yr),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function yr(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}ur.prototype.toString=function(){var t=[],e=this.j;e&&t.push(mr(e,br,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(mr(e,br,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(mr(n,"/"==n.charAt(0)?Ir:wr,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",mr(n,Er)),t.join("")};var br=/[#\/\?@]/g,wr=/[#\?:]/g,Ir=/[#\?]/g,Tr=/[#\?@]/g,Er=/#/g;function Sr(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function _r(t){t.g||(t.g=new ir,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Ar(t,e){_r(t),e=Dr(t,e),sr(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,sr((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&or(t)))}function Nr(t,e){return _r(t),e=Dr(t,e),sr(t.g.h,e)}function kr(t,e,n){Ar(t,e),0<n.length&&(t.i=null,t.g.set(Dr(t,e),te(n)),t.h+=n.length)}function Dr(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(Mt=Sr.prototype).add=function(t,e){_r(this),this.i=null,t=Dr(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},Mt.forEach=function(t,e){_r(this),this.g.forEach(function(n,r){Jt(n,function(n){t.call(e,n,r,this)},this)},this)},Mt.T=function(){_r(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Mt.R=function(t){_r(this);var e=[];if("string"==typeof t)Nr(this,t)&&(e=Zt(e,this.g.get(Dr(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=Zt(e,t[n])}return e},Mt.set=function(t,e){return _r(this),this.i=null,Nr(this,t=Dr(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},Mt.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},Mt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.i=t.join("&")};var Cr=function(){return function(t,e){this.h=t,this.g=e}}();function Or(t){this.l=t||Rr,Ut.PerformanceNavigationTiming?t=0<(t=Ut.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(Ut.g&&Ut.g.Ea&&Ut.g.Ea()&&Ut.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Rr=10;function Pr(t){return!!t.h||!!t.g&&t.g.size>=t.j}function xr(t){return t.h?1:t.g?t.g.size:0}function Lr(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function Mr(t,e){t.g?t.g.add(e):t.h=e}function Fr(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Vr(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=Lt(t.g.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.D)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return te(t.i)}function Ur(){}function jr(){this.g=new Ur}function qr(t,e,n){var r=n||"";try{rr(t,function(t,n){var i=t;Bt(t)&&(i=tn(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function Br(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}function Kr(t){this.l=t.$b||null,this.j=t.ib||!1}function Gr(t,e){Ye.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Hr,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Or.prototype.cancel=function(){var t,e;if(this.i=Vr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=Lt(this.g.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},Ur.prototype.stringify=function(t){return Ut.JSON.stringify(t,void 0)},Ur.prototype.parse=function(t){return Ut.JSON.parse(t,void 0)},Xt(Kr,Pn),Kr.prototype.g=function(){return new Gr(this.l,this.j)},Kr.prototype.i=function(t){return function(){return t}}({}),Xt(Gr,Ye);var Hr=0;function zr(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function Wr(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Qr(t)}function Qr(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(Mt=Gr.prototype).open=function(t,e){if(this.readyState!=Hr)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Qr(this)},Mt.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Ut).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Mt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Wr(this)),this.readyState=Hr},Mt.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Qr(this)),this.g&&(this.readyState=3,Qr(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Ut.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;zr(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},Mt.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Wr(this):Qr(this),3==this.readyState&&zr(this)}},Mt.Ua=function(t){this.g&&(this.response=this.responseText=t,Wr(this))},Mt.Ta=function(t){this.g&&(this.response=t,Wr(this))},Mt.ha=function(){this.g&&Wr(this)},Mt.setRequestHeader=function(t,e){this.v.append(t,e)},Mt.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},Mt.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Gr.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Xr=Ut.JSON.parse;function $r(t){Ye.call(this),this.headers=new ir,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Yr,this.K=this.L=!1}Xt($r,Ye);var Yr="",Jr=/^https?$/i,Zr=["POST","PUT"];function ti(t){return"content-type"==t.toLowerCase()}function ei(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,ni(t),ii(t)}function ni(t){t.D||(t.D=!0,Je(t,"complete"),Je(t,"error"))}function ri(t){if(t.h&&void 0!==Vt&&(!t.C[1]||4!=si(t)||2!=t.ba()))if(t.v&&4==si(t))dn(t.Fa,0,t);else if(Je(t,"readystatechange"),4==si(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(ar)[1]||null;if(!o&&Ut.self&&Ut.self.location){var s=Ut.self.location.protocol;o=s.substr(0,s.length-1)}i=!Jr.test(o?o.toLowerCase():"")}e=i}if(e)Je(t,"complete"),Je(t,"success");else{t.m=6;try{var a=2<si(t)?t.g.statusText:""}catch(t){a=""}t.j=a+" ["+t.ba()+"]",ni(t)}}finally{ii(t)}}}function ii(t,e){if(t.g){oi(t);var n=t.g,r=t.C[0]?jt:null;t.g=null,t.C=null,e||Je(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function oi(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Ut.clearTimeout(t.A),t.A=null)}function si(t){return t.g?t.g.readyState:0}function ai(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Yr:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function ui(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return ue(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):dr(t,e,n))}function ci(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function hi(t){this.za=0,this.l=[],this.h=new wn,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=ci("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=ci("baseRetryDelayMs",5e3,t),this.$a=ci("retryDelaySeedMs",1e4,t),this.Ya=ci("forwardChannelMaxRetries",2,t),this.ra=ci("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new Or(t&&t.concurrentRequestLimit),this.Ca=new jr,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function li(t){if(pi(t),3==t.G){var e=t.V++,n=cr(t.F);dr(n,"SID",t.J),dr(n,"RID",e),dr(n,"TYPE","terminate"),mi(t,n),(e=new qn(t,t.h,e,void 0)).K=2,e.v=vr(cr(n)),n=!1,Ut.navigator&&Ut.navigator.sendBeacon&&(n=Ut.navigator.sendBeacon(e.v.toString(),"")),!n&&Ut.Image&&((new Image).src=e.v,n=!0),n||(e.g=Di(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Yn(e)}Ni(t)}function fi(t){t.g&&(Ii(t),t.g.cancel(),t.g=null)}function pi(t){fi(t),t.u&&(Ut.clearTimeout(t.u),t.u=null),Ei(t),t.i.cancel(),t.m&&("number"==typeof t.m&&Ut.clearTimeout(t.m),t.m=null)}function di(t,e){t.l.push(new Cr(t.Za++,e)),3==t.G&&vi(t)}function vi(t){Pr(t.i)||t.m||(t.m=!0,un(t.Ha,t),t.C=0)}function gi(t,e){var n;n=e?e.m:t.V++;var r=cr(t.F);dr(r,"SID",t.J),dr(r,"RID",n),dr(r,"AID",t.U),mi(t,r),t.o&&t.s&&ui(r,t.o,t.s),n=new qn(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=yi(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),Mr(t.i,n),zn(n,r,e)}function mi(t,e){t.j&&rr({},function(t,n){dr(e,n,t)})}function yi(t,e,n){n=Math.min(t.l.length,n);var r=t.j?Wt(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].h,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].h,h=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),a=!1;else try{qr(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function bi(t){t.g||t.u||(t.Y=1,un(t.Ga,t),t.A=0)}function wi(t){return!(t.g||t.u||3<=t.A)&&(t.Y++,t.u=Cn(Wt(t.Ga,t),_i(t,t.A)),t.A++,!0)}function Ii(t){null!=t.B&&(Ut.clearTimeout(t.B),t.B=null)}function Ti(t){t.g=new qn(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=cr(t.oa);dr(e,"RID","rpc"),dr(e,"SID",t.J),dr(e,"CI",t.N?"0":"1"),dr(e,"AID",t.U),mi(t,e),dr(e,"TYPE","xmlhttp"),t.o&&t.s&&ui(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=vr(cr(e)),n.s=null,n.U=!0,Wn(n,t)}function Ei(t){null!=t.v&&(Ut.clearTimeout(t.v),t.v=null)}function Si(t,e){var n=null;if(t.g==e){Ei(t),Ii(t),t.g=null;var r=2}else{if(!Lr(t.i,e))return;n=e.D,Fr(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;Je(r=Sn(),new Dn(r,n,e,i)),vi(t)}else bi(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(xr(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=Cn(Wt(t.Ha,t,e),_i(t,t.C)),t.C++,0)))}(t,e)||2==r&&wi(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Ai(t,5);break;case 4:Ai(t,10);break;case 3:Ai(t,6);break;default:Ai(t,2)}}function _i(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function Ai(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=Wt(t.jb,t);n||(n=new ur("//www.google.com/images/cleardot.gif"),Ut.location&&"http"==Ut.location.protocol||hr(n,"https"),vr(n)),function(t,e){var n=new wn;if(Ut.Image){var r=new Image;r.onload=Qt(Br,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Qt(Br,n,r,"TestLoadImage: error",!1,e),r.onabort=Qt(Br,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Qt(Br,n,r,"TestLoadImage: timeout",!1,e),Ut.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else kn(2);t.G=0,t.j&&t.j.va(e),Ni(t),pi(t)}function Ni(t){t.G=0,t.I=-1,t.j&&(0==Vr(t.i).length&&0==t.l.length||(t.i.i.length=0,te(t.l),t.l.length=0),t.j.ua())}function ki(t,e,n){var r=function(t){return t instanceof ur?cr(t):new ur(t,void 0)}(n);if(""!=r.i)e&&lr(r,e+"."+r.i),fr(r,r.m);else{var i=Ut.location;r=function(t,e,n,r){var i=new ur(null,void 0);return t&&hr(i,t),e&&lr(i,e),n&&fr(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&ue(t.aa,function(t,e){dr(r,e,t)}),e=t.D,n=t.sa,e&&n&&dr(r,e,n),dr(r,"VER",t.ma),mi(t,r),r}function Di(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new $r(new Kr({ib:!0})):new $r(t.qa)).L=t.H,e}function Ci(){}function Oi(){if(ge&&!(10<=Number(De)))throw Error("Environmental error: no available transport.")}function Ri(t,e){Ye.call(this),this.g=new hi(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!ee(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ee(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new Li(this)}function Pi(t){Vn.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function xi(){Un.call(this),this.status=1}function Li(t){this.g=t}(Mt=$r.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Mn.g(),this.C=this.u?xn(this.u):xn(Mn),this.g.onreadystatechange=Wt(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(t){return void ei(this,t)}t=n||"";var i=new ir(this.headers);r&&rr(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=ti,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=Ut.FormData&&t instanceof Ut.FormData,!(0<=Yt(Zr,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.g.setRequestHeader(e,t)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{oi(this),0<this.B&&((this.K=function(t){return ge&&Ne()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Wt(this.pa,this)):this.A=dn(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){ei(this,t)}},Mt.pa=function(){void 0!==Vt&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Je(this,"timeout"),this.abort(8))},Mt.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Je(this,"complete"),Je(this,"abort"),ii(this))},Mt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ii(this,!0)),$r.Z.M.call(this)},Mt.Fa=function(){this.s||(this.F||this.v||this.l?ri(this):this.cb())},Mt.cb=function(){ri(this)},Mt.ba=function(){try{return 2<si(this)?this.g.status:-1}catch(t){return-1}},Mt.ga=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},Mt.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Xr(e)}},Mt.Da=function(){return this.m},Mt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Mt=hi.prototype).ma=8,Mt.G=1,Mt.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(t){}},Mt.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new qn(this,this.h,t,void 0),n=this.s;if(this.P&&(n?le(n=ce(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=yi(this,e,r),dr(i=cr(this.F),"RID",t),dr(i,"CVER",22),this.D&&dr(i,"X-HTTP-Session-Id",this.D),mi(this,i),this.o&&n&&ui(i,this.o,n),Mr(this.i,e),this.Ra&&dr(i,"TYPE","init"),this.ja?(dr(i,"$req",r),dr(i,"SID","null"),e.$=!0,zn(e,i,null)):zn(e,i,r),this.G=2}}else 3==this.G&&(t?gi(this,t):0==this.l.length||Pr(this.i)||gi(this))},Mt.Ga=function(){if(this.u=null,Ti(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=Cn(Wt(this.bb,this),t)}},Mt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,kn(10),fi(this),Ti(this))},Mt.ab=function(){null!=this.v&&(this.v=null,fi(this),wi(this),kn(19))},Mt.jb=function(t){t?(this.h.info("Successfully pinged google.com"),kn(2)):(this.h.info("Failed to ping google.com"),kn(1))},(Mt=Ci.prototype).xa=function(){},Mt.wa=function(){},Mt.va=function(){},Mt.ua=function(){},Mt.Oa=function(){},Oi.prototype.g=function(t,e){return new Ri(t,e)},Xt(Ri,Ye),Ri.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),un(Wt(t.hb,t,e))),kn(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=ki(t,null,t.W),vi(t)},Ri.prototype.close=function(){li(this.g)},Ri.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,di(this.g,e)}else this.v?((e={}).__data__=tn(t),di(this.g,e)):di(this.g,t)},Ri.prototype.M=function(){this.g.j=null,delete this.j,li(this.g),delete this.g,Ri.Z.M.call(this)},Xt(Pi,Vn),Xt(xi,Un),Xt(Li,Ci),Li.prototype.xa=function(){Je(this.g,"a")},Li.prototype.wa=function(t){Je(this.g,new Pi(t))},Li.prototype.va=function(t){Je(this.g,new xi(t))},Li.prototype.ua=function(){Je(this.g,"b")},Oi.prototype.createWebChannel=Oi.prototype.g,Ri.prototype.send=Ri.prototype.u,Ri.prototype.open=Ri.prototype.m,Ri.prototype.close=Ri.prototype.close,On.NO_ERROR=0,On.TIMEOUT=8,On.HTTP_ERROR=6,Rn.COMPLETE="complete",Ln.EventType=Fn,Fn.OPEN="a",Fn.CLOSE="b",Fn.ERROR="c",Fn.MESSAGE="d",Ye.prototype.listen=Ye.prototype.N,$r.prototype.listenOnce=$r.prototype.O,$r.prototype.getLastError=$r.prototype.La,$r.prototype.getLastErrorCode=$r.prototype.Da,$r.prototype.getStatus=$r.prototype.ba,$r.prototype.getResponseJson=$r.prototype.Qa,$r.prototype.getResponseText=$r.prototype.ga,$r.prototype.send=$r.prototype.ea;var Mi=On,Fi=Rn,Vi=Tn,Ui=10,ji=11,qi=Kr,Bi=Ln,Ki=$r,Gi=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Gi.o=-1;var Hi={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},zi=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return M(e,t),e}(Error),Wi=new gt("@firebase/firestore");function Qi(){return Wi.logLevel}function Xi(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Wi.logLevel<=ct.DEBUG){var r=e.map(Ji);Wi.debug.apply(Wi,B(["Firestore (8.8.1): "+t],r))}}function $i(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Wi.logLevel<=ct.ERROR){var r=e.map(Ji);Wi.error.apply(Wi,B(["Firestore (8.8.1): "+t],r))}}function Yi(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Wi.logLevel<=ct.WARN){var r=e.map(Ji);Wi.warn.apply(Wi,B(["Firestore (8.8.1): "+t],r))}}function Ji(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function Zi(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.8.1) INTERNAL ASSERTION FAILED: "+t;throw $i(e),new Error(e)}function to(t,e){t||Zi()}function eo(t,e){return t}function no(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var ro=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=no(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function io(t,e){return t<e?-1:t>e?1:0}function oo(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function so(t){return t+"\0"}var ao=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new zi(Hi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new zi(Hi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new zi(Hi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new zi(Hi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?io(this.nanoseconds,t.nanoseconds):io(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),uo=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new ao(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function co(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ho(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function lo(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var fo=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Zi(),void 0===n?n=t.length-e:n>t.length-e&&Zi(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),po=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new zi(Hi.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(fo),vo=/^[_a-zA-Z][_a-zA-Z0-9]*$/,go=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return vo.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new zi(Hi.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new zi(Hi.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new zi(Hi.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new zi(Hi.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(fo),mo=function(){function t(t){this.fields=t,t.sort(go.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return oo(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),yo=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return io(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();yo.EMPTY_BYTE_STRING=new yo("");var bo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wo(t){if(to(!!t),"string"==typeof t){var e=0,n=bo.exec(t);if(to(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Io(t.seconds),nanos:Io(t.nanos)}}function Io(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function To(t){return"string"==typeof t?yo.fromBase64String(t):yo.fromUint8Array(t)}function Eo(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function So(t){var e=wo(t.mapValue.fields.__local_write_time__.timestampValue);return new ao(e.seconds,e.nanos)}function _o(t){return null==t}function Ao(t){return 0===t&&1/t==-1/0}function No(t){return"number"==typeof t&&Number.isInteger(t)&&!Ao(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var ko=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(po.fromString(e))},t.fromName=function(e){return new t(po.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===po.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return po.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new po(e.slice()))},t}();function Do(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Eo(t)?4:10:Zi()}function Co(t,e){var n=Do(t);if(n!==Do(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return So(t).isEqual(So(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=wo(t.timestampValue),r=wo(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return To(t.bytesValue).isEqual(To(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Io(t.geoPointValue.latitude)===Io(e.geoPointValue.latitude)&&Io(t.geoPointValue.longitude)===Io(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Io(t.integerValue)===Io(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Io(t.doubleValue),r=Io(e.doubleValue);return n===r?Ao(n)===Ao(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return oo(t.arrayValue.values||[],e.arrayValue.values||[],Co);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(co(n)!==co(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Co(n[i],r[i])))return!1;return!0}(t,e);default:return Zi()}}function Oo(t,e){return void 0!==(t.values||[]).find(function(t){return Co(t,e)})}function Ro(t,e){var n=Do(t),r=Do(e);if(n!==r)return io(n,r);switch(n){case 0:return 0;case 1:return io(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Io(t.integerValue||t.doubleValue),r=Io(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Po(t.timestampValue,e.timestampValue);case 4:return Po(So(t),So(e));case 5:return io(t.stringValue,e.stringValue);case 6:return function(t,e){var n=To(t),r=To(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=io(n[i],r[i]);if(0!==o)return o}return io(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=io(Io(t.latitude),Io(e.latitude));return 0!==n?n:io(Io(t.longitude),Io(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Ro(n[i],r[i]);if(o)return o}return io(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=io(r[s],o[s]);if(0!==a)return a;var u=Ro(n[r[s]],i[o[s]]);if(0!==u)return u}return io(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Zi()}}function Po(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return io(t,e);var n=wo(t),r=wo(e),i=io(n.seconds,r.seconds);return 0!==i?i:io(n.nanos,r.nanos)}function xo(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=wo(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?To(e.bytesValue).toBase64():"referenceValue"in e?(r=e.referenceValue,ko.fromName(r).toString()):"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,o=e.values||[];i<o.length;i++)r?r=!1:n+=",",n+=t(o[i]);return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var s=o[i];r?r=!1:n+=",",n+=s+":"+t(e.fields[s])}return n+"}"}(e.mapValue):Zi();var n,r}(t)}function Lo(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Mo(t){return!!t&&"integerValue"in t}function Fo(t){return!!t&&"arrayValue"in t}function Vo(t){return!!t&&"nullValue"in t}function Uo(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function jo(t){return!!t&&"mapValue"in t}function qo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return ho(t.mapValue.fields,function(t,n){return e.mapValue.fields[t]=qo(n)}),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=qo(t.arrayValue.values[r]);return n}return Object.assign({},t)}var Bo=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!jo(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=qo(e)},t.prototype.setAll=function(t){var e=this,n=go.emptyPath(),r={},i=[];t.forEach(function(t,o){if(!n.isImmediateParentOf(o)){var s=e.getFieldsMap(n);e.applyChanges(s,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=qo(t):i.push(o.lastSegment())});var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());jo(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return Co(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];jo(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){ho(e,function(e,n){return t[e]=n});for(var r=0,i=n;r<i.length;r++){var o=i[r];delete t[o]}},t.prototype.clone=function(){return new t(qo(this.value))},t}();function Ko(t){var e=[];return ho(t.fields,function(t,n){var r=new go([t]);if(jo(n)){var i=Ko(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var a=s[o];e.push(r.child(a))}}else e.push(r)}),new mo(e)}var Go=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,uo.min(),Bo.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Bo.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Bo.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Bo.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Bo.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Ho=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function zo(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Ho(t,e,n,r,i,o,s)}function Wo(t){var e=eo(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+xo(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),_o(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=ss(e.startAt)),e.endAt&&(n+="|ub:",n+=ss(e.endAt)),e.h=n}return e.h}function Qo(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!us(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!Co(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!hs(t.startAt,e.startAt)&&hs(t.endAt,e.endAt)}function Xo(t){return ko.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var $o=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return M(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Yo(t,n,r):"array-contains"===n?new es(t,r):"in"===n?new ns(t,r):"not-in"===n?new rs(t,r):"array-contains-any"===n?new is(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Jo(t,n):new Zo(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Ro(e,this.value)):null!==e&&Do(this.value)===Do(e)&&this.m(Ro(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Zi()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Yo=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=ko.fromName(r.referenceValue),i}return M(e,t),e.prototype.matches=function(t){var e=ko.comparator(t.key,this.key);return this.m(e)},e}($o),Jo=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=ts("in",n),r}return M(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}($o),Zo=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=ts("not-in",n),r}return M(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}($o);function ts(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return ko.fromName(t.referenceValue)})}var es=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return M(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return Fo(e)&&Oo(e.arrayValue,this.value)},e}($o),ns=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return M(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&Oo(this.value.arrayValue,e)},e}($o),rs=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return M(e,t),e.prototype.matches=function(t){if(Oo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!Oo(this.value.arrayValue,e)},e}($o),is=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return M(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!Fo(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return Oo(e.value.arrayValue,t)})},e}($o),os=function(t,e){this.position=t,this.before=e};function ss(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return xo(t)}).join(",")}var as=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function us(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function cs(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?ko.comparator(ko.fromName(s.referenceValue),n.key):Ro(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function hs(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Co(t.position[n],e.position[n]))return!1;return!0}var ls=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null,this.startAt,this.endAt};function fs(t,e,n,r,i,o,s,a){return new ls(t,e,n,r,i,o,s,a)}function ps(t){return new ls(t)}function ds(t){return!_o(t.limit)&&"F"===t.limitType}function vs(t){return!_o(t.limit)&&"L"===t.limitType}function gs(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function ms(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function ys(t){return null!==t.collectionGroup}function bs(t){var e=eo(t);if(null===e.p){e.p=[];var n=ms(e),r=gs(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new as(n)),e.p.push(new as(go.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new as(go.keyField(),u))}}}return e.p}function ws(t){var e=eo(t);if(!e.T)if("F"===e.limitType)e.T=zo(e.path,e.collectionGroup,bs(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=bs(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new as(o.field,s))}var a=e.endAt?new os(e.endAt.position,!e.endAt.before):null,u=e.startAt?new os(e.startAt.position,!e.startAt.before):null;e.T=zo(e.path,e.collectionGroup,n,e.filters,e.limit,a,u)}return e.T}function Is(t,e,n){return new ls(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ts(t,e){return Qo(ws(t),ws(e))&&t.limitType===e.limitType}function Es(t){return Wo(ws(t))+"|lt:"+t.limitType}function Ss(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+xo(e.value);var e}).join(", ")+"]"),_o(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+ss(t.startAt)),t.endAt&&(e+=", endAt: "+ss(t.endAt)),"Target("+e+")"}(ws(t))+"; limitType="+t.limitType+")"}function _s(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):ko.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!cs(t.startAt,bs(t),e)||t.endAt&&cs(t.endAt,bs(t),e))}(t,e)}function As(t){return function(e,n){for(var r=!1,i=0,o=bs(t);i<o.length;i++){var s=o[i],a=Ns(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function Ns(t,e,n){var r=t.field.isKeyField()?ko.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Ro(r,i):Zi()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Zi()}}function ks(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ao(e)?"-0":e}}function Ds(t){return{integerValue:""+t}}function Cs(t,e){return No(e)?Ds(e):ks(t,e)}var Os=function(){this._=void 0};function Rs(t,e,n){return t instanceof Ls?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Ms?Fs(t,e):t instanceof Vs?Us(t,e):function(t,e){var n=xs(t,e),r=qs(n)+qs(t.A);return Mo(n)&&Mo(t.A)?Ds(r):ks(t.R,r)}(t,e)}function Ps(t,e,n){return t instanceof Ms?Fs(t,e):t instanceof Vs?Us(t,e):n}function xs(t,e){return t instanceof js?Mo(n=e)||n&&"doubleValue"in n?e:{integerValue:0}:null;var n}var Ls=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e}(Os),Ms=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return M(e,t),e}(Os);function Fs(t,e){for(var n=Bs(e),r=function(t){n.some(function(e){return Co(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Vs=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return M(e,t),e}(Os);function Us(t,e){for(var n=Bs(e),r=function(t){n=n.filter(function(e){return!Co(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var js=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return M(e,t),e}(Os);function qs(t){return Io(t.integerValue||t.doubleValue)}function Bs(t){return Fo(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Ks=function(t,e){this.field=t,this.transform=e},Gs=function(t,e){this.version=t,this.transformResults=e},Hs=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function zs(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Ws=function(){};function Qs(t,e,n){t instanceof Zs?function(t,e,n){var r=t.value.clone(),i=na(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof ta?function(t,e,n){if(zs(t.precondition,e)){var r=na(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(ea(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Xs(t,e,n){t instanceof Zs?function(t,e,n){if(zs(t.precondition,e)){var r=t.value.clone(),i=ra(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Js(e),r).setHasLocalMutations()}}(t,e,n):t instanceof ta?function(t,e,n){if(zs(t.precondition,e)){var r=ra(t.fieldTransforms,n,e),i=e.data;i.setAll(ea(t)),i.setAll(r),e.convertToFoundDocument(Js(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){zs(t.precondition,e)&&e.convertToNoDocument(uo.min())}(t,e)}function $s(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=xs(o.transform,s||null);null!=a&&(null==n&&(n=Bo.empty()),n.set(o.field,a))}return n||null}function Ys(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&oo(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Ms&&e instanceof Ms||t instanceof Vs&&e instanceof Vs?oo(t.elements,e.elements,Co):t instanceof js&&e instanceof js?Co(t.A,e.A):t instanceof Ls&&e instanceof Ls}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Js(t){return t.isFoundDocument()?t.version:uo.min()}var Zs=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return M(e,t),e}(Ws),ta=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return M(e,t),e}(Ws);function ea(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function na(t,e,n){var r=new Map;to(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Ps(s,a,n[i]))}return r}function ra(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,Rs(a,u,e))}return r}var ia,oa,sa=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return M(e,t),e}(Ws),aa=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return M(e,t),e}(Ws),ua=function(t){this.count=t};function ca(t){switch(t){case Hi.OK:return Zi();case Hi.CANCELLED:case Hi.UNKNOWN:case Hi.DEADLINE_EXCEEDED:case Hi.RESOURCE_EXHAUSTED:case Hi.INTERNAL:case Hi.UNAVAILABLE:case Hi.UNAUTHENTICATED:return!1;case Hi.INVALID_ARGUMENT:case Hi.NOT_FOUND:case Hi.ALREADY_EXISTS:case Hi.PERMISSION_DENIED:case Hi.FAILED_PRECONDITION:case Hi.ABORTED:case Hi.OUT_OF_RANGE:case Hi.UNIMPLEMENTED:case Hi.DATA_LOSS:return!0;default:return Zi()}}function ha(t){if(void 0===t)return $i("GRPC error has no .code"),Hi.UNKNOWN;switch(t){case ia.OK:return Hi.OK;case ia.CANCELLED:return Hi.CANCELLED;case ia.UNKNOWN:return Hi.UNKNOWN;case ia.DEADLINE_EXCEEDED:return Hi.DEADLINE_EXCEEDED;case ia.RESOURCE_EXHAUSTED:return Hi.RESOURCE_EXHAUSTED;case ia.INTERNAL:return Hi.INTERNAL;case ia.UNAVAILABLE:return Hi.UNAVAILABLE;case ia.UNAUTHENTICATED:return Hi.UNAUTHENTICATED;case ia.INVALID_ARGUMENT:return Hi.INVALID_ARGUMENT;case ia.NOT_FOUND:return Hi.NOT_FOUND;case ia.ALREADY_EXISTS:return Hi.ALREADY_EXISTS;case ia.PERMISSION_DENIED:return Hi.PERMISSION_DENIED;case ia.FAILED_PRECONDITION:return Hi.FAILED_PRECONDITION;case ia.ABORTED:return Hi.ABORTED;case ia.OUT_OF_RANGE:return Hi.OUT_OF_RANGE;case ia.UNIMPLEMENTED:return Hi.UNIMPLEMENTED;case ia.DATA_LOSS:return Hi.DATA_LOSS;default:return Zi()}}(oa=ia||(ia={}))[oa.OK=0]="OK",oa[oa.CANCELLED=1]="CANCELLED",oa[oa.UNKNOWN=2]="UNKNOWN",oa[oa.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oa[oa.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oa[oa.NOT_FOUND=5]="NOT_FOUND",oa[oa.ALREADY_EXISTS=6]="ALREADY_EXISTS",oa[oa.PERMISSION_DENIED=7]="PERMISSION_DENIED",oa[oa.UNAUTHENTICATED=16]="UNAUTHENTICATED",oa[oa.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oa[oa.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oa[oa.ABORTED=10]="ABORTED",oa[oa.OUT_OF_RANGE=11]="OUT_OF_RANGE",oa[oa.UNIMPLEMENTED=12]="UNIMPLEMENTED",oa[oa.INTERNAL=13]="INTERNAL",oa[oa.UNAVAILABLE=14]="UNAVAILABLE",oa[oa.DATA_LOSS=15]="DATA_LOSS";var la=function(){function t(t,e){this.comparator=t,this.root=e||pa.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,pa.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pa.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new fa(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new fa(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new fa(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new fa(this.root,t,this.comparator,!0)},t}(),fa=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),pa=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Zi();if(this.right.isRed())throw Zi();var t=this.left.check();if(t!==this.right.check())throw Zi();return t+(this.isRed()?0:1)},t}();pa.EMPTY=null,pa.RED=!0,pa.BLACK=!1,pa.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Zi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Zi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Zi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Zi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Zi()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new pa(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var da=function(){function t(t){this.comparator=t,this.data=new la(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new va(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new va(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),va=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),ga=new la(ko.comparator);function ma(){return ga}var ya=new la(ko.comparator);function ba(){return ya}var wa=new la(ko.comparator);var Ia=new da(ko.comparator);function Ta(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Ia,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Ea=new da(io);function Sa(){return Ea}var _a=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Aa.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(uo.min(),r,Sa(),ma(),Ta())},t}(),Aa=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(yo.EMPTY_BYTE_STRING,n,Ta(),Ta(),Ta())},t}(),Na=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},ka=function(t,e){this.targetId=t,this.V=e},Da=function(t,e,n,r){void 0===n&&(n=yo.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Ca=function(){function t(){this.S=0,this.D=Pa(),this.C=yo.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=Ta(),e=Ta(),n=Ta();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Zi()}}),new Aa(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=Pa()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),Oa=function(){function t(t){this.W=t,this.G=new Map,this.H=ma(),this.J=Ra(),this.Y=new da(io)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:Zi()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(Xo(i))if(0===n){var o=new ko(i.path);this.tt(e,o,Go.newNoDocument(o,uo.min()))}else to(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var o=e.ot(i);if(o){if(r.current&&Xo(o.target)){var s=new ko(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,Go.newNoDocument(s,t))}r.$&&(n.set(i,r.M()),r.L())}});var r=Ta();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new _a(t,n,this.Y,this.H,r);return this.H=ma(),this.J=Ra(),this.Y=new da(io),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Ca,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new da(io),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Xi("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Ca),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Ra(){return new la(ko.comparator)}function Pa(){return new la(ko.comparator)}var xa={asc:"ASCENDING",desc:"DESCENDING"},La={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ma=function(t,e){this.databaseId=t,this.I=e};function Fa(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Va(t,e){return t.I?e.toBase64():e.toUint8Array()}function Ua(t,e){return Fa(t,e.toTimestamp())}function ja(t){return to(!!t),uo.fromTimestamp(function(t){var e=wo(t);return new ao(e.seconds,e.nanos)}(t))}function qa(t,e){return function(t){return new po(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Ba(t){var e=po.fromString(t);return to(hu(e)),e}function Ka(t,e){return qa(t.databaseId,e.path)}function Ga(t,e){var n=Ba(e);if(n.get(1)!==t.databaseId.projectId)throw new zi(Hi.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new zi(Hi.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ko(Qa(n))}function Ha(t,e){return qa(t.databaseId,e)}function za(t){var e=Ba(t);return 4===e.length?po.emptyPath():Qa(e)}function Wa(t){return new po(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Qa(t){return to(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Xa(t,e,n){return{name:Ka(t,e),fields:n.value.mapValue.fields}}function $a(t,e){var n;if(e instanceof Zs)n={update:Xa(t,e.key,e.value)};else if(e instanceof sa)n={delete:Ka(t,e.key)};else if(e instanceof ta)n={update:Xa(t,e.key,e.data),updateMask:cu(e.fieldMask)};else{if(!(e instanceof aa))return Zi();n={verify:Ka(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof Ls)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ms)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Vs)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof js)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Zi()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Ua(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Zi()}(t,e.precondition)),n}function Ya(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Hs.updateTime(ja(t.updateTime)):void 0!==t.exists?Hs.exists(t.exists):Hs.none()}(e.currentDocument):Hs.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;if("setToServerValue"in e)to("REQUEST_TIME"===e.setToServerValue),n=new Ls;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Ms(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new Vs(i)}else"increment"in e?n=new js(t,e.increment):Zi();var o=go.fromServerFormat(e.fieldPath);return new Ks(o,n)}(t,e)}):[];if(e.update){e.update.name;var i=Ga(t,e.update.name),o=new Bo({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){var e=t.fieldPaths||[];return new mo(e.map(function(t){return go.fromServerFormat(t)}))}(e.updateMask);return new ta(i,o,s,n,r)}return new Zs(i,o,n,r)}if(e.delete){var a=Ga(t,e.delete);return new sa(a,n)}if(e.verify){var u=Ga(t,e.verify);return new aa(u,n)}return Zi()}function Ja(t,e){return{documents:[Ha(t,e.path)]}}function Za(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Ha(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Ha(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(Uo(t.value))return{unaryFilter:{field:ou(t.field),op:"IS_NAN"}};if(Vo(t.value))return{unaryFilter:{field:ou(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Uo(t.value))return{unaryFilter:{field:ou(t.field),op:"IS_NOT_NAN"}};if(Vo(t.value))return{unaryFilter:{field:ou(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ou(t.field),op:iu(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:ou(t.field),direction:ru(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||_o(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=eu(e.startAt)),e.endAt&&(n.structuredQuery.endAt=eu(e.endAt)),n}function tu(t){var e=za(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){to(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=function t(e){return e?void 0!==e.unaryFilter?[uu(e)]:void 0!==e.fieldFilter?[au(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(function(e){return t(e)}).reduce(function(t,e){return t.concat(e)}):Zi():[]}(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new as(su(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return _o(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=nu(n.startAt));var h=null;return n.endAt&&(h=nu(n.endAt)),fs(e,i,a,s,u,"F",c,h)}function eu(t){return{before:t.before,values:t.position}}function nu(t){var e=!!t.before,n=t.values||[];return new os(n,e)}function ru(t){return xa[t]}function iu(t){return La[t]}function ou(t){return{fieldPath:t.canonicalString()}}function su(t){return go.fromServerFormat(t.fieldPath)}function au(t){return $o.create(su(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Zi()}}(t.fieldFilter.op),t.fieldFilter.value)}function uu(t){switch(t.unaryFilter.op){case"IS_NAN":var e=su(t.unaryFilter.field);return $o.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=su(t.unaryFilter.field);return $o.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=su(t.unaryFilter.field);return $o.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=su(t.unaryFilter.field);return $o.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Zi()}}function cu(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function hu(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function lu(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=pu(e)),e=fu(t.get(n),e);return pu(e)}function fu(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function pu(t){return t+""}function du(t){var e=t.length;if(to(e>=2),2===e)return to(""===t.charAt(0)&&""===t.charAt(1)),po.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&Zi(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:Zi()}o=s+2}return new po(r)}var vu=function(t,e){this.seconds=t,this.nanoseconds=e},gu=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};gu.store="owner",gu.key="owner";var mu=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};mu.store="mutationQueues",mu.keyPath="userId";var yu=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};yu.store="mutations",yu.keyPath="batchId",yu.userMutationsIndex="userMutationsIndex",yu.userMutationsKeyPath=["userId","batchId"];var bu=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,lu(e)]},t.key=function(t,e,n){return[t,lu(e),n]},t}();bu.store="documentMutations",bu.PLACEHOLDER=new bu;var wu=function(t,e){this.path=t,this.readTime=e},Iu=function(t,e){this.path=t,this.version=e},Tu=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Tu.store="remoteDocuments",Tu.readTimeIndex="readTimeIndex",Tu.readTimeIndexPath="readTime",Tu.collectionReadTimeIndex="collectionReadTimeIndex",Tu.collectionReadTimeIndexPath=["parentPath","readTime"];var Eu=function(t){this.byteSize=t};Eu.store="remoteDocumentGlobal",Eu.key="remoteDocumentGlobalKey";var Su=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Su.store="targets",Su.keyPath="targetId",Su.queryTargetsIndexName="queryTargetsIndex",Su.queryTargetsKeyPath=["canonicalId","targetId"];var _u=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};_u.store="targetDocuments",_u.keyPath=["targetId","path"],_u.documentTargetsIndex="documentTargetsIndex",_u.documentTargetsKeyPath=["path","targetId"];var Au=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Au.key="targetGlobalKey",Au.store="targetGlobal";var Nu=function(t,e){this.collectionId=t,this.parent=e};Nu.store="collectionParents",Nu.keyPath=["collectionId","parent"];var ku=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};ku.store="clientMetadata",ku.keyPath="clientId";var Du=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Du.store="bundles",Du.keyPath="bundleId";var Cu=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Cu.store="namedQueries",Cu.keyPath="name";var Ou=B(B([],B(B([],B(B([],B(B([],[mu.store,yu.store,bu.store,Tu.store,Su.store,gu.store,Au.store,_u.store]),[ku.store])),[Eu.store])),[Nu.store])),[Du.store,Cu.store]),Ru="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Pu=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),xu=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},Lu=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Zi(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),Mu=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new xu,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Uu(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Gu(e.target.error);n.ft.reject(new Uu(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Uu(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Xi("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new qu(e)},t}(),Fu=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(z())&&$i("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Xi("SimpleDb","Removing database:",t),Bu(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=z(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return V(this,void 0,void 0,function(){var e,n=this;return U(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(Xi("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Uu(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new zi(Hi.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new Uu(t,n))},i.onupgradeneeded=function(t){Xi("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next(function(){Xi("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return V(this,void 0,void 0,function(){var i,o,s,a,u;return U(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,h;return U(this,function(l){switch(l.label){case 0:++o,l.label=1;case 1:return l.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=l.sent(),e=Mu.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),Lu.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(l.sent(),s),u)];case 4:return c=l.sent(),h="FirebaseError"!==c.name&&o<3,Xi("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),a.close(),h?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Vu=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Bu(this.Pt.delete())},t}(),Uu=function(t){function e(e,n){var r=this;return(r=t.call(this,Hi.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return M(e,t),e}(zi);function ju(t){return"IndexedDbTransactionError"===t.name}var qu=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Xi("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Xi("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Bu(n)},t.prototype.add=function(t){return Xi("SimpleDb","ADD",this.store.name,t,t),Bu(this.store.add(t))},t.prototype.get=function(t){var e=this;return Bu(this.store.get(t)).next(function(n){return void 0===n&&(n=null),Xi("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return Xi("SimpleDb","DELETE",this.store.name,t),Bu(this.store.delete(t))},t.prototype.count=function(){return Xi("SimpleDb","COUNT",this.store.name),Bu(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){Xi("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new Lu(function(n,r){e.onerror=function(t){var e=Gu(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new Lu(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Vu(i),s=e(i.primaryKey,i.value,o);if(s instanceof Lu){var a=s.catch(function(t){return o.done(),Lu.reject(t)});n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}}).next(function(){return Lu.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Bu(t){return new Lu(function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Gu(t.target.error);n(e)}})}var Ku=!1;function Gu(t){var e=Fu._t(z());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new zi("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Ku||(Ku=!0,setTimeout(function(){throw r},0)),r}}return t}var Hu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return M(e,t),e}(Pu);function zu(t,e){var n=eo(t);return Fu.It(n.Mt,e)}var Wu=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Qs(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&Xs(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&Xs(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(uo.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Ta())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&oo(this.mutations,t.mutations,function(t,e){return Ys(t,e)})&&oo(this.baseMutations,t.baseMutations,function(t,e){return Ys(t,e)})},t}(),Qu=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){to(e.mutations.length===r.length);for(var i=wa,o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Xu=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=uo.min()),void 0===o&&(o=uo.min()),void 0===s&&(s=yo.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),$u=function(t){this.Lt=t};function Yu(t,e){if(e.document)return function(t,e,n){var r=Ga(t,e.name),i=ja(e.updateTime),o=new Bo({mapValue:{fields:e.fields}}),s=Go.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=ko.fromSegments(e.noDocument.path),r=nc(e.noDocument.readTime),i=Go.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=ko.fromSegments(e.unknownDocument.path);return r=nc(e.unknownDocument.version),Go.newUnknownDocument(o,r)}return Zi()}function Ju(t,e,n){var r=Zu(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:Ka(t,e.key),fields:e.data.value.mapValue.fields,updateTime:Fa(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new Tu(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=ec(e.version);return s=e.hasCommittedMutations,new Tu(null,new wu(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),h=ec(e.version);return new Tu(new Iu(c,h),null,null,!0,r,i)}return Zi()}function Zu(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function tc(t){var e=new ao(t[0],t[1]);return uo.fromTimestamp(e)}function ec(t){var e=t.toTimestamp();return new vu(e.seconds,e.nanoseconds)}function nc(t){var e=new ao(t.seconds,t.nanoseconds);return uo.fromTimestamp(e)}function rc(t,e){for(var n=(e.baseMutations||[]).map(function(e){return Ya(t.Lt,e)}),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var s=e.mutations.map(function(e){return Ya(t.Lt,e)}),a=ao.fromMillis(e.localWriteTimeMs);return new Wu(e.batchId,a,n,s)}function ic(t){var e,n,r=nc(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?nc(t.lastLimboFreeSnapshotVersion):uo.min();return void 0!==t.query.documents?(to(1===(n=t.query).documents.length),e=ws(ps(za(n.documents[0])))):e=function(t){return ws(tu(t))}(t.query),new Xu(e,t.targetId,0,t.lastListenSequenceNumber,r,i,yo.fromBase64String(t.resumeToken))}function oc(t,e){var n,r=ec(e.snapshotVersion),i=ec(e.lastLimboFreeSnapshotVersion);n=Xo(e.target)?Ja(t.Lt,e.target):Za(t.Lt,e.target);var o=e.resumeToken.toBase64();return new Su(e.targetId,Wo(e.target),r,o,e.sequenceNumber,i,n)}function sc(t){var e=tu({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Is(e,e.limit,"L"):e}var ac=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return uc(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:nc(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return uc(t).put({bundleId:(n=e).id,createTime:ec(ja(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return cc(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:sc(e.bundledQuery),readTime:nc(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return cc(t).put(function(t){return{name:t.name,readTime:ec(ja(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function uc(t){return zu(t,Du.store)}function cc(t){return zu(t,Cu.store)}var hc=function(){function t(){this.Bt=new lc}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Lu.resolve()},t.prototype.getCollectionParents=function(t,e){return Lu.resolve(this.Bt.getEntries(e))},t}(),lc=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new da(po.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new da(po.comparator)).toArray()},t}(),fc=function(){function t(){this.qt=new lc}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var o={collectionId:r,parent:lu(i)};return pc(t).put(o)}return Lu.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[so(e),""],!1,!0);return pc(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(du(o.parent))}return n})},t}();function pc(t){return zu(t,Nu.store)}var dc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},vc=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function gc(t,e,n){var r=t.store(yu.store),i=t.store(bu.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){to(1===a)}));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],p=bu.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return Lu.waitFor(o).next(function(){return c})}function mc(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Zi();e=t.noDocument}return JSON.stringify(e).length}vc.DEFAULT_COLLECTION_PERCENTILE=10,vc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vc.DEFAULT=new vc(41943040,vc.DEFAULT_COLLECTION_PERCENTILE,vc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vc.DISABLED=new vc(-1,0,0);var yc=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return to(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return wc(t).$t({index:yu.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Ic(t),s=wc(t);return s.add({}).next(function(a){to("number"==typeof a);for(var u=new Wu(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return $a(t.Lt,e)}),i=n.mutations.map(function(e){return $a(t.Lt,e)});return new yu(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),h=[],l=new da(function(t,e){return io(t.canonicalString(),e.canonicalString())}),f=0,p=r;f<p.length;f++){var d=p[f],v=bu.key(i.userId,d.key.path,a);l=l.add(d.key.path.popLast()),h.push(s.put(c)),h.push(o.put(v,bu.PLACEHOLDER))}return l.forEach(function(e){h.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Kt[a]=u.keys()}),Lu.waitFor(h).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return wc(t).get(e).next(function(t){return t?(to(t.userId===n.userId),rc(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?Lu.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return wc(t).$t({index:yu.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(to(e.batchId>=r),o=rc(n.R,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return wc(t).$t({index:yu.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return wc(t).Nt(yu.userMutationsIndex,n).next(function(t){return t.map(function(t){return rc(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=bu.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Ic(t).$t({range:i},function(r,i,s){var a=r[0],u=r[1],c=r[2],h=du(u);if(a===n.userId&&e.path.isEqual(h))return wc(t).get(c).next(function(t){if(!t)throw Zi();to(t.userId===n.userId),o.push(rc(n.R,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new da(io),i=[];return e.forEach(function(e){var o=bu.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Ic(t).$t({range:s},function(t,i,o){var s=t[0],a=t[1],u=t[2],c=du(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()});i.push(a)}),Lu.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=bu.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new da(io);return Ic(t).$t({range:s},function(t,e,o){var s=t[0],u=t[1],c=t[2],h=du(u);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(a=a.add(c)):o.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(wc(t).get(e).next(function(t){if(null===t)throw Zi();to(t.userId===n.userId),r.push(rc(n.R,t))}))}),Lu.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return gc(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),Lu.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return Lu.resolve();var r=IDBKeyRange.lowerBound(bu.prefixForUser(e.userId)),i=[];return Ic(t).$t({range:r},function(t,n,r){if(t[0]===e.userId){var o=du(t[1]);i.push(o)}else r.done()}).next(function(){to(0===i.length)})})},t.prototype.containsKey=function(t,e){return bc(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return Tc(t).get(this.userId).next(function(t){return t||new mu(e.userId,-1,"")})},t}();function bc(t,e,n){var r=bu.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Ic(t).$t({range:o,kt:!0},function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()}).next(function(){return s})}function wc(t){return zu(t,yu.store)}function Ic(t){return zu(t,bu.store)}function Tc(t){return zu(t,mu.store)}var Ec=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),Sc=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new Ec(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return uo.fromTimestamp(new ao(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return _c(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return to(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return _c(t).$t(function(s,a){var u=ic(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return Lu.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return _c(t).$t(function(t,n){var r=ic(n);e(r)})},t.prototype.Xt=function(t){return Ac(t).get(Au.key).next(function(t){return to(null!==t),t})},t.prototype.Zt=function(t,e){return Ac(t).put(Au.key,e)},t.prototype.te=function(t,e){return _c(t).put(oc(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=Wo(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return _c(t).$t({range:r,index:Su.queryTargetsIndexName},function(t,n,r){var o=ic(n);Qo(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Nc(t);return e.forEach(function(e){var s=lu(e.path);i.push(o.put(new _u(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),Lu.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Nc(t);return Lu.forEach(e,function(e){var o=lu(e.path);return Lu.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Nc(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Nc(t),i=Ta();return r.$t({range:n,kt:!0},function(t,e,n){var r=du(t[1]),o=new ko(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=lu(e.path),r=IDBKeyRange.bound([n],[so(n)],!1,!0),i=0;return Nc(t).$t({index:_u.documentTargetsIndex,kt:!0,range:r},function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return _c(t).get(e).next(function(t){return t?ic(t):null})},t}();function _c(t){return zu(t,Su.store)}function Ac(t){return zu(t,Au.store)}function Nc(t){return zu(t,_u.store)}function kc(t){return V(this,void 0,void 0,function(){return U(this,function(e){if(t.code!==Hi.FAILED_PRECONDITION||t.message!==Ru)throw t;return Xi("LocalStore","Unexpectedly lost primary lease"),[2]})})}function Dc(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=io(n,i);return 0===s?io(r,o):s}var Cc=function(){function t(t){this.ne=t,this.buffer=new da(Dc),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Dc(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Oc=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Xi("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return V(e,void 0,void 0,function(){var e;return U(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return ju(e=n.sent())?(Xi("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,kc(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),Rc=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Lu.resolve(Gi.o);var r=new Cc(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Xi("LruGarbageCollector","Garbage collection skipped; disabled"),Lu.resolve(dc)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(Xi("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),dc):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(Xi("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),Qi()<=ct.DEBUG&&Xi("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-h)+"ms"),Lu.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),Pc=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new Rc(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return xc(t,n)},t.prototype.removeReference=function(t,e,n){return xc(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return xc(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return Tc(t).Ot(function(r){return bc(t,r,e).next(function(t){return t&&(n=!0),Lu.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,function(s,a){if(a<=e){var u=n._e(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),Nc(t).delete([0,lu(s.path)])})});i.push(u)}}).next(function(){return Lu.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return xc(t,e)},t.prototype.we=function(t,e){var n,r=Nc(t),i=Gi.o;return r.$t({index:_u.documentTargetsIndex},function(t,r){var o=t[0];t[1];var s=r.path,a=r.sequenceNumber;0===o?(i!==Gi.o&&e(new ko(du(n)),i),i=a,n=s):i=Gi.o}).next(function(){i!==Gi.o&&e(new ko(du(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function xc(t,e){return Nc(t).put(function(t,e){return new _u(0,lu(t.path),e)}(e,t.currentSequenceNumber))}var Lc=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.equalsFn(s,t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){ho(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}})},t.prototype.isEmpty=function(){return lo(this.inner)},t}(),Mc=function(){function t(){this.changes=new Lc(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:uo.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Go.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Lu.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Fc=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return jc(t).put(qc(e),n)},t.prototype.removeEntry=function(t,e){var n=jc(t),r=qc(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return jc(t).get(qc(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return jc(t).get(qc(e)).next(function(t){return{document:n.ye(e,t),size:mc(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=ma();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=ma(),i=new la(ko.comparator);return this.pe(t,e,function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,mc(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Lu.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return jc(t).$t({range:r},function(t,e,r){for(var s=ko.fromSegments(t);o&&ko.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=ma(),o=e.path.length+1,s={};if(n.isEqual(uo.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=Zu(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=Tu.collectionReadTimeIndex}return jc(t).$t(s,function(t,n,s){if(t.length===o){var a=Yu(r.R,n);e.path.isPrefixOf(a.key.path)?_s(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new Vc(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Uc(t).get(Eu.key).next(function(t){return to(!!t),t})},t.prototype.me=function(t,e){return Uc(t).put(Eu.key,e)},t.prototype.ye=function(t,e){if(e){var n=Yu(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(uo.min()))return n}return Go.newInvalidDocument(t)},t}(),Vc=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Lc(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return M(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new da(function(t,e){return io(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=Ju(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=mc(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var h=Ju(e.Ie.R,Go.newNoDocument(o,uo.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,h))}else n.push(e.Ie.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),Lu.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(Mc);function Uc(t){return zu(t,Eu.store)}function jc(t){return zu(t,Tu.store)}function qc(t){return t.path.toArray()}var Bc=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;to(n<r&&n>=0&&r<=11);var o=new Mu("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(gu.store)}(t),function(t){t.createObjectStore(mu.store,{keyPath:mu.keyPath}),t.createObjectStore(yu.store,{keyPath:yu.keyPath,autoIncrement:!0}).createIndex(yu.userMutationsIndex,yu.userMutationsKeyPath,{unique:!0}),t.createObjectStore(bu.store)}(t),Kc(t),function(t){t.createObjectStore(Tu.store)}(t));var s=Lu.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(_u.store),t.deleteObjectStore(Su.store),t.deleteObjectStore(Au.store)}(t),Kc(t)),s=s.next(function(){return t=o.store(Au.store),e=new Au(0,0,uo.min().toTimestamp(),0),t.put(Au.key,e);var t,e})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(yu.store).Nt().next(function(n){t.deleteObjectStore(yu.store),t.createObjectStore(yu.store,{keyPath:yu.keyPath,autoIncrement:!0}).createIndex(yu.userMutationsIndex,yu.userMutationsKeyPath,{unique:!0});var r=e.store(yu.store),i=n.map(function(t){return r.put(t)});return Lu.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(ku.store,{keyPath:ku.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.Re(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(Eu.store)}(t),i.be(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ve(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Pe(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Tu.store);e.createIndex(Tu.readTimeIndex,Tu.readTimeIndexPath,{unique:!1}),e.createIndex(Tu.collectionReadTimeIndex,Tu.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Ve(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(Du.store,{keyPath:Du.keyPath})}(t),function(t){t.createObjectStore(Cu.store,{keyPath:Cu.keyPath})}(t)})),s},t.prototype.be=function(t){var e=0;return t.store(Tu.store).$t(function(t,n){e+=mc(n)}).next(function(){var n=new Eu(e);return t.store(Eu.store).put(Eu.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(mu.store),r=t.store(yu.store);return n.Nt().next(function(n){return Lu.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(yu.userMutationsIndex,i).next(function(r){return Lu.forEach(r,function(r){to(r.userId===n.userId);var i=rc(e.R,r);return gc(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(_u.store),n=t.store(Tu.store);return t.store(Au.store).get(Au.key).next(function(t){var r=[];return n.$t(function(n,i){var o=new po(n),s=[0,lu(o)];r.push(e.get(s).next(function(n){return n?Lu.resolve():function(n){return e.put(new _u(0,lu(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return Lu.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(Nu.store,{keyPath:Nu.keyPath});var n=e.store(Nu.store),r=new lc,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:lu(i)})}};return e.store(Tu.store).$t({kt:!0},function(t,e){var n=new po(t);return i(n.popLast())}).next(function(){return e.store(bu.store).$t({kt:!0},function(t,e){t[0];var n=t[1];t[2];var r=du(n);return i(r.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(Su.store);return n.$t(function(t,r){var i=ic(r),o=oc(e.R,i);return n.put(o)})},t}();function Kc(t){t.createObjectStore(_u.store,{keyPath:_u.keyPath}).createIndex(_u.documentTargetsIndex,_u.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Su.store,{keyPath:Su.keyPath}).createIndex(Su.queryTargetsIndexName,Su.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Au.store)}var Gc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Hc=function(){function t(e,n,r,i,o,s,a,u,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=h,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new zi(Hi.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Pc(this,i),this.Le=n+"main",this.R=new $u(u),this.Be=new Fu(this.Le,11,new Bc(this.R)),this.qe=new Sc(this.referenceDelegate,this.R),this.Ut=new fc,this.Ue=function(t,e){return new Fc(t,e)}(this.R,this.Ut),this.Ke=new ac,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===h&&$i("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new zi(Hi.FAILED_PRECONDITION,Gc);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new Gi(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return V(e,void 0,void 0,function(){return U(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return V(e,void 0,void 0,function(){return U(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return V(e,void 0,void 0,function(){return U(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return Wc(e).put(new ku(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(ju(e))return Xi("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Xi("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return zc(t).get(gu.key).next(function(t){return Lu.resolve(e.tn(t))})},t.prototype.en=function(t){return Wc(t).delete(this.clientId)},t.prototype.nn=function(){return V(this,void 0,void 0,function(){var t,e,n,r,i=this;return U(this,function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=zu(t,ku.store);return e.Nt().next(function(t){var n=i.rn(t,18e5),r=t.filter(function(t){return-1===n.indexOf(t)});return Lu.forEach(r,function(t){return e.delete(t.clientId)}).next(function(){return r})})}).catch(function(){return[]})]);case 1:if(t=o.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)r=n[e],this.Qe.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Lu.resolve(!0):zc(t).get(gu.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new zi(Hi.FAILED_PRECONDITION,Gc);return!1}}return!(!e.networkEnabled||!e.inForeground)||Wc(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1})})}).next(function(t){return e.isPrimary!==t&&Xi("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return V(this,void 0,void 0,function(){var t=this;return U(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[gu.store,ku.store],function(e){var n=new Hu(e,Gi.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return Wc(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return yc.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;Xi("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,Ou,function(o){return i=new Hu(o,r.Ne?r.Ne.next():Gi.o),"readwrite-primary"===e?r.Je(i).next(function(t){return!!t||r.Ye(i)}).next(function(e){if(!e)throw $i("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable(function(){return r.Me(!1)}),new zi(Hi.FAILED_PRECONDITION,Ru);return n(i)}).next(function(t){return r.Ze(i).next(function(){return t})}):r.dn(i).next(function(){return n(i)})}).then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return zc(t).get(gu.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new zi(Hi.FAILED_PRECONDITION,Gc)})},t.prototype.Ze=function(t){var e=new gu(this.clientId,this.allowTabSynchronization,Date.now());return zc(t).put(gu.key,e)},t.yt=function(){return Fu.yt()},t.prototype.Xe=function(t){var e=this,n=zc(t);return n.get(gu.key).next(function(t){return e.tn(t)?(Xi("IndexedDbPersistence","Releasing primary lease."),n.delete(gu.key)):Lu.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&($i("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),!W()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return Xi("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return $i("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){$i("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function zc(t){return zu(t,gu.store)}function Wc(t){return zu(t,ku.store)}function Qc(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Xc=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return ko.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):ys(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new ko(e)).next(function(t){var e=ba();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=ba();return this.Ut.getCollectionParents(t,i).next(function(s){return Lu.forEach(s,function(s){var a=function(t,e){return new ls(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return i=e,o.Rn(t,i,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,h=r.get(c);null==h&&(h=Go.newInvalidDocument(c),r=r.insert(c,h)),Xs(u,h,o.localWriteTime),h.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){_s(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=Ta(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof ta&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),$c=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=Ta(),i=Ta(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Yc=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(uo.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(o){var s=i.Cn(e,o);return(ds(e)||vs(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(Qi()<=ct.DEBUG&&Xi("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Ss(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new da(As(t));return e.forEach(function(e,r){_s(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Qi()<=ct.DEBUG&&Xi("QueryEngine","Using full collection scan to execute query:",Ss(e)),this.Sn.getDocumentsMatchingQuery(t,e,uo.min())},t}(),Jc=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new la(io),this.kn=new Lc(function(t){return Wo(t)},Qo),this.$n=uo.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Xc(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function Zc(t,e,n,r){return new Jc(t,e,n,r)}function th(t,e){return V(this,void 0,void 0,function(){var n,r,i,o;return U(this,function(s){switch(s.label){case 0:return n=eo(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n._n.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new Xc(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=Ta(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var h=0,l=c.mutations;h<l.length;h++){var f=l[h];s=s.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var g=0,m=v.mutations;g<m.length;g++){var y=m[g];s=s.add(y.key)}}return i.pn(t,s).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function eh(t,e){var n=eo(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Lu.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=n.docVersions.get(t);to(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),s.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function nh(t){var e=eo(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function rh(t,e){var n=eo(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return to(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}});var a=ma();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(function(t,e,n,r,i){var o=Ta();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=ma();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(uo.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):Xi("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(uo.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return Lu.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.Fn=i,t})}function ih(t,e){var n=eo(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function oh(t,e){var n=eo(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?(r=i,Lu.resolve(r)):n.qe.allocateTargetId(t).next(function(i){return r=new Xu(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function sh(t,e,n){return V(this,void 0,void 0,function(){var r,i,o,s;return U(this,function(a){switch(a.label){case 0:r=eo(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!ju(s=a.sent()))throw s;return Xi("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function ah(t,e,n){var r=eo(t),i=uo.min(),o=Ta();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=eo(t),i=r.kn.get(n);return void 0!==i?Lu.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,ws(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:uo.min(),n?o:Ta())}).next(function(t){return{documents:t,Bn:o}})})}function uh(t,e){var n=eo(t),r=eo(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function ch(t){var e=eo(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=eo(t),i=ma(),o=Zu(n),s=jc(e),a=IDBKeyRange.lowerBound(o,!0);return s.$t({index:Tu.readTimeIndex,range:a},function(t,e){var n=Yu(r.R,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{wn:i,readTime:tc(o)}})}(e.On,t,e.$n)}).then(function(t){var n=t.wn,r=t.readTime;return e.$n=r,n})}function hh(t){return V(this,void 0,void 0,function(){var e;return U(this,function(n){return[2,(e=eo(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=jc(t),n=uo.min();return e.$t({index:Tu.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=tc(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.$n=t})]})})}var lh=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Lu.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:ja(n.createTime)}),Lu.resolve()},t.prototype.getNamedQuery=function(t,e){return Lu.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:sc(t.bundledQuery),readTime:ja(t.readTime)}}(e)),Lu.resolve()},t}(),fh=function(){function t(){this.Wn=new da(ph.Gn),this.zn=new da(ph.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new ph(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new ph(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new ko(new po([])),r=new ph(n,t),i=new ph(n,t+1),o=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),o.push(t.key)}),o},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new ko(new po([])),n=new ph(e,t),r=new ph(e,t+1),i=Ta();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new ph(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),ph=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return ko.comparator(t.key,e.key)||io(t.ns,e.ns)},t.Hn=function(t,e){return io(t.ns,e.ns)||ko.comparator(t.key,e.key)},t}(),dh=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new da(ph.Gn)}return t.prototype.checkEmpty=function(t){return Lu.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new Wu(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new ph(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Lu.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Lu.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return Lu.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Lu.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Lu.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new ph(e,0),i=new ph(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);o.push(e)}),Lu.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new da(io);return e.forEach(function(t){var e=new ph(t,0),i=new ph(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),Lu.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;ko.isDocumentKey(i)||(i=i.child(""));var o=new ph(new ko(i),0),s=new da(io);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)},o),Lu.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;to(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Lu.forEach(e.mutations,function(i){var o=new ph(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new ph(e,0),r=this.rs.firstAfterOrEqual(n);return Lu.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,Lu.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),vh=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new la(ko.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Lu.resolve(n?n.document.clone():Go.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=ma();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Go.newInvalidDocument(t))}),Lu.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=ma(),i=new ko(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.key,u=s.value,c=u.document,h=u.readTime;if(!e.path.isPrefixOf(a.path))break;h.compareTo(n)<=0||_s(e,c)&&(r=r.insert(c.key,c.clone()))}return Lu.resolve(r)},t.prototype.fs=function(t,e){return Lu.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new gh(this)},t.prototype.getSize=function(t){return Lu.resolve(this.size)},t}(),gh=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return M(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),Lu.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Mc),mh=function(){function t(t){this.persistence=t,this.ds=new Lc(function(t){return Wo(t)},Qo),this.lastRemoteSnapshotVersion=uo.min(),this.highestTargetId=0,this.ws=0,this._s=new fh,this.targetCount=0,this.ys=Ec.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),Lu.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Lu.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Lu.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Lu.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Lu.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Ec(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Lu.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Lu.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Lu.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Lu.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return Lu.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Lu.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Lu.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),Lu.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Lu.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Lu.resolve(n)},t.prototype.containsKey=function(t,e){return Lu.resolve(this._s.containsKey(e))},t}(),yh=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Gi(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new mh(this),this.Ut=new hc,this.Ue=function(t,e){return new vh(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new $u(e),this.Ke=new lh(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new dh(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;Xi("MemoryPersistence","Starting transaction:",t);var i=new bh(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return Lu.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),bh=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return M(e,t),e}(Pu),wh=function(){function t(t){this.persistence=t,this.As=new fh,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Zi()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Lu.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Lu.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Lu.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Lu.forEach(this.vs,function(r){var i=ko.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Lu.or([function(){return Lu.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),Ih=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function Th(t,e){return"firestore_clients_"+t+"_"+e}function Eh(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Sh(t,e){return"firestore_targets_"+t+"_"+e}Ih.UNAUTHENTICATED=new Ih(null),Ih.GOOGLE_CREDENTIALS=new Ih("google-credentials-uid"),Ih.FIRST_PARTY=new Ih("first-party-uid");var _h=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new zi(o.error.code,o.error.message)),s?new t(e,n,o.state,i):($i("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Ah=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new zi(i.error.code,i.error.message)),o?new t(e,i.state,r):($i("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Nh=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Sa(),s=0;i&&s<r.activeTargetIds.length;++s)i=No(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):($i("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),kh=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):($i("SharedClientState","Failed to parse online state: "+e),null)},t}(),Dh=function(){function t(){this.activeTargetIds=Sa()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Ch=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new la(io),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=Th(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new Dh),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return V(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,h,l=this;return U(this,function(f){switch(f.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(Th(this.persistenceKey,r)))&&(o=Nh.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Qs(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.$s;u<c.length;u++)h=c[u],this.Fs(h);return this.$s=[],this.window.addEventListener("pagehide",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Sh(this.persistenceKey,t));if(n){var r=Ah.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Sh(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Xi("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Xi("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Xi("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Xi("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void $i("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return V(e,void 0,void 0,function(){var t,e,r,i,o,s;return U(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=Gi.o;if(null!=t)try{var n=JSON.parse(t);to("number"==typeof n),e=n}catch(t){$i("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Gi.o&&this.sequenceNumberHandler(s);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new _h(this.currentUser,t,e,n),i=Eh(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=Eh(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=Sh(this.persistenceKey,t),i=new Ah(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return Nh.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return _h.Vs(new Ih(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return Ah.Vs(r,e)},t.prototype.js=function(t){return kh.Vs(t)},t.prototype.ii=function(t){return V(this,void 0,void 0,function(){return U(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Xi("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.hi(s,a).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=Sa();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),Oh=function(){function t(){this.li=new Dh,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new Dh,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Rh=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Ph=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Xi("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Xi("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),xh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Lh=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Mh=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return M(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,o){var s=new Ki;s.listenOnce(Fi.COMPLETE,function(){try{switch(s.getLastErrorCode()){case Mi.NO_ERROR:var e=s.getResponseJson();Xi("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Mi.TIMEOUT:Xi("Connection",'RPC "'+t+'" timed out'),o(new zi(Hi.DEADLINE_EXCEEDED,"Request time out"));break;case Mi.HTTP_ERROR:var n=s.getStatus();if(Xi("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=r.status.toLowerCase().replace(/_/g,"-");return Object.values(Hi).indexOf(e)>=0?e:Hi.UNKNOWN}();o(new zi(a,r.message))}else o(new zi(Hi.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new zi(Hi.UNAVAILABLE,"Connection failed."));break;default:Zi()}}finally{Xi("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.Oi=function(t,e){var n,r,i=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=new Oi,s=Sn(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new qi({})),this.Fi(a.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(z())||"object"==typeof navigator&&"ReactNative"===navigator.product||z().indexOf("Electron/")>=0||((r=z()).indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0)||z().indexOf("MSAppHost/")>=0||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(a.httpHeadersOverwriteParam="$httpHeaders");var u=i.join("");Xi("Connection","Creating WebChannel: "+u,a);var c=o.createWebChannel(u,a),h=!1,l=!1,f=new Lh({Ei:function(t){l?Xi("Connection","Not sending because WebChannel is closed:",t):(h||(Xi("Connection","Opening WebChannel transport."),c.open(),h=!0),Xi("Connection","WebChannel sending:",t),c.send(t))},Ti:function(){return c.close()}}),p=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return p(c,Bi.EventType.OPEN,function(){l||Xi("Connection","WebChannel transport opened.")}),p(c,Bi.EventType.CLOSE,function(){l||(l=!0,Xi("Connection","WebChannel transport closed"),f.Vi())}),p(c,Bi.EventType.ERROR,function(t){l||(l=!0,Yi("Connection","WebChannel transport errored:",t),f.Vi(new zi(Hi.UNAVAILABLE,"The operation could not be completed")))}),p(c,Bi.EventType.MESSAGE,function(t){var e;if(!l){var n=t.data[0];to(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){Xi("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=ia[o];if(void 0!==e)return ha(e)}(),a=i.message;void 0===s&&(s=Hi.INTERNAL,a="Unknown error status: "+o+" with message "+i.message),l=!0,f.Vi(new zi(s,a)),c.close()}else Xi("Connection","WebChannel received:",n),f.Si(n)}}),p(s,Vi.STAT_EVENT,function(t){t.stat===Ui?Xi("Connection","Detected buffering proxy"):t.stat===ji&&Xi("Connection","Detected no buffering proxy")}),setTimeout(function(){f.Pi()},0),f},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Xi("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then(function(t){return Xi("RestConnection","Received: ",t),t},function(e){throw Yi("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.8.1",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=xh[t];return this.Di+"/v1/"+e+":"+n},t}());function Fh(){return"undefined"!=typeof window?window:null}function Vh(){return"undefined"!=typeof document?document:null}function Uh(t){return new Ma(t,!0)}var jh=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&Xi("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Ki=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),qh=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new jh(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return V(this,void 0,void 0,function(){return U(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return V(this,void 0,void 0,function(){return U(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return V(this,void 0,void 0,function(){return U(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Hi.RESOURCE_EXHAUSTED?($i(e.toString()),$i("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===Hi.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new zi(Hi.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return V(t,void 0,void 0,function(){return U(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return Xi("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(Xi("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),Bh=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return M(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Zi()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(to(void 0===e||"string"==typeof e),yo.fromBase64String(e||"")):(to(void 0===e||e instanceof Uint8Array),yo.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?Hi.UNKNOWN:ha(t.code);return new zi(e,t.message||"")}(a);n=new Da(r,i,o,s||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=Ga(t,r.document.name),o=ja(r.document.updateTime);var a=new Bo({mapValue:{fields:r.document.fields}}),u=(s=Go.newFoundDocument(i,o,a),r.targetIds||[]),c=r.removedTargetIds||[];n=new Na(u,c,s.key,s)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=Ga(t,r.document),o=r.readTime?ja(r.readTime):uo.min(),a=Go.newNoDocument(i,o),s=r.removedTargetIds||[],n=new Na([],s,a.key,a);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=Ga(t,r.document),o=r.removedTargetIds||[],n=new Na([],o,i,null);else{if(!("filter"in e))return Zi();e.filter;var h=e.filter;h.targetId,r=h.count||0,i=new ua(r),o=h.targetId,n=new ka(o,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return uo.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?uo.min():e.readTime?ja(e.readTime):uo.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=Wa(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=Xo(r)?{documents:Ja(t,r)}:{query:Za(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Va(t,e.resumeToken):e.snapshotVersion.compareTo(uo.min())>0&&(n.readTime=Fa(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Zi()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=Wa(this.R),e.removeTarget=t,this.cr(e)},e}(qh),Kh=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return M(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(to(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(to(void 0!==e),t.map(function(t){return function(t,e){var n=t.updateTime?ja(t.updateTime):ja(e);return n.isEqual(uo.min())&&(n=ja(e)),new Gs(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=ja(t.commitTime);return this.listener.Tr(n,e)}return to(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Wa(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return $a(e.R,t)})};this.cr(n)},e}(qh),Gh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return M(e,t),e.prototype.br=function(){if(this.Rr)throw new zi(Hi.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Hi.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new zi(Hi.UNKNOWN,t.toString())})},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.$i(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Hi.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new zi(Hi.UNKNOWN,t.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),Hh=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?($i(e),this.Vr=!1):Xi("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),zh=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return V(o,void 0,void 0,function(){return U(this,function(t){switch(t.label){case 0:return el(this)?(Xi("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return V(this,void 0,void 0,function(){var e;return U(this,function(n){switch(n.label){case 0:return(e=eo(t)).Or.add(4),[4,Qh(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,Wh(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new Hh(n,r)};function Wh(t){return V(this,void 0,void 0,function(){var e,n;return U(this,function(r){switch(r.label){case 0:if(!el(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Qh(t){return V(this,void 0,void 0,function(){var e,n;return U(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Xh(t,e){var n=eo(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),tl(n)?Zh(n):gl(n).er()&&Yh(n,e))}function $h(t,e){var n=eo(t),r=gl(n);n.$r.delete(e),r.er()&&Jh(n,e),0===n.$r.size&&(r.er()?r.ir():el(n)&&n.Br.set("Unknown"))}function Yh(t,e){t.qr.U(e.targetId),gl(t).mr(e)}function Jh(t,e){t.qr.U(e),gl(t).yr(e)}function Zh(t){t.qr=new Oa({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),gl(t).start(),t.Br.Sr()}function tl(t){return el(t)&&!gl(t).tr()&&t.$r.size>0}function el(t){return 0===eo(t).Or.size}function nl(t){t.qr=void 0}function rl(t){return V(this,void 0,void 0,function(){return U(this,function(e){return t.$r.forEach(function(e,n){Yh(t,e)}),[2]})})}function il(t,e){return V(this,void 0,void 0,function(){return U(this,function(n){return nl(t),tl(t)?(t.Br.Nr(e),Zh(t)):t.Br.set("Unknown"),[2]})})}function ol(t,e,n){return V(this,void 0,void 0,function(){var r,i,o;return U(this,function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof Da&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return V(this,void 0,void 0,function(){var n,r,i,o;return U(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?(o=i[r],t.$r.has(o)?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:s.sent(),t.$r.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Xi("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,sl(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Na?t.qr.X(e):e instanceof ka?t.qr.rt(e):t.qr.et(e),n.isEqual(uo.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,nh(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(yo.EMPTY_BYTE_STRING,n.snapshotVersion)),Jh(t,e);var r=new Xu(n.target,e,1,n.sequenceNumber);Yh(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Xi("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,sl(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function sl(t,e,n){return V(this,void 0,void 0,function(){var r=this;return U(this,function(i){switch(i.label){case 0:if(!ju(e))throw e;return t.Or.add(1),[4,Qh(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return nh(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return V(r,void 0,void 0,function(){return U(this,function(e){switch(e.label){case 0:return Xi("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,Wh(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function al(t,e){return e().catch(function(n){return sl(t,n,e)})}function ul(t){return V(this,void 0,void 0,function(){var e,n,r,i,o;return U(this,function(s){switch(s.label){case 0:e=eo(t),n=ml(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return el(t)&&t.kr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,ih(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=ml(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,sl(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return cl(e)&&hl(e),[2]}})})}function cl(t){return el(t)&&!ml(t).tr()&&t.kr.length>0}function hl(t){ml(t).start()}function ll(t){return V(this,void 0,void 0,function(){return U(this,function(e){return ml(t).Ar(),[2]})})}function fl(t){return V(this,void 0,void 0,function(){var e,n,r,i;return U(this,function(o){for(e=ml(t),n=0,r=t.kr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]})})}function pl(t,e,n){return V(this,void 0,void 0,function(){var r,i;return U(this,function(o){switch(o.label){case 0:return r=t.kr.shift(),i=Qu.from(r,e,n),[4,al(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,ul(t)];case 2:return o.sent(),[2]}})})}function dl(t,e){return V(this,void 0,void 0,function(){return U(this,function(n){switch(n.label){case 0:return e&&ml(t).pr?[4,function(t,e){return V(this,void 0,void 0,function(){var n,r;return U(this,function(i){switch(i.label){case 0:return ca(r=e.code)&&r!==Hi.ABORTED?(n=t.kr.shift(),ml(t).sr(),[4,al(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,ul(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return cl(t)&&hl(t),[2]}})})}function vl(t,e){return V(this,void 0,void 0,function(){var n;return U(this,function(r){switch(r.label){case 0:return n=eo(t),e?(n.Or.delete(2),[4,Wh(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,Qh(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function gl(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=eo(t);return r.br(),new Bh(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:rl.bind(null,t),Ri:il.bind(null,t),_r:ol.bind(null,t)}),t.Mr.push(function(n){return V(e,void 0,void 0,function(){return U(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),tl(t)?Zh(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),nl(t),e.label=3;case 3:return[2]}})})})),t.Ur}function ml(t){var e=this;return t.Kr||(t.Kr=function(t,e,n){var r=eo(t);return r.br(),new Kh(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:ll.bind(null,t),Ri:dl.bind(null,t),Ir:fl.bind(null,t),Tr:pl.bind(null,t)}),t.Mr.push(function(n){return V(e,void 0,void 0,function(){return U(this,function(e){switch(e.label){case 0:return n?(t.Kr.sr(),[4,ul(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:e.sent(),t.kr.length>0&&(Xi("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Kr}var yl=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new xu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new zi(Hi.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function bl(t,e){if($i("AsyncQueue",e+": "+t),ju(t))return new zi(Hi.UNAVAILABLE,e+": "+t);throw t}var wl=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||ko.comparator(e.key,n.key)}:function(t,e){return ko.comparator(t.key,e.key)},this.keyedMap=ba(),this.sortedSet=new la(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Il=function(){function t(){this.Qr=new la(ko.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):Zi():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),Tl=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,wl.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Ts(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),El=function(){this.Wr=void 0,this.listeners=[]},Sl=function(){this.queries=new Lc(function(t){return Es(t)},Ts),this.onlineState="Unknown",this.Gr=new Set};function _l(t,e){return V(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return U(this,function(c){switch(c.label){case 0:if(n=eo(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new El),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=bl(a,"Initialization of query '"+Ss(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&Nl(n),[2]}})})}function Al(t,e){return V(this,void 0,void 0,function(){var n,r,i,o,s;return U(this,function(a){return n=eo(t),r=e.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function Nl(t){t.Gr.forEach(function(t){t.next()})}var kl=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Tl(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=Tl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),Dl=function(t){this.key=t},Cl=function(t){this.key=t},Ol=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=Ta(),this.mutatedKeys=Ta(),this.lo=As(t),this.fo=new wl(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new Il,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=ds(this.query)&&i.size===this.query.limit?i.last():null,c=vs(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var h=i.get(t),l=_s(n.query,e)?e:null,f=!!h&&n.mutatedKeys.has(h.key),p=!!l&&(l.hasLocalMutations||n.mutatedKeys.has(l.key)&&l.hasCommittedMutations),d=!1;h&&l?h.data.isEqual(l.data)?f!==p&&(r.track({type:3,doc:l}),d=!0):n.yo(h,l)||(r.track({type:2,doc:l}),d=!0,(u&&n.lo(l,u)>0||c&&n.lo(l,c)<0)&&(a=!0)):!h&&l?(r.track({type:0,doc:l}),d=!0):h&&!l&&(r.track({type:1,doc:h}),d=!0,(u||c)&&(a=!0)),d&&(l?(s=s.add(l),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),ds(this.query)||vs(this.query))for(;s.size>this.query.limit;){var h=ds(this.query)?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Zi()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new Tl(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Il,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=Ta(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new Cl(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new Dl(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Ta();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return Tl.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),Rl=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Pl=function(t){this.key=t,this.bo=!1},xl=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new Lc(function(t){return Es(t)},Ts),this.Vo=new Map,this.So=new Set,this.Do=new la(ko.comparator),this.Co=new Map,this.No=new fh,this.xo={},this.Fo=new Map,this.ko=Ec.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function Ll(t,e){return V(this,void 0,void 0,function(){var n,r,i,o,s,a;return U(this,function(u){switch(u.label){case 0:return n=sf(t),(o=n.Po.get(e))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,oh(n.localStore,ws(e))];case 2:return s=u.sent(),a=n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.targetId,[4,Ml(n,e,r,"current"===a)];case 3:i=u.sent(),n.isPrimaryClient&&Xh(n.remoteStore,s),u.label=4;case 4:return[2,i]}})})}function Ml(t,e,n,r){return V(this,void 0,void 0,function(){var i,o,s,a,u,c;return U(this,function(h){switch(h.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return V(this,void 0,void 0,function(){var i,o,s;return U(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,ah(t.localStore,e.query,!1).then(function(t){var n=t.documents;return e.view._o(n,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(zl(t,e.targetId,s.To),s.snapshot)]}})})}(t,e,n,r)},[4,ah(t.localStore,e,!0)];case 1:return i=h.sent(),o=new Ol(e,i.Bn),s=o._o(i.documents),a=Aa.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),zl(t,n,u.To),c=new Rl(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function Fl(t,e){return V(this,void 0,void 0,function(){var n,r,i;return U(this,function(o){switch(o.label){case 0:return n=eo(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!Ts(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,sh(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),$h(n.remoteStore,r.targetId),Gl(n,r.targetId)}).catch(kc)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Gl(n,r.targetId),[4,sh(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function Vl(t,e,n){return V(this,void 0,void 0,function(){var r,i,o,s;return U(this,function(a){switch(a.label){case 0:r=af(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=eo(t),i=ao.now(),o=e.reduce(function(t,e){return t.add(e.key)},Ta());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],h=$s(c,n.get(c.key));null!=h&&s.push(new ta(c.key,h,Ko(h.value.mapValue),Hs.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new la(io)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,Xl(r,i.changes)];case 3:return a.sent(),[4,ul(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=bl(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function Ul(t,e){return V(this,void 0,void 0,function(){var n,r;return U(this,function(i){switch(i.label){case 0:n=eo(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,rh(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(to(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?to(r.bo):t.removedDocuments.size>0&&(to(r.bo),r.bo=!1))}),[4,Xl(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,kc(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function jl(t,e,n){var r=eo(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=eo(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)}),r&&Nl(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function ql(t,e){return V(this,void 0,void 0,function(){var n,r,i,o,s;return U(this,function(a){switch(a.label){case 0:el((n=eo(t)).remoteStore)||Xi("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=eo(n.localStore);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}()];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=bl(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function Bl(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function Kl(t,e,n){var r=eo(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Gl(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||Hl(t,e)})}function Hl(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&($h(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Ql(t))}function zl(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Dl?(t.No.addReference(o.key,e),Wl(t,o)):o instanceof Cl?(Xi("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||Hl(t,o.key)):Zi()}}function Wl(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Xi("SyncEngine","New document in limbo: "+n),t.So.add(r),Ql(t))}function Ql(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new ko(po.fromString(e)),r=t.ko.next();t.Co.set(r,new Pl(n)),t.Do=t.Do.insert(n,r),Xh(t.remoteStore,new Xu(ws(ps(n.path)),r,2,Gi.o))}}function Xl(t,e,n){return V(this,void 0,void 0,function(){var r,i,o,s;return U(this,function(a){switch(a.label){case 0:return r=eo(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){s.push(r.Oo(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=$c.Pn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return V(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,h;return U(this,function(l){switch(l.label){case 0:n=eo(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return Lu.forEach(e,function(e){return Lu.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return Lu.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!ju(r=l.sent()))throw r;return Xi("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=o[i],a=s.targetId,s.fromCache||(u=n.Fn.get(a),c=u.snapshotVersion,h=u.withLastLimboFreeSnapshotVersion(c),n.Fn=n.Fn.insert(a,h));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function $l(t,e){return V(this,void 0,void 0,function(){var n,r,i;return U(this,function(o){switch(o.label){case 0:return[4,ah((n=eo(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&zl(n,e.targetId,i.To),i)]}})})}function Yl(t){return V(this,void 0,void 0,function(){var e;return U(this,function(n){return[2,ch((e=eo(t)).localStore).then(function(t){return Xl(e,t)})]})})}function Jl(t,e,n,r){return V(this,void 0,void 0,function(){var i,o;return U(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=eo(t),r=eo(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):Lu.resolve(null)})})}((i=eo(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,ul(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Kl(i,e,r||null),Bl(i,e),function(t,e){eo(eo(t)._n).Gt(e)}(i.localStore,e)):Zi(),s.label=4;case 4:return[4,Xl(i,o)];case 5:return s.sent(),[3,7];case 6:Xi("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function Zl(t,e){return V(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return U(this,function(h){switch(h.label){case 0:return sf(n=eo(t)),af(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,tf(n,r.toArray())]);case 1:return i=h.sent(),n.$o=!0,[4,vl(n.remoteStore,!0)];case 2:for(h.sent(),o=0,s=i;o<s.length;o++)a=s[o],Xh(n.remoteStore,a);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(u=[],c=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?u.push(e):c=c.then(function(){return Gl(n,e),sh(n.localStore,e,!0)}),$h(n.remoteStore,e)}),[4,c]);case 4:return h.sent(),[4,tf(n,u)];case 5:return h.sent(),function(t){var e=eo(n);e.Co.forEach(function(t,n){$h(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new la(ko.comparator)}(),n.$o=!1,[4,vl(n.remoteStore,!1)];case 6:h.sent(),h.label=7;case 7:return[2]}})})}function tf(t,e,n){return V(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,h,l,f,p,d,v;return U(this,function(g){switch(g.label){case 0:n=eo(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(a=s[o],u=void 0,(c=n.Vo.get(a))&&0!==c.length?[4,oh(n.localStore,ws(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),h=0,l=c,g.label=3;case 3:return h<l.length?(f=l[h],p=n.Po.get(f),[4,$l(n,p)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,uh(n.localStore,a)];case 8:return v=g.sent(),[4,oh(n.localStore,v)];case 9:return u=g.sent(),[4,Ml(n,ef(v),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function ef(t){return fs(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function nf(t){var e=eo(t);return eo(eo(e.localStore).persistence).fn()}function rf(t,e,n,r){return V(this,void 0,void 0,function(){var i,o,s;return U(this,function(a){switch(a.label){case 0:return(i=eo(t)).$o?(Xi("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,ch(i.localStore)];case 3:return o=a.sent(),s=_a.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Xl(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,sh(i.localStore,e,!0)];case 6:return a.sent(),Gl(i,e,r),[3,8];case 7:Zi(),a.label=8;case 8:return[2]}})})}function of(t,e,n){return V(this,void 0,void 0,function(){var r,i,o,s,a,u,c,h,l,f;return U(this,function(p){switch(p.label){case 0:if(!(r=sf(t)).$o)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(s=o[i],r.Vo.has(s)?(Xi("SyncEngine","Adding an already active target "+s),[3,5]):[4,uh(r.localStore,s)]):[3,6];case 2:return a=p.sent(),[4,oh(r.localStore,a)];case 3:return u=p.sent(),[4,Ml(r,ef(a),u.targetId,!1)];case 4:p.sent(),Xh(r.remoteStore,u),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return U(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,sh(r.localStore,t,!1).then(function(){$h(r.remoteStore,t),Gl(r,t)}).catch(kc)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},h=0,l=n,p.label=7;case 7:return h<l.length?(f=l[h],[5,c(f)]):[3,10];case 8:p.sent(),p.label=9;case 9:return h++,[3,7];case 10:return[2]}})})}function sf(t){var e=eo(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ul.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=function(t,e){var n=eo(t),r=n.Co.get(e);if(r&&r.bo)return Ta().add(r.key);var i=Ta(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=a[s],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=function(t,e,n){return V(this,void 0,void 0,function(){var r,i,o,s,a,u;return U(this,function(c){switch(c.label){case 0:return(r=eo(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new la(ko.comparator)).insert(o,Go.newNoDocument(o,uo.min())),a=Ta().add(o),u=new _a(uo.min(),new Map,new da(io),s,a),[4,Ul(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),Ql(r),[3,4];case 2:return[4,sh(r.localStore,e,!1).then(function(){return Gl(r,e,n)}).catch(kc)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}.bind(null,e),e.vo._r=function(t,e){for(var n=eo(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,u=n.queries.get(a);if(u){for(var c=0,h=u.listeners;c<h.length;c++)h[c].Hr(s)&&(r=!0);u.Wr=s}}r&&Nl(n)}.bind(null,e.eventManager),e.vo.Mo=function(t,e,n){var r=eo(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}.bind(null,e.eventManager),e}function af(t){var e=eo(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=function(t,e){return V(this,void 0,void 0,function(){var n,r,i;return U(this,function(o){switch(o.label){case 0:n=eo(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,eh(n.localStore,e)];case 2:return i=o.sent(),Kl(n,r,null),Bl(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Xl(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,kc(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=function(t,e,n){return V(this,void 0,void 0,function(){var r,i;return U(this,function(o){switch(o.label){case 0:r=eo(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=eo(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return to(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),Kl(r,e,n),Bl(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Xl(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,kc(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}.bind(null,e),e}var uf=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return V(this,void 0,void 0,function(){return U(this,function(e){switch(e.label){case 0:return this.R=Uh(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return Zc(this.persistence,new Yc,t.initialUser,this.R)},t.prototype.qo=function(t){return new yh(wh.bs,this.R)},t.prototype.Bo=function(t){return new Oh},t.prototype.terminate=function(){return V(this,void 0,void 0,function(){return U(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),cf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return M(e,t),e.prototype.initialize=function(e){return V(this,void 0,void 0,function(){return U(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,hh(this.localStore)];case 2:return n.sent(),[4,this.Qo.initialize(this,e)];case 3:return n.sent(),[4,af(this.Qo.syncEngine)];case 4:return n.sent(),[4,ul(this.Qo.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Ko=function(t){return Zc(this.persistence,new Yc,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new Oc(e,t.asyncQueue)},e.prototype.qo=function(t){var e=Qc(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?vc.withCacheSize(this.cacheSizeBytes):vc.DEFAULT;return new Hc(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Fh(),Vh(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Oh},e}(uf),hf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return M(e,t),e.prototype.initialize=function(e){return V(this,void 0,void 0,function(){var n,r=this;return U(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof Ch?(this.sharedClientState.syncEngine={ui:Jl.bind(null,n),ai:rf.bind(null,n),hi:of.bind(null,n),fn:nf.bind(null,n),ci:Yl.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return V(r,void 0,void 0,function(){return U(this,function(e){switch(e.label){case 0:return[4,Zl(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=Fh();if(!Ch.yt(e))throw new zi(Hi.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Qc(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Ch(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(cf),lf=function(){function t(){}return t.prototype.initialize=function(t,e){return V(this,void 0,void 0,function(){var n=this;return U(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return jl(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=function(t,e){return V(this,void 0,void 0,function(){var n,r;return U(this,function(i){switch(i.label){case 0:return(n=eo(t)).currentUser.isEqual(e)?[3,3]:(Xi("SyncEngine","User change. New user:",e.toKey()),[4,th(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new zi(Hi.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Xl(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}.bind(null,this.syncEngine),[4,vl(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new Sl},t.prototype.createDatastore=function(t){var e,n=Uh(t.databaseInfo.databaseId),r=(e=t.databaseInfo,new Mh(e));return function(t,e,n){return new Gh(t,r,n)}(t.credentials,0,n)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return jl(s.syncEngine,t,0)},o=Ph.yt()?new Ph:new Rh,new zh(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new xl(t,e,n,r,i,o);return s&&(a.$o=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return V(this,void 0,void 0,function(){var e;return U(this,function(n){switch(n.label){case 0:return e=eo(t),Xi("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,Qh(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),ff=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),pf=function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return V(this,void 0,void 0,function(){var e,n=this;return U(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new zi(Hi.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return V(this,void 0,void 0,function(){var n,r,i,o,s,a;return U(this,function(u){switch(u.label){case 0:return n=eo(t),r=Wa(n.R)+"/documents",i={documents:e.map(function(t){return Ka(n.R,t)})},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){to(!!e.found),e.found.name,e.found.updateTime;var n=Ga(t,e.found.name),r=ja(e.found.updateTime),i=new Bo({mapValue:{fields:e.found.fields}});return Go.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){to(!!e.missing),to(!!e.readTime);var n=Ga(t,e.missing),r=ja(e.readTime);return Go.newNoDocument(n,r)}(t,e):Zi()}(n.R,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());to(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new sa(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return V(this,void 0,void 0,function(){var t,e=this;return U(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=ko.fromPath(n);e.mutations.push(new aa(r,e.precondition(r)))}),[4,function(t,e){return V(this,void 0,void 0,function(){var n,r,i;return U(this,function(o){switch(o.label){case 0:return n=eo(t),r=Wa(n.R)+"/documents",i={writes:e.map(function(t){return $a(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Zi();e=uo.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new zi(Hi.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Hs.updateTime(e):Hs.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(uo.min()))throw new zi(Hi.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Hs.updateTime(e)}return Hs.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}(),df=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new jh(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return V(t,void 0,void 0,function(){var t,e,n=this;return U(this,function(r){return t=new pf(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!_o(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!ca(e)}return!1},t}(),vf=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Ih.UNAUTHENTICATED,this.clientId=ro.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,function(t){return V(r,void 0,void 0,function(){return U(this,function(e){switch(e.label){case 0:return Xi("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}})})})}return t.prototype.getConfiguration=function(){return V(this,void 0,void 0,function(){return U(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new zi(Hi.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new xu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return V(t,void 0,void 0,function(){var t,n;return U(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=bl(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function gf(t,e){return V(this,void 0,void 0,function(){var n,r,i=this;return U(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Xi("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(t){return V(i,void 0,void 0,function(){return U(this,function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,th(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}})})}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function mf(t,e){return V(this,void 0,void 0,function(){var n,r;return U(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,yf(t)];case 1:return n=i.sent(),Xi("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(t){return function(t,e){return V(this,void 0,void 0,function(){var n,r;return U(this,function(i){switch(i.label){case 0:return(n=eo(t)).asyncQueue.verifyOperationInProgress(),Xi("RemoteStore","RemoteStore received new credentials"),r=el(n),n.Or.add(3),[4,Qh(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,Wh(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,t)}),t.onlineComponents=e,[2]}})})}function yf(t){return V(this,void 0,void 0,function(){return U(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Xi("FirestoreClient","Using default OfflineComponentProvider"),[4,gf(t,new uf)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function bf(t){return V(this,void 0,void 0,function(){return U(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Xi("FirestoreClient","Using default OnlineComponentProvider"),[4,mf(t,new lf)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function wf(t){return yf(t).then(function(t){return t.persistence})}function If(t){return yf(t).then(function(t){return t.localStore})}function Tf(t){return bf(t).then(function(t){return t.remoteStore})}function Ef(t){return bf(t).then(function(t){return t.syncEngine})}function Sf(t){return V(this,void 0,void 0,function(){var e,n;return U(this,function(r){switch(r.label){case 0:return[4,bf(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Ll.bind(null,e.syncEngine),n.onUnlisten=Fl.bind(null,e.syncEngine),n)]}})})}function _f(t,e,n){var r=this;void 0===n&&(n={});var i=new xu;return t.asyncQueue.enqueueAndForget(function(){return V(r,void 0,void 0,function(){var r;return U(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new ff({next:function(o){e.enqueueAndForget(function(){return Al(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new zi(Hi.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new zi(Hi.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new kl(ps(n.path),o,{includeMetadataChanges:!0,so:!0});return _l(t,s)},[4,Sf(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function Af(t,e,n){var r=this;void 0===n&&(n={});var i=new xu;return t.asyncQueue.enqueueAndForget(function(){return V(r,void 0,void 0,function(){var r;return U(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new ff({next:function(n){e.enqueueAndForget(function(){return Al(t,s)}),n.fromCache&&"server"===r.source?i.reject(new zi(Hi.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new kl(n,o,{includeMetadataChanges:!0,so:!0});return _l(t,s)},[4,Sf(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var Nf=function(t,e,n,r,i,o,s,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=a},kf=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Df=new Map,Cf=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Of=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable(function(){return e(Ih.UNAUTHENTICATED)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Rf=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable(function(){return e(n.token.user)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Pf=function(){function t(t){var e=this;this.currentUser=Ih.UNAUTHENTICATED,this.oc=new xu,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable(function(){return e.changeListener(e.currentUser)})};var n=function(t){Xi("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit(function(t){return n(t)}),setTimeout(function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(Xi("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}},0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(Xi("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(to("string"==typeof n.accessToken),new Cf(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable(function(){return V(n,void 0,void 0,function(){return U(this,function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}})})})},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return to(null===t||"string"==typeof t),new Ih(t)},t}(),xf=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=Ih.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),Lf=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new xf(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable(function(){return e(Ih.FIRST_PARTY)})},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Mf(t,e,n){if(!n)throw new zi(Hi.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Ff(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new zi(Hi.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Vf(t,e,n,r){if(!0===e&&!0===r)throw new zi(Hi.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Uf(t){if(!ko.isDocumentKey(t))throw new zi(Hi.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function jf(t){if(ko.isDocumentKey(t))throw new zi(Hi.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function qf(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Zi()}function Bf(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new zi(Hi.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=qf(t);throw new zi(Hi.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Kf(t,e){if(e<=0)throw new zi(Hi.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Gf=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new zi(Hi.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new zi(Hi.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Vf("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),Hf=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gf({}),this._settingsFrozen=!1,t instanceof kf?(this._databaseId=t,this._credentials=new Of):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new zi(Hi.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kf(t.options.projectId)}(t),this._credentials=new Pf(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new zi(Hi.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new zi(Hi.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gf(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Of;switch(t.type){case"gapi":var e=t.client;return to(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Lf(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new zi(Hi.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return this,(t=Df.get(this))&&(Xi("ComponentProvider","Removing Datastore"),Df.delete(this),t.terminate()),Promise.resolve();var t},t}(),zf=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Qf(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Wf=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Qf=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,ps(r))||this)._path=r,i.type="collection",i}return M(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new zf(this.firestore,null,new ko(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Wf);function Xf(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=nt(t),Mf("collection","path",e),t instanceof Hf)return jf(n=po.fromString.apply(po,B([e],r))),new Qf(t,null,n);if(!(t instanceof zf||t instanceof Qf))throw new zi(Hi.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return jf(n=po.fromString.apply(po,B([t.path],r)).child(po.fromString(e))),new Qf(t.firestore,null,n)}function $f(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=nt(t),1===arguments.length&&(e=ro.u()),Mf("doc","path",e),t instanceof Hf)return Uf(n=po.fromString.apply(po,B([e],r))),new zf(t,null,new ko(n));if(!(t instanceof zf||t instanceof Qf))throw new zi(Hi.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Uf(n=t._path.child(po.fromString.apply(po,B([e],r)))),new zf(t.firestore,t instanceof Qf?t.converter:null,new ko(n))}function Yf(t,e){return t=nt(t),e=nt(e),(t instanceof zf||t instanceof Qf)&&(e instanceof zf||e instanceof Qf)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Jf(t,e){return t=nt(t),e=nt(e),t instanceof Wf&&e instanceof Wf&&t.firestore===e.firestore&&Ts(t._query,e._query)&&t.converter===e.converter}var Zf=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new jh(this,"async_queue_retry"),this.Ic=function(){var e=Vh();e&&Xi("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Vh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},t.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var e=Vh();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise(function(){});var n=new xu;return this.Rc(function(){return e._c&&e.Ec?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)}).then(function(){return n.promise})},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.wc.push(t),e.bc()})},t.prototype.bc=function(){return V(this,void 0,void 0,function(){var t,e=this;return U(this,function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!ju(t=n.sent()))throw t;return Xi("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return e.bc()}),n.label=5;case 5:return[2]}})})},t.prototype.Rc=function(t){var e=this,n=this.dc.then(function(){return e.gc=!0,t().catch(function(t){throw e.yc=t,e.gc=!1,$i("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.gc=!1,t})});return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ac(),this.Tc.indexOf(t)>-1&&(e=0);var i=yl.createAndSchedule(this,t,e,n,function(t){return r.vc(t)});return this.mc.push(i),i},t.prototype.Ac=function(){this.yc&&Zi()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return V(this,void 0,void 0,function(){var t;return U(this,function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.Vc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Sc=function(t){var e=this;return this.Pc().then(function(){e.mc.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Pc()})},t.prototype.Dc=function(t){this.Tc.push(t)},t.prototype.vc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function tp(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var ep=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new Zf,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return M(e,t),e.prototype._terminate=function(){return this._firestoreClient||rp(this),this._firestoreClient.terminate()},e}(Hf);function np(t){return t._firestoreClient||rp(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function rp(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Nf(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new vf(t._credentials,t._queue,r)}function ip(t,e,n){var r=this,i=new xu;return t.asyncQueue.enqueue(function(){return V(r,void 0,void 0,function(){var r;return U(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,gf(t,n)];case 1:return o.sent(),[4,mf(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Hi.FAILED_PRECONDITION||t.code===Hi.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function op(t){if(t._initialized||t._terminated)throw new zi(Hi.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var sp=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new zi(Hi.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new go(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),ap=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(yo.fromBase64String(e))}catch(e){throw new zi(Hi.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(yo.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),up=function(t){this._methodName=t},cp=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new zi(Hi.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new zi(Hi.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return io(this._lat,t._lat)||io(this._long,t._long)},t}(),hp=/^__.*__$/,lp=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new ta(t,this.data,this.fieldMask,e,this.fieldTransforms):new Zs(t,this.data,e,this.fieldTransforms)},t}(),fp=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new ta(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function pp(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Zi()}}var dp=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Fc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,kc:!1});return r.$c(t),r},t.prototype.Oc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,kc:!1});return r.Cc(),r},t.prototype.Mc=function(t){return this.xc({path:void 0,kc:!0})},t.prototype.Lc=function(t){return xp(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(pp(this.Nc)&&hp.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),vp=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Uh(t)}return t.prototype.Uc=function(t,e,n,r){return void 0===r&&(r=!1),new dp({Nc:t,methodName:e,qc:n,path:go.emptyPath(),kc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function gp(t){var e=t._freezeSettings(),n=Uh(t._databaseId);return new vp(t._databaseId,!!e.ignoreUndefinedProperties,n)}function mp(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Uc(o.merge||o.mergeFields?2:0,e,n,i);Cp("Data must be an object, but it was:",s,r);var a,u,c=kp(r,s);if(o.merge)a=new mo(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var h=[],l=0,f=o.mergeFields;l<f.length;l++){var p=Op(e,f[l],n);if(!s.contains(p))throw new zi(Hi.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");Lp(h,p)||h.push(p)}a=new mo(h),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new lp(new Bo(c),a,u)}var yp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw 1===t.Nc?t.Lc(this._methodName+"() can only appear at the top level of your update data"):t.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(up);function bp(t,e,n){return new dp({Nc:3,qc:e.settings.qc,methodName:t._methodName,kc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var wp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype._toFieldTransform=function(t){return new Ks(t.path,new Ls)},e.prototype.isEqual=function(t){return t instanceof e},e}(up),Ip=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return M(e,t),e.prototype._toFieldTransform=function(t){var e=bp(this,t,!0),n=this.Kc.map(function(t){return Np(t,e)}),r=new Ms(n);return new Ks(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(up),Tp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return M(e,t),e.prototype._toFieldTransform=function(t){var e=bp(this,t,!0),n=this.Kc.map(function(t){return Np(t,e)}),r=new Vs(n);return new Ks(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(up),Ep=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return M(e,t),e.prototype._toFieldTransform=function(t){var e=new js(t.R,Cs(t.R,this.Qc));return new Ks(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(up);function Sp(t,e,n,r){var i=t.Uc(1,e,n);Cp("Data must be an object, but it was:",i,r);var o=[],s=Bo.empty();ho(r,function(t,r){var a=Pp(e,t,n);r=nt(r);var u=i.Oc(a);if(r instanceof yp)o.push(a);else{var c=Np(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new mo(o);return new fp(s,a,i.fieldTransforms)}function _p(t,e,n,r,i,o){var s=t.Uc(1,e,n),a=[Op(e,r,n)],u=[i];if(o.length%2!=0)throw new zi(Hi.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Op(e,o[c])),u.push(o[c+1]);for(var h=[],l=Bo.empty(),f=a.length-1;f>=0;--f)if(!Lp(h,a[f])){var p=a[f],d=u[f];d=nt(d);var v=s.Oc(p);if(d instanceof yp)h.push(p);else{var g=Np(d,v);null!=g&&(h.push(p),l.set(p,g))}}var m=new mo(h);return new fp(l,m,s.fieldTransforms)}function Ap(t,e,n,r){return void 0===r&&(r=!1),Np(n,t.Uc(r?4:3,e))}function Np(t,e){if(Dp(t=nt(t)))return Cp("Unsupported field value:",e,t),kp(t,e);if(t instanceof up)return function(t,e){if(!pp(e.Nc))throw e.Lc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Lc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.kc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Np(o[i],e.Mc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=nt(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Cs(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=ao.fromDate(t);return{timestampValue:Fa(e.R,n)}}if(t instanceof ao)return n=new ao(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Fa(e.R,n)};if(t instanceof cp)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ap)return{bytesValue:Va(e.R,t._byteString)};if(t instanceof zf){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:qa(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Lc("Unsupported field value: "+qf(t))}(t,e)}function kp(t,e){var n={};return lo(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ho(t,function(t,r){var i=Np(r,e.Fc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function Dp(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof ao||t instanceof cp||t instanceof ap||t instanceof zf||t instanceof up)}function Cp(t,e,n){if(!Dp(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=qf(n);throw"an object"===r?e.Lc(t+" a custom object"):e.Lc(t+" "+r)}}function Op(t,e,n){if((e=nt(e))instanceof sp)return e._internalPath;if("string"==typeof e)return Pp(t,e);throw xp("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Rp=new RegExp("[~\\*/\\[\\]]");function Pp(t,e,n){if(e.search(Rp)>=0)throw xp("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(sp.bind.apply(sp,B([void 0],e.split(".")))))._internalPath}catch(r){throw xp("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function xp(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new zi(Hi.INVALID_ARGUMENT,(a+=". ")+t+u)}function Lp(t,e){return t.some(function(t){return t.isEqual(e)})}var Mp=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new zf(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Fp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Vp("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Fp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Mp);function Vp(t,e){return"string"==typeof e?Pp(t,e):e instanceof sp?e._internalPath:e._delegate._internalPath}var Up=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),jp=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return M(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new qp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Vp("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Mp),qp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(jp),Bp=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Up(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new qp(n._firestore,n._userDataWriter,r.key,r,new Up(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new zi(Hi.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new qp(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Up(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new qp(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Up(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Kp(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Kp(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Zi()}}function Gp(t,e){return t instanceof jp&&e instanceof jp?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Bp&&e instanceof Bp&&t._firestore===e._firestore&&Jf(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Hp(t){if(vs(t)&&0===t.explicitOrderBy.length)throw new zi(Hi.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var zp=function(){};function Wp(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){t=i[r]._apply(t)}return t}var Qp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).jc=e,i.Wc=n,i.Gc=r,i.type="where",i}return M(e,t),e.prototype._apply=function(t){var e=gp(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new zi(Hi.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){ed(s,o);for(var u=[],c=0,h=s;c<h.length;c++){var l=h[c];u.push(td(r,t,l))}a={arrayValue:{values:u}}}else a=td(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||ed(s,o),a=Ap(n,"where",s,"in"===o||"not-in"===o);var f=$o.create(i,o,a);return function(t,e){if(e.g()){var n=ms(t);if(null!==n&&!n.isEqual(e.field))throw new zi(Hi.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=gs(t);null!==r&&nd(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(e.op){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}());if(null!==i)throw i===e.op?new zi(Hi.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new zi(Hi.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t._query,0,e,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new Wf(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new ls(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(zp),Xp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jc=e,r.zc=n,r.type="orderBy",r}return M(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new zi(Hi.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new zi(Hi.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new as(e,n);return function(t,e){if(null===gs(t)){var n=ms(t);null!==n&&nd(t,n,e.field)}}(t,r),r}(t._query,this.jc,this.zc);return new Wf(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new ls(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(zp),$p=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return M(e,t),e.prototype._apply=function(t){return new Wf(t.firestore,t.converter,Is(t._query,this.Hc,this.Jc))},e}(zp),Yp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return M(e,t),e.prototype._apply=function(t){var e=Zp(t,this.type,this.Yc,this.Xc);return new Wf(t.firestore,t.converter,function(t,e){return new ls(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(zp),Jp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return M(e,t),e.prototype._apply=function(t){var e=Zp(t,this.type,this.Yc,this.Xc);return new Wf(t.firestore,t.converter,function(t,e){return new ls(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(zp);function Zp(t,e,n,r){if(n[0]=nt(n[0]),n[0]instanceof Mp)return function(t,e,n,r,i){if(!r)throw new zi(Hi.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=bs(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(Lo(e,r.key));else{var c=r.data.field(u.field);if(Eo(c))throw new zi(Hi.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=u.field.canonicalString();throw new zi(Hi.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new os(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=gp(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new zi(Hi.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new zi(Hi.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!ys(t)&&-1!==c.indexOf("/"))throw new zi(Hi.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(po.fromString(c));if(!ko.isDocumentKey(h))throw new zi(Hi.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var l=new ko(h);a.push(Lo(e,l))}else{var f=Ap(n,r,c);a.push(f)}}return new os(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function td(t,e,n){if("string"==typeof(n=nt(n))){if(""===n)throw new zi(Hi.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!ys(e)&&-1!==n.indexOf("/"))throw new zi(Hi.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(po.fromString(n));if(!ko.isDocumentKey(r))throw new zi(Hi.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Lo(t,new ko(r))}if(n instanceof zf)return Lo(t,n._key);throw new zi(Hi.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+qf(n)+".")}function ed(t,e){if(!Array.isArray(t)||0===t.length)throw new zi(Hi.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new zi(Hi.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function nd(t,e,n){if(!n.isEqual(e))throw new zi(Hi.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var rd=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Do(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Io(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(To(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Zi()}},t.prototype.convertObject=function(t,e){var n=this,r={};return ho(t.fields,function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new cp(Io(t.latitude),Io(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=function t(e){var n=e.mapValue.fields.__previous_value__;return Eo(n)?t(n):n}(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(So(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=wo(t);return new ao(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=po.fromString(t);to(hu(n));var r=new kf(n.get(1),n.get(3)),i=new ko(n.popFirst(5));return r.isEqual(e)||$i("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function id(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var od=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return M(e,t),e.prototype.convertBytes=function(t){return new ap(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new zf(this.firestore,null,e)},e}(rd),sd=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=gp(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=ad(t,this._firestore),i=id(r.converter,e,n),o=mp(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Hs.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=ad(t,this._firestore);return o="string"==typeof(e=nt(e))||e instanceof sp?_p(this._dataReader,"WriteBatch.update",s._key,e,n,r):Sp(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Hs.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=ad(t,this._firestore);return this._mutations=this._mutations.concat(new sa(e._key,Hs.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new zi(Hi.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function ad(t,e){if((t=nt(t)).firestore!==e)throw new zi(Hi.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var ud=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return M(e,t),e.prototype.convertBytes=function(t){return new ap(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new zf(this.firestore,null,e)},e}(rd);function cd(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Bf(t,zf);var o=Bf(t.firestore,ep),s=gp(o);return ld(o,[("string"==typeof(e=nt(e))||e instanceof sp?_p(s,"updateDoc",t._key,e,n,r):Sp(s,"updateDoc",t._key,e)).toMutation(t._key,Hs.exists(!0))])}function hd(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=nt(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||tp(i[a])||(s=i[a],a++);var u,c,h,l={includeMetadataChanges:s.includeMetadataChanges};if(tp(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof zf)c=Bf(t.firestore,ep),h=ps(t._key.path),u={next:function(e){i[a]&&i[a](fd(c,t,e))},error:i[a+1],complete:i[a+2]};else{var p=Bf(t,Wf);c=Bf(p.firestore,ep),h=p._query;var d=new ud(c);u={next:function(t){i[a]&&i[a](new Bp(c,d,p,t))},error:i[a+1],complete:i[a+2]},Hp(t._query)}return function(t,e,n,r){var i=this,o=new ff(u),s=new kl(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return V(i,void 0,void 0,function(){var e;return U(this,function(n){switch(n.label){case 0:return e=_l,[4,Sf(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Wo(),t.asyncQueue.enqueueAndForget(function(){return V(i,void 0,void 0,function(){var e;return U(this,function(n){switch(n.label){case 0:return e=Al,[4,Sf(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(np(c),h,l)}function ld(t,e){return function(t,e){var n=this,r=new xu;return t.asyncQueue.enqueueAndForget(function(){return V(n,void 0,void 0,function(){var n;return U(this,function(i){switch(i.label){case 0:return n=Vl,[4,Ef(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(np(t),e)}function fd(t,e,n){var r=n.docs.get(e._key),i=new ud(t);return new jp(t,i,e._key,r,new Up(n.hasPendingWrites,n.fromCache),e.converter)}var pd=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return M(e,t),e.prototype.get=function(e){var n=this,r=ad(e,this._firestore),i=new ud(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new jp(n._firestore,i,r._key,t._document,new Up(!1,!1),r.converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=gp(t)}return t.prototype.get=function(t){var e=this,n=ad(t,this._firestore),r=new od(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return Zi();var i=t[0];if(i.isFoundDocument())return new Mp(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Mp(e._firestore,r,n._key,null,n.converter);throw Zi()})},t.prototype.set=function(t,e,n){var r=ad(t,this._firestore),i=id(r.converter,e,n),o=mp(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=ad(t,this._firestore);return o="string"==typeof(e=nt(e))||e instanceof sp?_p(this._dataReader,"Transaction.update",s._key,e,n,r):Sp(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=ad(t,this._firestore);return this._transaction.delete(e._key),this},t}());function dd(){if("undefined"==typeof Uint8Array)throw new zi(Hi.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function vd(){if("undefined"==typeof atob)throw new zi(Hi.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var gd=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return vd(),new t(ap.fromBase64String(e))},t.fromUint8Array=function(e){return dd(),new t(ap.fromUint8Array(e))},t.prototype.toBase64=function(){return vd(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return dd(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),md=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){op(t=Bf(t,ep));var n=np(t),r=t._freezeSettings(),i=new lf;return ip(n,i,new cf(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){op(t=Bf(t,ep));var e=np(t),n=t._freezeSettings(),r=new lf;return ip(e,r,new hf(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new zi(Hi.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new xu;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return V(e,void 0,void 0,function(){var e;return U(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return V(this,void 0,void 0,function(){var e;return U(this,function(n){switch(n.label){case 0:return Fu.yt()?(e=t+"main",[4,Fu.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}})})}(Qc(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),yd=function(){function t(t,e,n){var r=this;this._delegate=e,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof kf||(this.tu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||Yi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=Bf(t,Hf))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&Yi("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var o=F({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[K.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),K.encodeString(JSON.stringify(o),!1),""].join(".")}(r.mockUserToken),s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new zi(Hi.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new Rf(new Cf(o,new Ih(s)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return V(e,void 0,void 0,function(){var e,n;return U(this,function(r){switch(r.label){case 0:return[4,wf(t)];case 1:return e=r.sent(),[4,Tf(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=eo(n);return e.Or.delete(0),Wh(e)}())]}})})})}(np(Bf(this._delegate,ep)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return V(e,void 0,void 0,function(){var e,n;return U(this,function(r){switch(r.label){case 0:return[4,wf(t)];case 1:return e=r.sent(),[4,Tf(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return V(this,void 0,void 0,function(){var e;return U(this,function(n){switch(n.label){case 0:return(e=eo(t)).Or.add(0),[4,Qh(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(np(Bf(this._delegate,ep)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Vf("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new xu;return t.asyncQueue.enqueueAndForget(function(){return V(e,void 0,void 0,function(){var e;return U(this,function(r){switch(r.label){case 0:return e=ql,[4,Ef(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(np(Bf(this._delegate,ep)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new ff(e);return t.asyncQueue.enqueueAndForget(function(){return V(n,void 0,void 0,function(){var e;return U(this,function(n){switch(n.label){case 0:return e=function(t,e){eo(t).Gr.add(e),e.next()},[4,Sf(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return V(n,void 0,void 0,function(){var e;return U(this,function(n){switch(n.label){case 0:return e=function(t,e){eo(t).Gr.delete(e)},[4,Sf(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(np(t=Bf(t,ep)),tp(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new zi(Hi.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Rd(this,Xf(this._delegate,t))}catch(t){throw Sd(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new Ed(this,$f(this._delegate,t))}catch(t){throw Sd(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new Dd(this,function(t,e){if(t=Bf(t,Hf),Mf("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new zi(Hi.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Wf(t,null,function(t){return new ls(po.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw Sd(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new xu;return t.asyncQueue.enqueueAndForget(function(){return V(n,void 0,void 0,function(){var n;return U(this,function(i){switch(i.label){case 0:return[4,function(t){return bf(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new df(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(np(t),function(n){return e(new pd(t,n))})}(this._delegate,function(n){return t(new wd(e,n))})},t.prototype.batch=function(){var t=this;return np(this._delegate),new Id(new sd(this._delegate,function(e){return ld(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new zi(Hi.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new zi(Hi.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),bd=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return M(e,t),e.prototype.convertBytes=function(t){return new gd(new ap(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return Ed.eu(e,this.firestore,null)},e}(rd);var wd=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new bd(t)}return t.prototype.get=function(t){var e=this,n=Pd(t);return this._delegate.get(n).then(function(t){return new Nd(e._firestore,new jp(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))})},t.prototype.set=function(t,e,n){var r=Pd(t);return n?(Ff("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Pd(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,B([s,e,n],i)),this},t.prototype.delete=function(t){var e=Pd(t);return this._delegate.delete(e),this},t}(),Id=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=Pd(t);return n?(Ff("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Pd(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,B([s,e,n],i)),this},t.prototype.delete=function(t){var e=Pd(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),Td=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new qp(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new kd(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.nu=function(e,n){var r=t.su,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new bd(e),n),i.set(n,o)),o},t}();Td.su=new WeakMap;var Ed=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new bd(t)}return t.iu=function(e,n,r){if(e.length%2!=0)throw new zi(Hi.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new zf(n._delegate,r,new ko(e)))},t.eu=function(e,n,r){return new t(n,new zf(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Rd(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Rd(this.firestore,Xf(this._delegate,t))}catch(t){throw Sd(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=nt(t))instanceof zf&&Yf(this._delegate,t)},t.prototype.set=function(t,e){e=Ff("DocumentReference.set",e);try{return function(t,e,n){t=Bf(t,zf);var r=Bf(t.firestore,ep),i=id(t.converter,e,n);return ld(r,[mp(gp(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Hs.none())])}(this._delegate,t,e)}catch(t){throw Sd(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?cd(this._delegate,t):cd.apply(void 0,B([this._delegate,t,e],n))}catch(t){throw Sd(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return ld(Bf((t=this._delegate).firestore,ep),[new sa(t._key,Hs.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=_d(e),i=Ad(e,function(e){return new Nd(t.firestore,new jp(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))});return hd(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Bf(t,zf);var e=Bf(t.firestore,ep),n=np(e),r=new ud(e);return function(t,e){var n=this,r=new xu;return t.asyncQueue.enqueueAndForget(function(){return V(n,void 0,void 0,function(){var n;return U(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return V(this,void 0,void 0,function(){var r,i;return U(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=eo(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new zi(Hi.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=bl(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,If(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new jp(e,r,t._key,n,new Up(null!==n&&n.hasLocalMutations,!0),t.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Bf(t,zf);var e=Bf(t.firestore,ep);return _f(np(e),t._key,{source:"server"}).then(function(n){return fd(e,t,n)})}(this._delegate):function(t){t=Bf(t,zf);var e=Bf(t.firestore,ep);return _f(np(e),t._key).then(function(n){return fd(e,t,n)})}(this._delegate)).then(function(t){return new Nd(e.firestore,new jp(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(Td.nu(this.firestore,e)):this._delegate.withConverter(null))},t}();function Sd(t,e,n){return t.message=t.message.replace(e,n),t}function _d(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!tp(r))return r}return{}}function Ad(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=tp(t[0])?t[0]:tp(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Nd=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new Ed(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Gp(this._delegate,t._delegate)},t}(),kd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(Nd),Dd=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new bd(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,Wp(this._delegate,function(t,e,n){var r=e,i=Vp("where",t);return new Qp(i,r,n)}(e,n,r)))}catch(e){throw Sd(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,Wp(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Vp("orderBy",t);return new Xp(r,n)}(e,n)))}catch(e){throw Sd(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,Wp(this._delegate,function(t){return Kf("limit",t),new $p("limit",t,"F")}(e)))}catch(e){throw Sd(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,Wp(this._delegate,function(t){return Kf("limitToLast",t),new $p("limitToLast",t,"L")}(e)))}catch(e){throw Sd(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Wp(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Yp("startAt",t,!0)}.apply(void 0,e)))}catch(e){throw Sd(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Wp(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Yp("startAfter",t,!1)}.apply(void 0,e)))}catch(e){throw Sd(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Wp(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Jp("endBefore",t,!0)}.apply(void 0,e)))}catch(e){throw Sd(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Wp(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Jp("endAt",t,!1)}.apply(void 0,e)))}catch(e){throw Sd(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Jf(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Bf(t,Wf);var e=Bf(t.firestore,ep),n=np(e),r=new ud(e);return function(t,e){var n=this,r=new xu;return t.asyncQueue.enqueueAndForget(function(){return V(n,void 0,void 0,function(){var n;return U(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return V(this,void 0,void 0,function(){var r,i,o,s,a;return U(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,ah(t,e,!0)];case 1:return a=u.sent(),r=new Ol(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=bl(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,If(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new Bp(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Bf(t,Wf);var e=Bf(t.firestore,ep),n=np(e),r=new ud(e);return Af(n,t._query,{source:"server"}).then(function(n){return new Bp(e,r,t,n)})}(this._delegate):function(t){t=Bf(t,Wf);var e=Bf(t.firestore,ep),n=np(e),r=new ud(e);return Hp(t._query),Af(n,t._query).then(function(n){return new Bp(e,r,t,n)})}(this._delegate)).then(function(t){return new Od(e.firestore,new Bp(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=_d(e),i=Ad(e,function(e){return new Od(t.firestore,new Bp(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return hd(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(Td.nu(this.firestore,e)):this._delegate.withConverter(null))},t}(),Cd=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new kd(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),Od=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new Dd(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new kd(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new Cd(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new kd(n._firestore,r))})},t.prototype.isEqual=function(t){return Gp(this._delegate,t._delegate)},t}(),Rd=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return M(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Ed(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Ed(this.firestore,void 0===t?$f(this._delegate):$f(this._delegate,t))}catch(t){throw Sd(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Bf(t.firestore,ep),r=$f(t),i=id(t.converter,e);return ld(n,[mp(gp(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Hs.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new Ed(e.firestore,t)})},e.prototype.isEqual=function(t){return Yf(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(Td.nu(this.firestore,t)):this._delegate.withConverter(null))},e}(Dd);function Pd(t){return Bf(t,zf)}var xd,Ld=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(sp.bind.apply(sp,B([void 0],t)))}return t.documentId=function(){return new t(go.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=nt(t))instanceof sp&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),Md=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new wp("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new yp("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ip("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Tp("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=new Ep("increment",e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),Fd={Firestore:yd,GeoPoint:cp,Timestamp:ao,Blob:gd,Transaction:wd,WriteBatch:Id,DocumentReference:Ed,DocumentSnapshot:Nd,Query:Dd,QueryDocumentSnapshot:kd,QuerySnapshot:Od,CollectionReference:Rd,FieldPath:Ld,FieldValue:Md,setLogLevel:function(t){var e;e=t,Wi.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new rt("firestore",function(t){return function(t,e){return new yd(t,new ep(t,e),new md)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},Fd)))})(xd=Pt),xd.registerVersion("@firebase/firestore","2.3.10");Pt.initializeApp({apiKey:"AIzaSyDjoANC8ZnQAUzmWDHSsWo1NFI7FZ0bTp8",authDomain:"web-class-69d47.firebaseapp.com",projectId:"web-class-69d47",storageBucket:"web-class-69d47.appspot.com",messagingSenderId:"466387220053",appId:"1:466387220053:web:e790f77b819ef408ee86dc",measurementId:"G-EWJRQR83PZ"});Pt.auth();const Vd=Pt.firestore();function Ud(t,e,n){const r=t.slice();return r[17]=e[n],r[19]=n,r}function jd(t){let e,n,i,o,d,v,g,m,y,b,w,I,T,E,S,_,A,N=t[17].task+"";function k(){return t[7](t[17],t[19])}function D(){return t[8](t[17])}function C(){return t[9](t[17])}return{c(){e=c("li"),n=h(N),i=l(),d=c("hr"),v=l(),(g=c("button")).textContent="Delete",m=c("span"),y=l(),(b=c("button")).textContent="Complete",w=c("span"),I=l(),(T=c("button")).textContent="Uncomplete",E=c("hr"),S=c("hr"),p(e,"style",o=!0===t[17].completed||"true"===t[17].completed?"color:green":"color:red"),p(d,"class","svelte-1oy08i0"),p(g,"class","svelte-1oy08i0"),p(b,"class","svelte-1oy08i0"),p(T,"class","svelte-1oy08i0"),p(E,"class","svelte-1oy08i0"),p(S,"class","svelte-1oy08i0")},m(t,r){a(t,e,r),s(e,n),s(e,i),a(t,d,r),a(t,v,r),a(t,g,r),a(t,m,r),a(t,y,r),a(t,b,r),a(t,w,r),a(t,I,r),a(t,T,r),a(t,E,r),a(t,S,r),_||(A=[f(g,"click",k),f(b,"click",D),f(T,"click",C)],_=!0)},p(r,i){var s,a;t=r,4&i&&N!==(N=t[17].task+"")&&(a=""+(a=N),(s=n).wholeText!==a&&(s.data=a)),4&i&&o!==(o=!0===t[17].completed||"true"===t[17].completed?"color:green":"color:red")&&p(e,"style",o)},d(t){t&&u(e),t&&u(d),t&&u(v),t&&u(g),t&&u(m),t&&u(y),t&&u(b),t&&u(w),t&&u(I),t&&u(T),t&&u(E),t&&u(S),_=!1,r(A)}}}function qd(e){let n,i,o,h,m,y,b,w,I,T,E,S,_,N,k,D,C,O,R,P,x,L=e[2],M=[];for(let t=0;t<L.length;t+=1)M[t]=jd(Ud(e,L,t));return{c(){n=c("main"),(i=c("h1")).textContent="Very Simple Task Manager",o=l(),h=c("ul");for(let t=0;t<M.length;t+=1)M[t].c();m=l(),y=c("form"),b=c("input"),w=l(),I=c("select"),(T=c("option")).textContent="Incomplete",(E=c("option")).textContent="Complete",S=l(),(_=c("button")).textContent="Add",N=l(),k=c("br"),D=l(),(C=c("span")).textContent="Sync App:",O=l(),(R=c("button")).textContent="🔄",p(b,"type","text"),p(b,"name","task"),p(b,"placeholder","Do vocabulary worksheets"),v(b,"width","250px"),p(b,"class","svelte-1oy08i0"),T.__value="false",T.value=T.__value,E.__value="true",E.value=E.__value,v(I,"height","21px"),p(I,"name","completed"),p(I,"class","svelte-1oy08i0"),void 0===e[1]&&A(()=>e[11].call(I)),p(_,"class","svelte-1oy08i0"),p(R,"class","svelte-1oy08i0"),p(n,"class","svelte-1oy08i0")},m(t,r){a(t,n,r),s(n,i),s(n,o),s(n,h);for(let t=0;t<M.length;t+=1)M[t].m(h,null);s(n,m),s(n,y),s(y,b),d(b,e[0]),s(y,w),s(y,I),s(I,T),s(I,E),g(I,e[1]),s(y,S),s(y,_),s(n,N),s(n,k),s(n,D),s(n,C),s(n,O),s(n,R),P||(x=[f(b,"input",e[10]),f(I,"change",e[11]),f(y,"submit",e[12]),f(R,"click",e[13])],P=!0)},p(t,[e]){if(116&e){let n;for(L=t[2],n=0;n<L.length;n+=1){const r=Ud(t,L,n);M[n]?M[n].p(r,e):(M[n]=jd(r),M[n].c(),M[n].m(h,null))}for(;n<M.length;n+=1)M[n].d(1);M.length=L.length}1&e&&b.value!==t[0]&&d(b,t[0]),2&e&&g(I,t[1])},i:t,o:t,d(t){t&&u(n),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(M,t),P=!1,r(x)}}}function Bd(t,e,n){let r,i;document.title="Very Simple Task Manager",b(async()=>{Vd.collection("homework-1").get().then(t=>{!function(t){for(let e=0;e<t.length;e++){let n=t[e];console.log(n.id,n.data());let r={...n.data(),id:n.id};s.push(r)}n(2,o=s),console.log(o)}(t.docs)})});let o=[],s=[];function a(){event.preventDefault();let t=Object.fromEntries(new FormData(event.target));Vd.collection("homework-1").add(t).then(e=>{e.get().then(e=>{let r=[...o];console.log(e.data()),console.log(e.id),r.push(t),n(2,o=r)})}),n(0,r=""),n(1,i="Incomplete")}function u(t,e){Vd.collection("homework-1").doc(t).delete()}function c(t){Vd.collection("homework-1").doc(t).update({completed:!0})}function h(t){Vd.collection("homework-1").doc(t).update({completed:!1})}return[r,i,o,a,u,c,h,(t,e)=>u(t.id),t=>c(t.id),t=>h(t.id),function(){r=this.value,n(0,r)},function(){i=function(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}(this),n(1,i)},()=>a(),()=>void location.reload()]}return new class extends x{constructor(t){super(),P(this,t,Bd,qd,o,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
